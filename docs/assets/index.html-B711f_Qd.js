import{_ as i,c as a,e as n,o as l}from"./app-asHTIEiU.js";const h="/docs/images/image-20230928164130440.png",e="/docs/images/image-20230928164138957.png",p="/docs/images/image-20210322103040674.png",t="/docs/images/image-20220604163905645.png",k="/docs/images/image-20220604164221952.png",d="/docs/images/image-20220604164549468.png",r="/docs/images/image-20220604165145141.png",g="/docs/images/image-20220604165525384.png",c="/docs/images/image-20210322133820431.png",o="/docs/images/image-20210322135008844.png",y="/docs/images/image-20220605081910952.png",m="/docs/images/image-20220605082130838.png",A="/docs/images/image-20220605082248826.png",D="/docs/images/image-20220605082403503.png",u="/docs/images/image-20220605082528328.png",v="/docs/images/image-20220605082625624.png",B="/docs/images/image-20220605081532806.png",b="/docs/images/image-20220605083227428.png",C="/docs/images/image-20220605083513690.png",E="/docs/images/image-20220605083715043.png",f="/docs/images/image-20220605084247101.png",_="/docs/images/image-20220605084406430.png",x="/docs/images/image-20220605084450167.png",F="/docs/images/image-20220606182947329.png",j="/docs/images/image-20210322174708164.png",S="/docs/images/image-20230928164236853.png",X="/docs/images/image-20210322175549121.png",M="/docs/images/image-20210322175609021.png",G="/docs/images/image-20220606183542274.png",z="/docs/images/image-20210322172801851.png",q="/docs/images/image-20210322175628817.png",J="/docs/images/image-20210329105800328.png",T="/docs/images/image-20210329105546453.png",P="/docs/images/image-20220606183820312.png",O="/docs/images/image-20220606184302779.png",w="/docs/images/image-20220606184358909.png",K="/docs/images/image-20210329104743038.png",R="/docs/images/image-20220606184050633.png",L="/docs/images/image-20220606184820692.png",V="/docs/images/image-20220606184610285.png",I="/docs/images/image-20220606184637200.png",N="/docs/images/image-20220606184659735.png",H="/docs/images/image-20220606184716425.png",U="/docs/images/image-20210329114350327.png",W="/docs/images/image-20210329114932971.png",Z="/docs/images/image-20220606185129410.png",Y="/docs/images/image-20220606185153807.png",$="/docs/images/image-20220606185211781.png",Q="/docs/images/image-20220606185227953.png",ss="/docs/images/image-20210325135403075.png",is="/docs/images/image-20210329093556986.png",as="/docs/images/image-20210324101225120.png",ns="/docs/images/image-20210324103100187.png",ls="/docs/images/image-20210324104530470.png",hs="/docs/images/image-20210324105125093.png",es="/docs/images/image-20200421111048271.png",ps="/docs/images/image-20210325104219429.png",ts="/docs/images/image-20200421114248164.png",ks="/docs/images/image-20220830183650282.png",ds="/docs/images/image-20220830184731968.png",rs="/docs/images/image-20220830185043741.png",gs="/docs/images/image-20220830185209013.png",cs="/docs/images/image-20210325135056497.png",os="/docs/images/image-20210330111421370.png",ys="/docs/images/image-20210326141144524.png",ms="/docs/images/image-20210326141912946.png",As="/docs/images/image-20210326141956360.png",Ds="/docs/images/image-20210330111458021.png",us="/docs/images/image-20210330143017610.png",vs="/docs/images/image-20210326152043324.png",Bs="/docs/images/image-20210401175034807.png",bs="/docs/images/image-20230928164252806.png",Cs="/docs/images/image-20210331111333565.png",Es="/docs/images/image-20210330161050813.png",fs="/docs/images/image-20210330164000447.png",_s="/docs/images/image-20210331100234007.png",xs="/docs/images/image-20210331091443372.png",Fs="/docs/images/image-20220606075858080.png",js="/docs/images/image-20210331153504656.png",Ss="/docs/images/image-20210331160410760.png",Xs="/docs/images/image-20210331164644697.png",Ms="/docs/images/image-20230928164306371.png",Gs="/docs/images/image-20210331114434625.png",zs="/docs/images/image-20210331114645139.png",qs="/docs/images/image-20220830175025468.png",Js="/docs/images/image-20220830180020170.png",Ts="/docs/images/image-20220830175226283.png",Ps="/docs/images/image-20220830175317648.png",Os="/docs/images/image-20220830180208969.png",ws="/docs/images/image-20220830180550626.png",Ks="/docs/images/image-20220830181511968.png",Rs="/docs/images/image-20220830181222212.png",Ls="/docs/images/image-20220830182151723.png",Vs="/docs/images/image-20220830183048287.png",Is="/docs/images/image-20220830182708026.png",Ns="/docs/images/image-20220830182854330.png",Hs="/docs/images/image-20220830183016790.png",Us="/docs/images/image-20220605092936434.png",Ws="/docs/images/image-20220605093119151.png",Zs="/docs/images/image-20200429102816516.png",Ys="/docs/images/image-20220915201654499.png",$s="/docs/images/image-20220915201753250.png",Qs="/docs/images/image-20220915201850728.png",si="/docs/images/image-20200429235159875.png",ii="/docs/images/image-20200429235422031.png",ai="/docs/images/image-20200430001554975.png",ni="/docs/images/image-20200430001725601.png",li="/docs/images/image-20210406165830911.png",hi="/docs/images/image-20210406170434507.png",ei="/docs/images/image-20220915204744944.png",pi="/docs/images/image-20210406173628609.png",ti="/docs/images/image-20210406174157937.png",ki="/docs/images/image-20210407085100468.png",di="/docs/images/image-20220915205359020.png",ri="/docs/images/image-20210407084211962.png",gi="/docs/images/image-20220915205958150.png",ci="/docs/images/image-20210402154906657.png",oi="/docs/images/image-20210402160801656.png",yi="/docs/images/image-20220915210947125.png",mi="/docs/images/image-20230928164203175.png",Ai="/docs/images/image-20230928164148445.png",Di="/docs/images/image-20210407153159222.png",ui="/docs/images/image-20200506191455510.png",vi="/docs/images/image-20210407180815914.png",Bi="/docs/images/image-20210402114507424.png",bi="/docs/images/image-20220915212651198.png",Ci="/docs/images/image-20220915212341529.png",Ei="/docs/images/image-20220915212353523.png",fi="/docs/images/image-20220915212359521.png",_i="/docs/images/image-20220915212403718.png",xi="/docs/images/image-20220605090010628.png",Fi="/docs/images/image-20220605085953282.png",ji="/docs/images/image-20220605085929352.png",Si="/docs/images/image-20220605085843642.png",Xi="/docs/images/image-20220605085816651.png",Mi="/docs/images/image-20210408162538333.png",Gi="/docs/images/image-20210408163439858.png",zi="/docs/images/image-20210408163653183.png",qi="/docs/images/image-20210408163949306.png",Ji="/docs/images/image-20210408164152924.png",Ti="/docs/images/image-20210408172308650.png",Pi="/docs/images/image-20210408172408015.png",Oi="/docs/images/image-20210408172501063.png",wi="/docs/images/image-20210408172628499.png",Ki="/docs/images/image-20210408173001294.png",Ri="/docs/images/image-20210408173408882.png",Li="/docs/images/image-20210408173756291.png",Vi="/docs/images/image-20210408173912968.png",Ii="/docs/images/image-20210408180257479.png",Ni="/docs/images/image-20210408180340673.png",Hi="/docs/images/image-20210408180429177.png",Ui="/docs/images/image-20210408180505228.png",Wi="/docs/images/image-20210408180546815.png",Zi="/docs/images/image-20210408180621878.png",Yi="/docs/images/image-20210408180647712.png",$i="/docs/images/image-20210408180717968.png",Qi="/docs/images/image-20210408180822553.png",sa="/docs/images/image-20210408181044095.png",ia="/docs/images/image-20210408181203637.png",aa="/docs/images/image-20210408182302407.png",na="/docs/images/image-20210408182416738.png",la="/docs/images/image-20210408185109798.png",ha="/docs/images/image-20210408185136455.png",ea="/docs/images/image-20220606080320531.png",pa="/docs/images/image-20220606080750238.png",ta="/docs/images/image-20220606080928760.png",ka="/docs/images/image-20220606081229638.png",da="/docs/images/image-20220606081256030.png",ra="/docs/images/image-20220606081431416.png",ga="/docs/images/image-20220606081544716.png",ca="/docs/images/image-20220606081555781.png",oa="/docs/images/image-20220606081613952.png",ya="/docs/images/image-20220606081625438.png",ma="/docs/images/image-20220606081630749.png",Aa="/docs/images/image-20220606081638015.png",Da="/docs/images/image-20220606081654137.png",ua="/docs/images/image-20220606082300923.png",va="/docs/images/image-20220606082334018.png",Ba="/docs/images/image-20220606082346125.png",ba="/docs/images/image-20220606082620699.png",Ca="/docs/images/image-20220606082633311.png",Ea="/docs/images/image-20220830190141761.png",fa="/docs/images/image-20220830190632245.png",_a="/docs/images/image-20220606083423253.png",xa="/docs/images/image-20220830191111078.png",Fa="/docs/images/image-20220606083516498.png",ja="/docs/images/image-20220830191437756.png",Sa="/docs/images/image-20220830191504682.png",Xa="/docs/images/image-20220830192028935.png",Ma="/docs/images/image-20220606083624401.png",Ga="/docs/images/image-20220606083630876.png",za="/docs/images/image-20220606083638583.png",qa="/docs/images/image-20220606083649037.png",Ja="/docs/images/image-20220915195851918.png",Ta="/docs/images/image-20220915195903417.png",Pa="/docs/images/image-20220915195919563.png",Oa="/docs/images/image-20220915195953453.png",wa="/docs/images/image-20220915200019581.png",Ka="/docs/images/image-20220915200032331.png",Ra="/docs/images/image-20220915200052275.png",La="/docs/images/image-20220606083726599.png",Va="/docs/images/image-20220606084526922.png",Ia="/docs/images/image-20220606084502784.png",Na="/docs/images/image-20220606083837307.png",Ha="/docs/images/image-20220606083856748.png",Ua="/docs/images/image-20220915200227524.png",Wa="/docs/images/image-20220915200243057.png",Za="/docs/images/image-20220915200254116.png",Ya="/docs/images/image-20220606084817434.png",$a="/docs/images/image-20220606083946248.png",Qa="/docs/images/image-20220606083952669.png",sn="/docs/images/image-20220606084000260.png",an="/docs/images/image-20220606084037591.png",nn="/docs/images/image-20220606084732456.png",ln="/docs/images/image-20220606084714400.png",hn="/docs/images/image-20220606163743486.png",en="/docs/images/image-20220606165142149.png",pn="/docs/images/image-20220606165212147.png",tn="/docs/images/image-20230928164211501.png",kn="/docs/images/image-20220830192823115.png",dn="/docs/images/image-20220606170033631.png",rn="/docs/images/image-20220606170053073.png",gn="/docs/images/image-20220606170126633.png",cn="/docs/images/image-20220606170259604.png",on="/docs/images/image-20220606170318998.png",yn="/docs/images/image-20220606170342853.png",mn="/docs/images/image-20220606170405414.png",An="/docs/images/image-20220606170506060.png",Dn="/docs/images/image-20220606170644174.png",un="/docs/images/image-20220606170655137.png",vn="/docs/images/image-20220606170705947.png",Bn="/docs/images/image-20220606170738109.png",bn="/docs/images/image-20220606170751054.png",Cn="/docs/images/image-20220606170801125.png",En="/docs/images/image-20220606170822629.png",fn="/docs/images/image-20220606170838535.png",_n="/docs/images/image-20220915193819177.png",xn="/docs/images/image-20220606170913027.png",Fn="/docs/images/image-20220606171003239.png",jn="/docs/images/image-20220606171016873.png",Sn="/docs/images/image-20220606171030117.png",Xn="/docs/images/image-20220606171038705.png",Mn="/docs/images/image-20220606171049525.png",Gn="/docs/images/image-20220606171109911.png",zn="/docs/images/image-20220606171123052.png",qn="/docs/images/image-20220915214032806.png",Jn="/docs/images/image-20220915214236019.png",Tn="/docs/images/image-20220915214252993.png",Pn="/docs/images/image-20220915214302866.png",On="/docs/images/image-20220915214333870.png",wn="/docs/images/image-20220915214346775.png",Kn="/docs/images/image-20220915214405866.png",Rn="/docs/images/image-20220915214453339.png",Ln="/docs/images/image-20220915214833821.png",Vn="/docs/images/image-20220915214941286.png",In="/docs/images/image-20220915215118778.png",Nn="/docs/images/image-20220915215234078.png",Hn="/docs/images/image-20220915215315023.png",Un="/docs/images/image-20220915215326081.png",Wn="/docs/images/image-20220915215338170.png",Zn="/docs/images/image-20220915215342581.png",Yn="/docs/images/image-20220915215346952.png",$n="/docs/images/image-20220915215358344.png",Qn="/docs/images/image-20220915215402078.png",sl="/docs/images/image-20220915215406268.png",il="/docs/images/image-20220915215415667.png",al="/docs/images/image-20220915215424924.png",nl="/docs/images/image-20220915215439536.png",ll="/docs/images/image-20220915215448563.png",hl="/docs/images/image-20220915215454259.png",el="/docs/images/image-20220915215503575.png",pl="/docs/images/image-20220915215509298.png",tl="/docs/images/image-20220915215519057.png",kl="/docs/images/image-20220915215524845.png",dl="/docs/images/image-20220915215538130.png",rl="/docs/images/image-20220915215549376.png",gl="/docs/images/image-20220915215617009.png",cl="/docs/images/image-20220915215621819.png",ol="/docs/images/image-20220915220840055.png",yl="/docs/images/image-20220915215703916.png",ml="/docs/images/image-20220915215735978.png",Al="/docs/images/image-20220915215808314.png",Dl="/docs/images/image-20220915215843384.png",ul="/docs/images/image-20220915215932563.png",vl="/docs/images/image-20220915221641646.png",Bl="/docs/images/image-20220915221712247.png",bl="/docs/images/image-20220915221724999.png",Cl="/docs/images/image-20220915221735595.png",El="/docs/images/image-20220915221752545.png",fl="/docs/images/image-20220915221833571.png",_l="/docs/images/image-20220915221842901.png",xl="/docs/images/image-20220915221847115.png",Fl="/docs/images/image-20220915221928684.png",jl="/docs/images/image-20220915221932888.png",Sl="/docs/images/image-20220915223204417.png",Xl="/docs/images/image-20220915223337036.png",Ml="/docs/images/image-20220915223340666.png",Gl="/docs/images/image-20220915223510008.png",zl="/docs/images/image-20220915223725266.png",ql="/docs/images/image-20220915223833230.png",Jl="/docs/images/image-20220915223853427.png",Tl="/docs/images/image-20220915223857345.png",Pl="/docs/images/image-20220915223904353.png",Ol="/docs/images/image-20220915224152947.png",wl="/docs/images/image-20220915224157923.png",Kl="/docs/images/image-20220915224201382.png",Rl="/docs/images/image-20220915224243764.png",Ll="/docs/images/image-20220915224255030.png",Vl="/docs/images/image-20220915224426867.png",Il="/docs/images/image-20220915224441718.png",Nl="/docs/images/image-20220915224513988.png",Hl="/docs/images/image-20220915224528841.png",Ul="/docs/images/image-20220915224556272.png",Wl="/docs/images/image-20220915224637051.png",Zl="/docs/images/image-20220915224744560.png",Yl="/docs/images/image-20220915224812494.png",$l="/docs/images/image-20220915224856682.png",Ql="/docs/images/image-20220915224959101.png",sh={};function ih(ah,s){return l(),a("div",null,s[0]||(s[0]=[n(`<p>å½“ç„¶ï¼Œå¯èƒ½é‡å¯å¤§æ³•è§£å†³ä¸€åˆ‡ğŸ˜† ï¼Œä½†æ˜¯éš¾ä¿ä¸ä¼šå†å‡ºç°è¿™ç§é—®é¢˜ã€‚<s>çŸ¥å…¶é”™è¯¯ä¹Ÿè¦çŸ¥å…¶whyé”™è¯¯</s>ã€‚</p><p>CPUçš„è´Ÿè½½ä¸ºä»€ä¹ˆçªç„¶å‡é«˜ï¼Ÿ</p><p>ç”Ÿäº§ç¯å¢ƒåº”ç”¨ä¸ºä»€ä¹ˆçªç„¶å¡ä½ï¼Ÿ</p><p>æ—¥å¿—ä¸ºä»€ä¹ˆæ²¡æœ‰è¾“å‡ºï¼Ÿ</p><p>ç¨‹åºå¯¹ç”¨æˆ·çš„è¯·æ±‚ä¸ºä»€ä¹ˆæ²¡æœ‰å“åº”ï¼Ÿ</p><p>è®©æˆ‘ä»¬èµ°è¿›JVMçš„å†…å¿ƒä¸–ç•Œã€‚</p><h1 id="å­¦ä¹ ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#å­¦ä¹ ç›®æ ‡"><span>å­¦ä¹ ç›®æ ‡</span></a></h1><ul><li>èƒ½å¤Ÿè¯´å‡ºjavaä½“ç³»ã€çŸ¥é“ä»€ä¹ˆæ˜¯javaè™šæ‹Ÿæœºã€è¿è¡ŒåŸç†</li><li>èƒ½å¤ŸçŸ¥é“å­—èŠ‚ç çš„ç»“æ„ï¼ŒåŒ…å«å“ªäº›ä¿¡æ¯ï¼Œæ€ä¹ˆåˆ†å¸ƒçš„</li><li>èƒ½å¤ŸæŒæ¡jvmè¿è¡Œæ—¶æ•°æ®åŒºéƒ½æ˜¯æ€ä¹ˆåˆ’åˆ†çš„ï¼Œå„ä¸ªéƒ¨åˆ†ä¼šæœ‰ä»€ä¹ˆå¼‚å¸¸</li><li>èƒ½å¤Ÿè¯´å‡ºç±»çš„åŠ è½½è¿‡ç¨‹ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½åšäº†ä»€ä¹ˆäº‹æƒ…</li><li>èƒ½å¤Ÿè¯´æ˜ç±»çš„åˆ›å»ºè¿‡ç¨‹</li><li>èƒ½å¤Ÿè¯´å‡ºåƒåœ¾å›æ”¶ç­–ç•¥ã€æœºåˆ¶å’ŒåŸç† ã€åƒåœ¾å›æ”¶ä¸‰ç§ç®—æ³•çš„ä¼˜åŠ£</li><li>èƒ½å¤Ÿè¯´å‡ºG1åƒåœ¾å›æ”¶ygcå’Œfullgcä»¥åŠä¸JDK8åƒåœ¾å›æ”¶å™¨åŒºåˆ«å’Œå…±åŒç‚¹</li></ul><h1 id="_1ã€è™šæ‹Ÿæœºæ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_1ã€è™šæ‹Ÿæœºæ¦‚è¿°"><span>1ã€è™šæ‹Ÿæœºæ¦‚è¿°</span></a></h1><h2 id="_1-1-å‘å±•å†ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-1-å‘å±•å†ç¨‹"><span>1.1 å‘å±•å†ç¨‹</span></a></h2><h3 id="_1-1-1-javaå¾€äº‹" tabindex="-1"><a class="header-anchor" href="#_1-1-1-javaå¾€äº‹"><span>1.1.1 javaå¾€äº‹</span></a></h3><p>â€‹ Javaè¯ç”Ÿåœ¨ä¸€ç¾¤æ‡’æƒ°ã€æ€¥èºè€Œå‚²æ…¢çš„ç¨‹åºå¤©æ‰ä¹‹ä¸­ã€‚</p><p>â€‹ 1990å¹´12æœˆï¼ŒSunçš„å·¥ç¨‹å¸ˆPatrick Naughtonè¢«å½“æ—¶ç³Ÿç³•çš„Sun C++å·¥å…·æŠ˜ç£¨çš„å¿«ç–¯äº†ã€‚ä»–å¤§å£°æŠ±æ€¨ï¼Œå¹¶å¨èƒè¦ç¦»å¼€Sunè½¬æŠ•å½“æ—¶åœ¨Steve Jobsé¢†å¯¼ä¹‹ä¸‹çš„NeXTå…¬å¸ã€‚é¢†å¯¼å±‚ä¸ºäº†ç•™ä½ä»–ï¼Œç»™ä»–ä¸€ä¸ªæœºä¼šï¼Œå¯åŠ¨äº†ä¸€ä¸ªå«åšStealthï¼ˆç§˜å¯†è¡ŒåŠ¨ï¼‰çš„é¡¹ç›®ã€‚</p><p>â€‹ éšç€James Goslingç­‰äººçš„åŠ å…¥ï¼Œè¿™ä¸ªé¡¹ç›®æ›´åä¸ºGreenã€‚å…¶ç›®æ ‡æ˜¯ä½¿ç”¨C++ä¸ºåµŒå…¥å¼è®¾å¤‡å¼€å‘ä¸€ç§æ–°çš„åŸºç¡€å¹³å°æŠ€æœ¯ï¼ŒJames Goslingæœ¬äººè´Ÿè´£å¼€å‘ä¸€ä¸ªç¼–è¾‘å™¨ã€‚æ­£å¦‚äººä»¬äº‹ååˆ†æçš„é‚£æ ·ï¼Œè¿™ä½å¤©æ‰çš„ç¨‹åºå‘˜å¤ªæ‡’æƒ°ï¼Œæ‰€ä»¥æ²¡æœ‰æŠŠC++å­¦å¥½ï¼Œå¼€å‘ä¸­ç¢°äº†ä¸€å¤´åŒ…ã€‚äºæ˜¯ä»–å†³å®šå¼€å‘ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ã€‚ä»–æŠŠè¿™ç§è¯­è¨€å‘½åä¸ºC++++--ï¼Œæ„æ€æ˜¯C++ â€œåŠ ä¸Šä¸€äº›å¥½ä¸œè¥¿ï¼Œå‡å»ä¸€äº›åä¸œè¥¿â€ã€‚æ˜¾ç„¶è¿™ä¸ªç³Ÿç³•çš„åå­—ä¸å¯èƒ½é•¿ä¹…ï¼Œäºæ˜¯å¾ˆå¿«è¿™ç§é¢‡å—åŒä¼´å–œçˆ±çš„å°è¯­è¨€è¢«å‘½åä¸ºOakã€‚</p><p>â€‹ åˆ°äº†1992å¹´9æœˆï¼ŒOakè¯­è¨€è¿åŒGreen OSå’Œä¸€äº›åº”ç”¨ç¨‹åºä¸€èµ·å‘å¸ƒåœ¨ç§°åšStart 7çš„å°è®¾å¤‡ä¸Šï¼Œæœ‰äº†ç¬¬ä¸€æ¬¡ç²¾å½©çš„äº®ç›¸ã€‚éšåï¼ŒSunå¼€äº†ä¸€å®¶åä¸ºFirstPersonçš„å…¬å¸ï¼Œæ•´ä¸ªå›¢é˜Ÿè¢«è½¬ç§»åˆ°è¿™å®¶å…¬å¸é‡Œç ”å‘æœºé¡¶ç›’ï¼Œä»¥æŠ•æ ‡æ—¶ä»£åçº³å…¬å¸çš„ä¸€ä¸ªé¡¹ç›®ã€‚è¿™å¸®å¤©æ‰è¢«æŠ€æœ¯ç‹‚çƒ­æ‰€é¼“èˆï¼Œå¼€å‘å‡ºäº†ä¸€ä¸ªé«˜äº¤äº’æ€§çš„è®¾å¤‡ï¼Œç»“æœæ²¡æƒ³åˆ°æ—¶ä»£åçº³å…¬å¸å’Œæœ‰çº¿ç”µè§†æœåŠ¡å•†å¹¶ä¸æ„¿æ„ç”¨æˆ·æ‹¥æœ‰é‚£ä¹ˆå¤§çš„æ§åˆ¶æƒï¼Œä»è€Œåœ¨ç«æ ‡ä¹‹æˆ˜ä¸­è´¥ç»™äº†SGIã€‚</p><p>â€‹ Sunæ— å¥ˆåœ°å…³é—­äº†FirstPersonï¼Œå¬å›äº†æ•´ä¸ªå›¢é˜Ÿï¼Œjavaçš„å‡ºè·¯å´æ²¡æœ‰å› æ­¤è€Œæ–­é€ï¼Œéšç€äº’è”ç½‘å‘å±•çš„æ¶ŒåŠ¨ï¼Œjavaå¼€å§‹ç¦»å¼€åµŒå…¥å¼å°è®¾å¤‡ï¼Œå¾€äº’è”ç½‘å€¾æ–œã€‚åOakè¢«å‘½åä¸ºJavaï¼Œå›åˆ°äº†æ¿€æƒ…æ¾æ¹ƒçš„ITäº§ä¸šï¼ŒæŠ“ä½äº’è”ç½‘çš„å¤§æ½®ï¼Œä»æ­¤ä¸€å‘ä¸å¯æ”¶æ‹¾ã€‚</p><p>â€‹ å‰©ä¸‹çš„äº‹æƒ…ï¼Œå¤§å®¶éƒ½çŸ¥é“äº†â€¦â€¦</p><h3 id="_1-1-2-javaç‰ˆæœ¬è¿­ä»£" tabindex="-1"><a class="header-anchor" href="#_1-1-2-javaç‰ˆæœ¬è¿­ä»£"><span>1.1.2 javaç‰ˆæœ¬è¿­ä»£</span></a></h3><ul><li>1991 å¹´ï¼ŒJames Gosling åšå£«å‘å¸ƒäº§å“ Oakï¼ˆ æ©¡æ ‘ï¼‰ï¼Œè¿™æ˜¯ Java è¯­è¨€çš„å‰èº«ã€‚</li><li>1995 å¹´ï¼ŒOak è¯­è¨€æ”¹åä¸º Javaã€‚</li><li>1996 å¹´ï¼ŒJDKï¼ˆJavaå¼€å‘æ‰€ä½¿ç”¨çš„å·¥å…·åŒ…ï¼‰1.0 å‘å¸ƒï¼Œæä¾›äº†çº¯è§£é‡Šæ‰§è¡Œçš„ Java è™šæ‹Ÿæœºå®ç°,ä½¿ç”¨å¤–æŒ‚è¿›è¡ŒJITï¼šSun JDK 1.0 <strong>Classic VMã€‚</strong></li><li>1997 å¹´ï¼ŒJDK1.1 å‘å¸ƒï¼Œä»£è¡¨æŠ€æœ¯æœ‰ï¼šJDBCã€JavaBeansã€å†…éƒ¨ç±»ã€åå°„ã€‚AWTã€RMI</li><li>1998 å¹´ï¼ŒJDK1.2 å‘å¸ƒï¼ŒJava æŠ€æœ¯ä½“ç³»è¢«æ‹†åˆ†ä¸º J2SEã€J2EEã€J2ME ä¸‰å¤§ä½“ç³»ã€‚åŠ å…¥Swing Collections.<strong>Solaris Exact VM</strong>ã€‚JIT è§£é‡Šå™¨æ··åˆã€Accurate Memory Managementï¼šç²¾ç¡®å†…å­˜ç®¡ç†ï¼Œæ•°æ®ç±»å‹æ•æ„Ÿã€æå‡çš„GCæ€§èƒ½</li><li>2000 å¹´ï¼ŒJDK1.3 å‘å¸ƒï¼Œé»˜è®¤çš„ Java è™šæ‹Ÿæœºç”± Sun Classic VM æ”¹ä¸º <strong>HotSopt</strong>ã€‚åŠ å…¥JavaSound</li><li>2002 å¹´ï¼ŒJDK1.4 å‘å¸ƒï¼ŒJava çœŸæ­£èµ°å‘æˆç†Ÿï¼Œä»£è¡¨æŠ€æœ¯æœ‰ï¼šæ­£åˆ™è¡¨è¾¾å¼ã€NIOã€IPV6ã€æ—¥å¿—APIã€åŠ å¯†ç±»åº“ã€Assertç­‰ã€‚Classic VMé€€å‡ºå†å²èˆå°.</li><li>2004 å¹´ï¼ŒJDK5.0 å‘å¸ƒï¼Œå¯¹è¯­æ³•æ˜“ç”¨æ€§åšäº†å¾ˆå¤§æ”¹è¿›ï¼Œæ–°å¢äº†æ³›å‹ã€æšä¸¾ã€è£…ç®±ã€æšä¸¾ã€å¯å˜é•¿çš„å‚æ•°ã€Foreachå¾ªç¯ ç­‰ï¼Œä»£è¡¨æŠ€æœ¯æœ‰ï¼šå¹¶å‘åŒ…ç­‰ã€‚</li><li>2006 å¹´ï¼ŒJDK6.0 å‘å¸ƒï¼Œå°† J2EE/J2SE/J2ME çš„å‘½åæ–¹å¼æ”¹ä¸º Java SE 6ã€Java EE 6ã€Java ME 6ã€‚è„šæœ¬è¯­è¨€æ”¯æŒã€JDBC 4.0ã€Javaç¼–è¯‘å™¨ APIã€‚</li><li>2009 å¹´ï¼ŒSun å…¬å¸å› ä¸ºç»è¥ä¸å–„è¢« Oracle å…¬å¸æ”¶è´­ã€‚</li><li>2011 å¹´ï¼ŒJDK7 å‘å¸ƒã€‚å»¶è¯¯é¡¹ç›®æ¨å‡ºåˆ°JDK8 ã€G1 (GCæ”¶é›†å™¨)ã€åŠ¨æ€è¯­è¨€å¢å¼º ã€64ä½ç³»ç»Ÿä¸­çš„å‹ç¼©æŒ‡é’ˆ ã€NIO 2.0</li><li>2013 å¹´ï¼ŒJDK8ï¼ˆLTSï¼‰ å‘å¸ƒï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œlamdaè¡¨è¾¾å¼ï¼Œè¯­æ³•å¢å¼º Javaç±»å‹æ³¨è§£ã€‚</li><li>2017å¹´ï¼ŒJDK9ã€‚æ¨¡å—åŒ–ã€‚</li><li>2018å¹´ï¼ŒJDK 10ï¼Œ11ï¼ˆLTSï¼‰æ­£å¼å‘å¸ƒ</li><li>2019å¹´ï¼ŒJDK 12ï¼Œ13</li><li>2020å¹´ï¼ŒJDK 14ï¼Œ15</li><li>2021å¹´ï¼ŒJDK 16ï¼Œ17ï¼ˆLTSï¼‰</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>é™„ï¼šsunä¸å¾®è½¯çš„è½¶äº‹</span></span>
<span class="line"><span>javaè¯ç”Ÿçš„1995å¹´ï¼Œæ­£æ˜¯å¾®è½¯åœ¨è½¯ä»¶äº§ä¸šåœ°ä½è¾¾åˆ°å·…å³°çš„æ—¶ä»£ã€‚ä½†æ˜¯è¿™ä¸ªåˆå‡ºèŒ…åºçš„æ¯›å¤´å°å­ç¡¬æ˜¯å¼•èµ·äº†å¾®è½¯å¸å›½çš„å…³æ³¨ã€‚æ‰€ä»¥96å¹´å¾®è½¯å°±å‘sunç”³è¯·äº†javaè®¤è¯ã€‚</span></span>
<span class="line"><span>å¾®è½¯çš„åŠ æŒç¡®å®æ¨åŠ¨äº†äººä»¬å¯¹javaçš„ä¿¡å¿ƒå’Œå…´è¶£ã€‚</span></span>
<span class="line"><span>ä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œä»1997å¹´å‘å¸ƒVisual J++çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œå¾®è½¯å°±å¼€å§‹åœ¨Javaä¸­æºå…¥è‡ªå·±çš„ç§æœ‰æ‰©å±•ã€‚è¿™æ¯«æ— ç–‘é—®å¼•èµ·Sunçš„é«˜åº¦é‡è§†ã€‚</span></span>
<span class="line"><span>1997å¹´10æœˆï¼ŒSunå‘ç¾å›½åŠ å·åœ°æ–¹æ³•é™¢èµ·è¯‰å¾®è½¯å…¬å¸è¿åä¸¤å…¬å¸å°±å¾®è½¯ä½¿ç”¨JavaæŠ€æœ¯æ‰€ç­¾å®šçš„åˆåŒï¼ŒæŒ‡æ§å¾®è½¯å…¬å¸åœ¨è‡ªå·±çš„Javaäº§å“ä¸­åšäº†â€œä¸æ°å½“çš„ä¿®æ”¹â€ï¼Œè¿åäº†åˆåŒä¸­æ‰¿è¯ºå‘ç”¨æˆ·æä¾›Javaå…¼å®¹äº§å“çš„æ¡æ¬¾ã€‚</span></span>
<span class="line"><span>è¿™ä¸€å®˜å¸ä¸€ç›´æ‰“åˆ°äº†2001å¹´1æœˆåŒæ–¹è¾¾æˆå’Œè§£ã€‚</span></span>
<span class="line"><span>åˆ°äº†2001å¹´7æœˆï¼Œå¾®è½¯å…¬å¸ƒæ–°ç‰ˆçš„Windows XPå°†ä¸å†æ”¯æŒSunçš„JVMï¼Œå¹¶ä¸”æ¨å‡ºäº†.NETå¹³å°ä¸Javaåˆ†åº­æŠ—ç¤¼ã€‚</span></span>
<span class="line"><span>å½“ç„¶ç›®å‰.netç”¨çš„äººå°‘äº†ï¼Œè¿™æ˜¯åè¯ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+h+'" alt="image-20230928164130440"></p><h3 id="_1-1-3-ä¸¤ç§jdk" tabindex="-1"><a class="header-anchor" href="#_1-1-3-ä¸¤ç§jdk"><span>1.1.3 ä¸¤ç§jdk</span></a></h3><p>openjdk vs oraclejdkï¼š</p><ol><li>Oracle JDKå°†æ›´å¤šåœ°å…³æ³¨ç¨³å®šæ€§ï¼Œå®ƒé‡è§†æ›´å¤šçš„ä¼ä¸šçº§ç”¨æˆ·ï¼Œè€ŒOpenJDKç»å¸¸å‘å¸ƒä»¥æ”¯æŒå…¶ä»–ç‰¹æ€§ï¼Œä¸å¤ªç¨³å®šã€‚</li><li>Oracle JDKæ”¯æŒé•¿æœŸå‘å¸ƒçš„æ›´æ”¹ï¼ˆLTSï¼‰ï¼Œè€ŒOpen JDKä»…æ”¯æŒè®¡åˆ’å’Œå®Œæˆä¸‹ä¸€ä¸ªå‘è¡Œç‰ˆã€‚</li><li>Oracle JDKæ ¹æ®äºŒè¿›åˆ¶ä»£ç è®¸å¯åè®®è·å¾—è®¸å¯ï¼Œè€ŒOpenJDKæ ¹æ®GPL v2è®¸å¯è·å¾—è®¸å¯ã€‚</li><li>2019å¹´1æœˆä¹‹åå‘å¸ƒçš„Oracle Java SE 8çš„å…¬å¼€æ›´æ–°å°†æ— æ³•ç”¨äºå•†ä¸šï¼Œä½†æ˜¯ï¼ŒOpenJDKæ˜¯å®Œå…¨å¼€æºçš„ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨ã€‚</li><li>Oracle JDKçš„æ„å»ºè¿‡ç¨‹åŸºäºOpenJDKï¼Œå› æ­¤OpenJDKä¸Oracle JDKä¹‹é—´æ²¡æœ‰æŠ€æœ¯å·®å¼‚ã€‚</li><li>é¡¶çº§å…¬å¸æ­£åœ¨ä½¿ç”¨Oracle JDKï¼ŒOpen JDKä¸å¤ªå—æ¬¢è¿ã€‚</li><li>Oracle JDKå…·æœ‰è‰¯å¥½çš„GCé€‰é¡¹å’Œæ›´å¥½çš„æ¸²æŸ“å™¨ï¼Œè€ŒOpenJDKå…·æœ‰æ›´å°‘çš„GCé€‰é¡¹</li><li>åœ¨å“åº”æ€§å’ŒJVMæ€§èƒ½æ–¹é¢ï¼ŒOracle JDKæä¾›äº†æ›´å¥½çš„æ€§èƒ½ã€‚</li><li>Oracle JDKåœ¨è¿è¡ŒJDKæ—¶ä¸ä¼šäº§ç”Ÿä»»ä½•é—®é¢˜ï¼Œè€ŒOpenJDKæœ‰æ—¶ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ã€‚</li><li>Oracle JDKå°†ä»å…¶10.0.Xç‰ˆæœ¬å°†æ”¶è´¹ï¼Œç”¨æˆ·å¿…é¡»ä»˜è´¹æˆ–å¿…é¡»ä¾èµ–OpenJDKæ‰èƒ½ä½¿ç”¨å…¶å…è´¹ç‰ˆæœ¬ã€‚</li><li>Oracle JDKå®Œå…¨ç”±Oracleå…¬å¸å¼€å‘ï¼Œè€ŒOpen JDKé¡¹ç›®ç”±IBMï¼ŒAppleï¼ŒSAP AGï¼ŒRedhatç­‰é¡¶çº§å…¬å¸åŠ å…¥å’Œåˆä½œã€‚</li></ol><h3 id="_1-1-4-jvmå¤§äº‹è®°" tabindex="-1"><a class="header-anchor" href="#_1-1-4-jvmå¤§äº‹è®°"><span>1.1.4 jvmå¤§äº‹è®°</span></a></h3><p>ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„JVMä¸ºHotSpot</p><ul><li>HotSpot ä¸ºLongview Technologieså¼€å‘ è¢«SUNæ”¶è´­</li><li>2006å¹´ Javaå¼€æº å¹¶å»ºç«‹OpenJDK <ul><li>HotSpot æˆä¸ºSun JDKå’ŒOpenJDKä¸­æ‰€å¸¦çš„è™šæ‹Ÿæœº</li></ul></li><li>2008 å¹´ Oracleæ”¶è´­BEA <ul><li>å¾—åˆ°JRockit VM</li></ul></li><li>2010å¹´Oracle æ”¶è´­ Sun <ul><li>å¾—åˆ°Hotspot</li></ul></li><li>Oracleå®£å¸ƒåœ¨JDK8æ—¶æ•´åˆJRockitå’ŒHotspotï¼Œä¼˜åŠ¿äº’è¡¥ <ul><li>åœ¨HotspotåŸºç¡€ä¸Šï¼Œç§»æ¤JRockitä¼˜ç§€ç‰¹æ€§</li></ul></li></ul><h2 id="_1-2-jvmä½“ç³»" tabindex="-1"><a class="header-anchor" href="#_1-2-jvmä½“ç³»"><span>1.2 JVMä½“ç³»</span></a></h2><p><img src="'+e+'" alt="image-20230928164138957"></p><ul><li>JDKï¼ˆJava Development Kitï¼‰æ˜¯ Javaè¯­è¨€çš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œä¹Ÿæ˜¯æ•´ä¸ªjavaå¼€å‘çš„æ ¸å¿ƒï¼Œå®ƒåŒ…å«äº†JREå’Œå¼€å‘å·¥å…·åŒ…</li><li>JREï¼ˆJava Runtime Environmentï¼‰ï¼ŒJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…å«äº†JVMå’ŒJavaçš„æ ¸å¿ƒç±»åº“ï¼ˆJava APIï¼‰</li><li>JVMï¼ˆJava Virtual Machineï¼‰ï¼ŒJavaè™šæ‹Ÿæœºï¼Œå®ƒæ˜¯è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„ï¼Œå®ƒä¸ç¡¬ä»¶æ²¡æœ‰ç›´æ¥çš„äº¤äº’.<strong>JVMä½¿ç”¨è½¯ä»¶æ¨¡æ‹ŸJava å­—èŠ‚ç çš„æŒ‡ä»¤é›†</strong></li></ul><blockquote><p><strong>VMWareæˆ–è€…Visual Boxéƒ½æ˜¯ä½¿ç”¨è½¯ä»¶æ¨¡æ‹Ÿç‰©ç†CPUçš„æŒ‡ä»¤é›†</strong></p></blockquote><p>æ‰€è°“â€œä¸€æ¬¡ç¼–ç ï¼Œéšå¤„è¿è¡Œâ€œæ­£æ˜¯åŸºäºä¸åŒç³»ç»Ÿä¸‹çš„jvmå¸®ä½ æ©ç›–äº†ç³»ç»Ÿä¹‹é—´æ¥å£çš„å·®å¼‚ï¼š</p><p><img src="'+p+`" alt="image-20210322103040674"></p><blockquote><p>æ€»ç»“</p><p>jdkæ˜¯å¼€å‘äººå‘˜çš„å·¥å…·åŒ…ï¼Œå®ƒåŒ…å«äº†javaçš„è¿è¡Œç¯å¢ƒå’Œè™šæ‹Ÿæœºï¼Œè€Œä¸€æ¬¡ç¼–å†™åˆ°å¤„è¿è¡Œå°±æ˜¯åŸºäºjvm</p></blockquote><h2 id="_1-3-å„ç§jvmè™šæ‹Ÿæœº" tabindex="-1"><a class="header-anchor" href="#_1-3-å„ç§jvmè™šæ‹Ÿæœº"><span>1.3 å„ç§JVMè™šæ‹Ÿæœº</span></a></h2><h3 id="_1-3-1-æ¸…å•" tabindex="-1"><a class="header-anchor" href="#_1-3-1-æ¸…å•"><span>1.3.1 æ¸…å•</span></a></h3><p><strong>1ã€KVM</strong></p><p>SUNå‘å¸ƒ</p><p>IOS Androidå‰ï¼Œå¹¿æ³›ç”¨äºæ‰‹æœºç³»ç»Ÿ</p><p><strong>2ã€CDC/CLDC HotSpot</strong></p><p>æ‰‹æœºã€ç”µå­ä¹¦ã€PDAç­‰è®¾å¤‡ä¸Šå»ºç«‹ç»Ÿä¸€çš„Javaç¼–ç¨‹æ¥å£</p><p>J2MEçš„é‡è¦ç»„æˆéƒ¨åˆ†</p><p><strong>3ã€Apache Harmony</strong></p><p>å…¼å®¹äºJDK 1.5å’ŒJDK 1.6çš„Javaç¨‹åºè¿è¡Œå¹³å°</p><p>ä¸Oracleå…³ç³»æ¶åŠ£ é€€å‡ºJCP ï¼ŒJavaç¤¾åŒºçš„åˆ†è£‚</p><p>OpenJDKå‡ºç°åï¼Œå—åˆ°æŒ‘æˆ˜ 2011å¹´ é€€å½¹</p><p>æ²¡æœ‰å¤§è§„æ¨¡å•†ç”¨ç»å†</p><p>å¯¹Androidçš„å‘å±•æœ‰ç§¯æä½œç”¨</p><p><strong>4ã€Sun Classic VM</strong></p><p>ä¸–ç•Œä¸Šç¬¬ä¸€æ¬¾å•†ç”¨ Java è™šæ‹Ÿæœºã€‚</p><p>1996å¹´éšç€Java1.0çš„å‘å¸ƒè€Œå‘å¸ƒï¼ŒJDK1.4æ—¶å®Œå…¨è¢«æ·˜æ±°</p><p><strong>5ã€BEA JRockit</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>ä¸“æ³¨äºæœåŠ¡ç«¯åº”ç”¨ï¼Œå·ç§°æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„JVM</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>â€‹ åæ¥è¢« Oracleæ”¶è´­ï¼›Oracle JRockit ï¼ˆåŸæ¥çš„ Bea JRockitï¼‰</p><p><strong>6ã€IBMå…¬å¸çš„ J9VM</strong></p><p>å…¨ç§°ï¼šIBM Technology for Java Virtual Machineï¼Œç®€ç§°IT4Jï¼Œå†…éƒ¨ä»£å·ï¼šJ9</p><p>æ˜¯ IBM è‡ªå·±å¼€å‘çš„ä¸€æ¬¾ JVM</p><p>å¸‚åœºå®šä½äºHotSpotæ¥è¿‘ï¼ŒæœåŠ¡å™¨ç«¯ã€æ¡Œé¢åº”ç”¨ã€åµŒå…¥å¼ç­‰å¤šç”¨é€”VM</p><p><strong>7ã€HotSpot VMï¼ˆç°åœ¨æœ€å¸¸ç”¨ï¼‰</strong></p><p>â€‹ å®ƒæ˜¯Sun JDKå’ŒOpenJDKä¸­æ‰€å¸¦çš„è™šæ‹Ÿæœºï¼Œä¹Ÿæ˜¯ç›®å‰ä½¿ç”¨èŒƒå›´æœ€å¹¿çš„Javaè™šæ‹Ÿæœºã€‚</p><p><strong>8ã€å…¶ä»–</strong></p><p>ï¼ˆTaobaoJVM ã€Graal VMã€Azul VMã€Liquid VMã€ï¼‰è™šæ‹Ÿæœº</p><h3 id="_1-3-2-æŸ¥çœ‹" tabindex="-1"><a class="header-anchor" href="#_1-3-2-æŸ¥çœ‹"><span>1.3.2 æŸ¥çœ‹</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>shawn@macpro:~ &gt; java -version</span></span>
<span class="line"><span>java version &quot;1.8.0_181&quot;</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment (build 1.8.0_181-b13)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>hotspotè™šæ‹Ÿæœº</li><li>Client VMæ˜¯ä¸“é—¨ä¸ºå¿«é€Ÿå¯åŠ¨å’Œå°å†…å­˜(small footprints)è€Œä¼˜åŒ–çš„ï¼ŒåƒGUIå°±å¾ˆé€‚åˆ</li><li>Server VMæ˜¯ä¸“é—¨ä¸ºé«˜æ€§èƒ½åº”ç”¨è€Œä¼˜åŒ–çš„ï¼Œå¦‚æœåŠ¡å™¨åº”ç”¨</li><li>ç‰ˆæœ¬æ˜¯åŸºäºtagä¸º1.8.0_181</li></ul><h2 id="_1-4-è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_1-4-è§„èŒƒ"><span>1.4 è§„èŒƒ</span></a></h2><h3 id="javaè¯­è¨€è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#javaè¯­è¨€è§„èŒƒ"><span>Javaè¯­è¨€è§„èŒƒ</span></a></h3><blockquote><p>Javaè¯­è¨€è§„èŒƒå®šä¹‰äº†ä»€ä¹ˆæ˜¯Javaè¯­è¨€</p></blockquote><h4 id="è¯­æ³•å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#è¯­æ³•å®šä¹‰"><span>è¯­æ³•å®šä¹‰</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">IfThenStatement</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">	if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Expression </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Statement </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ArgumentList</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Argument </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    ArgumentList </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Argumen</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+t+'" alt="image-20220604163905645"></p><h4 id="è¯æ³•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#è¯æ³•ç»“æ„"><span>è¯æ³•ç»“æ„</span></a></h4><ul><li><code>\\u</code> + 4ä¸ª16è¿›åˆ¶æ•°å­— è¡¨ç¤º<code>UTF-16</code></li><li>è¡Œç»ˆç»“ç¬¦ï¼š<code>CR</code>, <code>or LF</code>, <code>or CR LF</code>.</li><li>ç©ºç™½ç¬¦ <ul><li>ç©ºæ ¼ <code>tab</code> <code>\\t</code> <code>æ¢é¡µ</code> <code>\\f</code> è¡Œç»ˆç»“ç¬¦</li></ul></li><li>æ³¨é‡Š</li><li>æ ‡ç¤ºç¬¦</li><li>å…³é”®å­—</li></ul><p><img src="'+k+'" alt="image-20220604164221952"></p><ul><li>Int <ul><li><code>0 2 0372 0xDada_Cafe 1996 0x00_FF__00_FF </code></li></ul></li><li>Long <ul><li><code>0l 0777L 0x100000000L 2_147_483_648L 0xC0B0L </code></li></ul></li><li>Float <ul><li><code>1e1f 2.f .3f 0f 3.14f 6.022137e+23f</code></li></ul></li><li>Double <ul><li><code>1e1 2. .3 0.0 3.14 1e-9d 1e137 </code></li></ul></li><li>æ“ä½œ <ul><li><code>+= -= *= /= &amp;= |= ^= %= &lt;&lt;= &gt;&gt;= &gt;&gt;&gt;=</code></li></ul></li></ul><h4 id="å˜é‡-å’Œ-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#å˜é‡-å’Œ-ç±»å‹"><span>å˜é‡ å’Œ ç±»å‹</span></a></h4><ul><li><p>å…ƒç±»å‹</p><ul><li>byte short int long float char</li></ul></li><li><p>å˜é‡åˆå§‹å€¼</p><ul><li><p>boolean false</p></li><li><p>char \\u0000</p></li></ul></li><li><p>æ³›å‹</p></li></ul><p><img src="'+d+'" alt="image-20220604164549468"></p><h4 id="å…¶ä»–è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–è§„èŒƒ"><span>å…¶ä»–è§„èŒƒ</span></a></h4><ul><li>Javaå†…å­˜æ¨¡å‹</li><li>ç±»åŠ è½½é“¾æ¥çš„è¿‡ç¨‹</li><li>public static final abstractçš„å®šä¹‰</li><li>å¼‚å¸¸</li><li>æ•°ç»„çš„ä½¿ç”¨</li><li>...</li></ul><h3 id="jvmè§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#jvmè§„èŒƒ"><span>JVMè§„èŒƒ</span></a></h3><blockquote><p>JVMä¸»è¦å®šä¹‰äºŒè¿›åˆ¶classæ–‡ä»¶å’ŒJVMæŒ‡ä»¤é›†ç­‰,javaè¯­è¨€å’Œjvmç›¸å¯¹ç‹¬ç«‹,åªè¦å®ç°äº†JVMè§„èŒƒçš„éƒ½å¯ä»¥ç”¨JVMæ‰§è¡Œ,æ¯”å¦‚Groovyã€Clojure ã€Scala</p></blockquote><ul><li><p>Classæ–‡ä»¶ç±»å‹</p></li><li><p>æ•°å­—çš„å†…éƒ¨è¡¨ç¤ºå’Œå­˜å‚¨</p><ul><li><code>Byte -128 to 127 (-27 to 27 - 1) </code></li></ul></li><li><p>returnAddress æ•°æ®ç±»å‹å®šä¹‰</p><ul><li>æŒ‡å‘æ“ä½œç çš„æŒ‡é’ˆã€‚ä¸å¯¹åº”Javaæ•°æ®ç±»å‹ï¼Œä¸èƒ½åœ¨è¿è¡Œæ—¶ä¿®æ”¹ã€‚Finallyå®ç°éœ€è¦</li></ul></li><li><p>å®šä¹‰PC</p></li><li><p>å †</p></li><li><p>æ ˆ</p></li><li><p>æ–¹æ³•åŒº</p></li><li><p>æ•´æ•°çš„è¡¨è¾¾ï¼šåŸåè¡¥ç </p></li><li><p>Floatçš„è¡¨ç¤ºä¸å®šä¹‰</p></li></ul><p><img src="'+r+`" alt="image-20220604165145141"></p><ul><li>ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>&lt;clinit&gt; </span></span>
<span class="line"><span>&lt;init&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>VMæŒ‡ä»¤é›†</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€“ ç±»å‹è½¬åŒ– </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l2i </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€“ å‡ºæ ˆå…¥æ ˆæ“ä½œ </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">aload astore </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€“ è¿ç®—</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">iadd isub </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€“ æµç¨‹æ§åˆ¶ </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ifeq ifne </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€“ å‡½æ•°è°ƒç”¨ </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">invokevirtual invokeinterface invokespecial invokestatic</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>JVMéœ€è¦å¯¹Java Library æä¾›ä»¥ä¸‹æ”¯æŒï¼š</strong></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>- åå°„ java.lang.reflect </span></span>
<span class="line"><span>- ClassLoader </span></span>
<span class="line"><span>- åˆå§‹åŒ–classå’Œinterface </span></span>
<span class="line"><span>- å®‰å…¨ç›¸å…³ java.security </span></span>
<span class="line"><span>- å¤šçº¿ç¨‹ </span></span>
<span class="line"><span>- å¼±å¼•ç”¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>JVMçš„ç¼–è¯‘</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>- æºç åˆ°JVMæŒ‡ä»¤çš„å¯¹åº”æ ¼å¼ </span></span>
<span class="line"><span>â€“ Javap </span></span>
<span class="line"><span>â€“ JVMåæ±‡ç¼–çš„æ ¼å¼ </span></span>
<span class="line"><span>	&lt;index&gt; &lt;opcode&gt; [ &lt;operand1&gt; [ &lt;operand2&gt;... ]] [&lt;comment&gt;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+g+'" alt="image-20220604165525384"></p><h2 id="_1-5-jvmæ•´ä½“æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_1-5-jvmæ•´ä½“æ¶æ„"><span>1.5 jvmæ•´ä½“æ¶æ„</span></a></h2><h3 id="_1-5-1-javaè¿è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-5-1-javaè¿è¡Œè¿‡ç¨‹"><span>1.5.1 javaè¿è¡Œè¿‡ç¨‹</span></a></h3><p><img src="'+c+'" alt="image-20210322133820431"></p><p>1.æºç ç¼–è¯‘ï¼šé€šè¿‡Javaæºç ç¼–è¯‘å™¨å°†Javaä»£ç ç¼–è¯‘æˆJVMå­—èŠ‚ç ï¼ˆ.classæ–‡ä»¶ï¼‰</p><p>2.ç±»åŠ è½½ï¼šé€šè¿‡ClassLoaderåŠå…¶å­ç±»æ¥å®ŒæˆJVMçš„ç±»åŠ è½½</p><p>3.ç±»æ‰§è¡Œï¼šå­—èŠ‚ç è¢«è£…å…¥å†…å­˜ï¼Œè¿›å…¥JVMè™šæ‹Ÿæœºï¼Œè¢«è§£é‡Šå™¨è§£é‡Šæ‰§è¡Œ</p><h3 id="_1-5-2-jvmæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_1-5-2-jvmæ¨¡å‹"><span>1.5.2 jvmæ¨¡å‹</span></a></h3><p><img src="'+o+'" alt="image-20210322135008844"></p><p>ç”±ä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡ºï¼ŒJVMè™šæ‹Ÿæœºä¸­ä¸»è¦æ˜¯ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼Œåˆ†åˆ«æ˜¯ç±»åŠ è½½å­ç³»ç»Ÿã€è¿è¡Œæ—¶æ•°æ®åŒºã€æ‰§è¡Œå¼•æ“ã€‚</p><blockquote><p><strong>ç±»åŠ è½½å­ç³»ç»Ÿ</strong></p></blockquote><p>Javaè™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä»Classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ã€‚</p><blockquote><p><strong>è¿è¡Œæ—¶æ•°æ®åŒº</strong></p></blockquote><p>Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡ŒJavaç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚</p><p>è¿™äº›åŒºåŸŸæœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯çš„æ—¶é—´ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨è€Œä¸€ç›´å­˜åœ¨ï¼Œæœ‰äº›åŒºåŸŸåˆ™æ˜¯ä¾èµ–ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œå»ºç«‹å’Œé”€æ¯ã€‚</p><blockquote><p><strong>æ‰§è¡Œå¼•æ“</strong></p></blockquote><p>æ‰§è¡Œå¼•æ“ç”¨äºæ‰§è¡ŒJVMå­—èŠ‚ç æŒ‡ä»¤ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯è§£é‡Šæ‰§è¡Œå’Œç¼–è¯‘æ‰§è¡Œï¼ŒåŒºåˆ«åœ¨äºï¼Œè§£é‡Šæ‰§è¡Œæ˜¯åœ¨æ‰§è¡Œæ—¶ç¿»è¯‘æˆè™šæ‹ŸæœºæŒ‡ä»¤æ‰§è¡Œï¼Œè€Œç¼–è¯‘æ‰§è¡Œæ˜¯åœ¨æ‰§è¡Œä¹‹å‰å…ˆè¿›è¡Œç¼–è¯‘å†æ‰§è¡Œã€‚</p><p>è§£é‡Šæ‰§è¡Œå¯åŠ¨å¿«ï¼Œæ‰§è¡Œæ•ˆç‡ä½ã€‚ç¼–è¯‘æ‰§è¡Œï¼Œå¯åŠ¨æ…¢ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚</p><p>åƒåœ¾å›æ”¶å™¨å°±æ˜¯è‡ªåŠ¨ç®¡ç†è¿è¡Œæ•°æ®åŒºçš„å†…å­˜ï¼Œå°†æ— ç”¨çš„å†…å­˜å ç”¨è¿›è¡Œæ¸…é™¤ï¼Œé‡Šæ”¾å†…å­˜èµ„æºã€‚</p><blockquote><p><strong>æœ¬åœ°æ–¹æ³•åº“ã€æœ¬åœ°åº“æ¥å£</strong></p></blockquote><p>åœ¨jdkçš„åº•å±‚ä¸­ï¼Œæœ‰ä¸€äº›å®ç°æ˜¯éœ€è¦è°ƒç”¨æœ¬åœ°æ–¹æ³•å®Œæˆçš„ï¼ˆä½¿ç”¨cæˆ–c++å†™çš„æ–¹æ³•ï¼‰ï¼Œå°±æ˜¯é€šè¿‡æœ¬åœ°åº“æ¥å£è°ƒç”¨å®Œæˆçš„ã€‚æ¯”å¦‚ï¼šSystem.currentTimeMillis()æ–¹æ³•ã€‚</p><blockquote><p>PCå¯„å­˜å™¨</p></blockquote><p>æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ä¸€ä¸ªPCå¯„å­˜å™¨ï¼Œåœ¨çº¿ç¨‹åˆ›å»ºæ—¶åˆ›å»ºï¼ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œæ‰§è¡Œæœ¬åœ°æ–¹æ³•æ—¶ï¼ŒPCçš„å€¼ä¸ºundefined</p><blockquote><p>æ–¹æ³•åŒº</p></blockquote><p>ä¿å­˜è£…è½½çš„ç±»ä¿¡æ¯</p><ul><li>ç±»å‹çš„å¸¸é‡æ± </li><li>å­—æ®µï¼Œæ–¹æ³•ä¿¡æ¯</li><li>æ–¹æ³•å­—èŠ‚ç </li></ul><p>é€šå¸¸å’Œæ°¸ä¹…åŒº(Perm)å…³è”åœ¨ä¸€èµ·</p><ul><li>JDK6æ—¶ï¼ŒStringç­‰å¸¸é‡ä¿¡æ¯ç½®äºæ–¹æ³•</li><li>JDK7æ—¶ï¼Œå·²ç»ç§»åŠ¨åˆ°äº†å †</li></ul><blockquote><p>Javaå †</p></blockquote><ul><li>å’Œç¨‹åºå¼€å‘å¯†åˆ‡ç›¸å…³</li><li>åº”ç”¨ç³»ç»Ÿå¯¹è±¡éƒ½ä¿å­˜åœ¨Javaå †ä¸­</li><li>æ‰€æœ‰çº¿ç¨‹å…±äº«Javaå †</li><li>å¯¹åˆ†ä»£GCæ¥è¯´ï¼Œå †ä¹Ÿæ˜¯åˆ†ä»£çš„</li><li>GCçš„ä¸»è¦å·¥ä½œåŒºé—´</li></ul><p><img src="'+y+'" alt="image-20220605081910952"></p><blockquote><p>Javaæ ˆ</p></blockquote><ul><li><p>çº¿ç¨‹ç§æœ‰</p></li><li><p>æ ˆç”±ä¸€ç³»åˆ—å¸§ç»„æˆï¼ˆå› æ­¤Javaæ ˆä¹Ÿå«åšå¸§æ ˆï¼‰</p></li><li><p>å¸§ä¿å­˜ä¸€ä¸ªæ–¹æ³•çš„å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€å¸¸é‡æ± æŒ‡é’ˆ</p></li><li><p>æ¯ä¸€æ¬¡æ–¹æ³•è°ƒç”¨åˆ›å»ºä¸€ä¸ªå¸§ï¼Œå¹¶å‹æ ˆ</p></li></ul><p><strong>å±€éƒ¨å˜é‡è¡¨,åŒ…å«å‚æ•°å’Œå±€éƒ¨å˜é‡</strong></p><p><img src="'+m+'" alt="image-20220605082130838"></p><p><strong>å‡½æ•°è°ƒç”¨ç»„æˆå¸§æ ˆ</strong></p><p><img src="'+A+'" alt="image-20220605082248826"></p><p>è¿™æ˜¯ä¸€ä¸ªå¸§,çœç•¥ï¼šæ“ä½œæ•°æ ˆ,è¿”å›åœ°å€ç­‰</p><p><strong>æ“ä½œæ•°æ ˆ</strong>ï¼šJavaæ²¡æœ‰å¯„å­˜å™¨ï¼Œæ‰€æœ‰å‚æ•°ä¼ é€’ä½¿ç”¨æ“ä½œæ•°æ ˆ</p><p><img src="'+D+'" alt="image-20220605082403503"></p><p><strong>æ ˆä¸Šåˆ†é…</strong></p><ul><li>C++ä»£ç ç¤ºä¾‹</li></ul><p><img src="'+u+'" alt="image-20220605082528328"></p><p>æ ˆä¸Šåˆ†é…ä¸ä¼šå‡ºç°å†…å­˜æ³„éœ²</p><p>è¿ç”¨åˆ°javaä¸­ï¼š</p><p><img src="'+v+'" alt="image-20220605082625624"></p><ul><li><p>å°å¯¹è±¡ï¼ˆä¸€èˆ¬å‡ åä¸ªbytesï¼‰ï¼Œåœ¨æ²¡æœ‰é€ƒé€¸çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åˆ†é…åœ¨æ ˆä¸Š</p></li><li><p>ç›´æ¥åˆ†é…åœ¨æ ˆä¸Šï¼Œå¯ä»¥è‡ªåŠ¨å›æ”¶ï¼Œå‡è½»GCå‹åŠ›</p></li><li><p>å¤§å¯¹è±¡æˆ–è€…é€ƒé€¸å¯¹è±¡æ— æ³•æ ˆä¸Šåˆ†é…</p></li></ul><h3 id="_1-5-3-jvmå¯åŠ¨æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-5-3-jvmå¯åŠ¨æµç¨‹"><span>1.5.3 jvmå¯åŠ¨æµç¨‹</span></a></h3><p><img src="'+B+'" alt="image-20220605081532806"></p><h3 id="_1-5-4-å †æ ˆæ–¹æ³•åŒºäº¤äº’" tabindex="-1"><a class="header-anchor" href="#_1-5-4-å †æ ˆæ–¹æ³•åŒºäº¤äº’"><span>1.5.4 å †æ ˆæ–¹æ³•åŒºäº¤äº’</span></a></h3><p><img src="'+b+'" alt="image-20220605083227428"></p><h2 id="jvmåŸºæœ¬ç»“æ„" tabindex="-1"><a class="header-anchor" href="#jvmåŸºæœ¬ç»“æ„"><span>JVMåŸºæœ¬ç»“æ„</span></a></h2><h3 id="å†…å­˜æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#å†…å­˜æ¨¡å‹"><span>å†…å­˜æ¨¡å‹</span></a></h3><ul><li>æ¯ä¸€ä¸ªçº¿ç¨‹æœ‰ä¸€ä¸ªå·¥ä½œå†…å­˜å’Œä¸»å­˜ç‹¬ç«‹</li><li>å·¥ä½œå†…å­˜å­˜æ”¾ä¸»å­˜ä¸­å˜é‡çš„å€¼çš„æ‹·è´</li></ul><p><img src="'+C+'" alt="image-20220605083513690"></p><p>å½“æ•°æ®ä»ä¸»å†…å­˜å¤åˆ¶åˆ°å·¥ä½œå­˜å‚¨æ—¶ï¼Œå¿…é¡»å‡ºç°ä¸¤ä¸ªåŠ¨ä½œï¼šç¬¬ä¸€ï¼Œç”±ä¸»å†…å­˜æ‰§è¡Œçš„è¯»ï¼ˆreadï¼‰æ“ä½œï¼›ç¬¬äºŒï¼Œç”±å·¥ä½œå†…å­˜æ‰§è¡Œçš„ç›¸åº”çš„loadæ“ä½œï¼›å½“æ•°æ®ä»å·¥ä½œå†…å­˜æ‹·è´åˆ°ä¸»å†…å­˜æ—¶ï¼Œä¹Ÿå‡ºç°ä¸¤ä¸ªæ“ä½œï¼šç¬¬ä¸€ä¸ªï¼Œç”±å·¥ä½œå†…å­˜æ‰§è¡Œçš„å­˜å‚¨ï¼ˆstoreï¼‰æ“ä½œï¼›ç¬¬äºŒï¼Œç”±ä¸»å†…å­˜æ‰§è¡Œçš„ç›¸åº”çš„å†™ï¼ˆwriteï¼‰æ“ä½œ</p><p>æ¯ä¸€ä¸ªæ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œå³æ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«ä¸­æ–­</p><p>å¯¹äºæ™®é€šå˜é‡ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸­æ›´æ–°çš„å€¼ï¼Œä¸èƒ½é©¬ä¸Šååº”åœ¨å…¶ä»–å˜é‡ä¸­ã€‚å¦‚æœéœ€è¦åœ¨å…¶ä»–çº¿ç¨‹ä¸­ç«‹å³å¯è§ï¼Œéœ€è¦ä½¿ç”¨ <strong>volatile</strong> å…³é”®å­—</p><p><img src="'+E+`" alt="image-20220605083715043"></p><h3 id="volatile" tabindex="-1"><a class="header-anchor" href="#volatile"><span>volatile</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> VolatileStopThread</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> extends</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    private</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> volatile</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> boolean</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> stop</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ²¡æœ‰volatile -server è¿è¡Œ æ— æ³•åœæ­¢</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> stopMe</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        stop</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">stop</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Stop thread</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[])</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> throws</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> InterruptedException</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        VolatileStopThread</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> t</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> VolatileStopThread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ä¸åŠ volatile,è¿™ä¸ªçº¿ç¨‹åªä¼šåœ¨è‡ªå·±æœ¬åœ°å­˜å‚¨åŒºåŸŸæŸ¥çœ‹å€¼ï¼Œä¸èƒ½åšåˆ°åŠæ—¶æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        t</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        t</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stopMe</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>volatile ä¸èƒ½ä»£æ›¿é”ä¸€èˆ¬è®¤ä¸ºvolatile æ¯”é”æ€§èƒ½å¥½ï¼ˆä¸ç»å¯¹ï¼‰</p><p>é€‰æ‹©ä½¿ç”¨volatileçš„æ¡ä»¶æ˜¯ï¼šè¯­ä¹‰æ˜¯å¦æ»¡è¶³åº”ç”¨</p><h3 id="å¯è§æ€§" tabindex="-1"><a class="header-anchor" href="#å¯è§æ€§"><span>å¯è§æ€§</span></a></h3><ul><li>ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹å³çŸ¥é“</li></ul><h3 id="ä¿è¯å¯è§æ€§çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä¿è¯å¯è§æ€§çš„æ–¹æ³•"><span>ä¿è¯å¯è§æ€§çš„æ–¹æ³•</span></a></h3><ul><li><p>volatile</p></li><li><p>synchronized ï¼ˆunlockä¹‹å‰ï¼Œå†™å˜é‡å€¼å›ä¸»å­˜ï¼‰</p></li><li><p>final(ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå…¶ä»–çº¿ç¨‹å°±å¯è§)</p></li></ul><h3 id="æœ‰åºæ€§" tabindex="-1"><a class="header-anchor" href="#æœ‰åºæ€§"><span>æœ‰åºæ€§</span></a></h3><ul><li><p>åœ¨æœ¬çº¿ç¨‹å†…ï¼Œæ“ä½œéƒ½æ˜¯æœ‰åºçš„</p></li><li><p>åœ¨çº¿ç¨‹å¤–è§‚å¯Ÿï¼Œæ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚ï¼ˆæŒ‡ä»¤é‡æ’ æˆ– ä¸»å†…å­˜åŒæ­¥å»¶æ—¶ï¼‰</p></li></ul><h3 id="æŒ‡ä»¤é‡æ’" tabindex="-1"><a class="header-anchor" href="#æŒ‡ä»¤é‡æ’"><span>æŒ‡ä»¤é‡æ’</span></a></h3><ul><li>çº¿ç¨‹å†…ä¸²è¡Œè¯­ä¹‰</li></ul><p><img src="`+f+`" alt="image-20220605084247101"></p><ul><li>ç ´åçº¿ç¨‹é—´çš„æœ‰åºæ€§</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> OrderExample</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    boolean</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> flag</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> writer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // çº¿ç¨‹Aé¦–å…ˆæ‰§è¡Œwriter()æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        a </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                   </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        flag </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">           </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> reader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // çº¿ç¨‹Bçº¿ç¨‹æ¥ç€æ‰§è¡Œreader()æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">            int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  a </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // çº¿ç¨‹Båœ¨int i=a+1 æ˜¯ä¸ä¸€å®šèƒ½çœ‹åˆ°aå·²ç»è¢«èµ‹å€¼ä¸º1.å› ä¸ºåœ¨writerä¸­ï¼Œä¸¤å¥è¯é¡ºåºå¯èƒ½æ‰“ä¹±</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            â€¦â€¦</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+_+'" alt="image-20220605084406430"></p><ul><li>ä¿è¯æœ‰åºæ€§çš„æ–¹æ³•</li></ul><p><img src="'+x+`" alt="image-20220605084450167"></p><ul><li>æŒ‡ä»¤é‡æ’åŸºæœ¬åŸåˆ™</li></ul><p>ç¨‹åºé¡ºåºåŸåˆ™ï¼šä¸€ä¸ªçº¿ç¨‹å†…ä¿è¯è¯­ä¹‰çš„ä¸²è¡Œæ€§</p><p>volatileè§„åˆ™ï¼švolatileå˜é‡çš„å†™ï¼Œå…ˆå‘ç”Ÿäºè¯»</p><p>é”è§„åˆ™ï¼šè§£é”(unlock)å¿…ç„¶å‘ç”Ÿåœ¨éšåçš„åŠ é”(lock)å‰</p><p>ä¼ é€’æ€§ï¼šAå…ˆäºBï¼ŒBå…ˆäºC é‚£ä¹ˆAå¿…ç„¶å…ˆäºC</p><p>çº¿ç¨‹çš„startæ–¹æ³•å…ˆäºå®ƒçš„æ¯ä¸€ä¸ªåŠ¨ä½œ</p><p>çº¿ç¨‹çš„æ‰€æœ‰æ“ä½œå…ˆäºçº¿ç¨‹çš„ç»ˆç»“ï¼ˆThread.join()ï¼‰</p><p>çº¿ç¨‹çš„ä¸­æ–­ï¼ˆinterrupt()ï¼‰å…ˆäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç </p><p>å¯¹è±¡çš„æ„é€ å‡½æ•°æ‰§è¡Œç»“æŸå…ˆäºfinalize()æ–¹æ³•</p><h3 id="è§£é‡Šè¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#è§£é‡Šè¿è¡Œ"><span>è§£é‡Šè¿è¡Œ</span></a></h3><ul><li><p>è§£é‡Šæ‰§è¡Œä»¥è§£é‡Šæ–¹å¼è¿è¡Œå­—èŠ‚ç </p></li><li><p>è§£é‡Šæ‰§è¡Œçš„æ„æ€æ˜¯ï¼šè¯»ä¸€å¥æ‰§è¡Œä¸€å¥</p></li></ul><h3 id="ç¼–è¯‘è¿è¡Œ-jit" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘è¿è¡Œ-jit"><span>ç¼–è¯‘è¿è¡Œï¼ˆJITï¼‰</span></a></h3><ul><li><p>å°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç </p></li><li><p>ç›´æ¥æ‰§è¡Œæœºå™¨ç </p></li><li><p>è¿è¡Œæ—¶ç¼–è¯‘</p></li><li><p>ç¼–è¯‘åæ€§èƒ½æœ‰æ•°é‡çº§çš„æå‡</p></li></ul><h1 id="_2ã€ç±»æ–‡ä»¶ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2ã€ç±»æ–‡ä»¶ç»“æ„"><span>2ã€ç±»æ–‡ä»¶ç»“æ„</span></a></h1><p>äº†è§£jvmåç»­çš„ä¸€åˆ‡åŠ¨ä½œï¼Œå…ˆä»å­—èŠ‚ç å¼€å§‹ã€‚å®ƒæ˜¯ä¸€åˆ‡å‘ç”Ÿçš„æºå¤´ã€‚</p><h2 id="_2-1-æµ‹è¯•æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-1-æµ‹è¯•æ¡ˆä¾‹"><span>2.1 æµ‹è¯•æ¡ˆä¾‹</span></a></h2><h3 id="_2-1-1-æºä»£ç " tabindex="-1"><a class="header-anchor" href="#_2-1-1-æºä»£ç "><span>2.1.1 æºä»£ç </span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/*</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">* åŸºæœ¬ç±»ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">* */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> ClassStruct</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    private</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">JVM</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    private</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> final</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 18</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-2-ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#_2-1-2-ç¼–è¯‘"><span>2.1.2 ç¼–è¯‘</span></a></h3><p>1ï¼‰mavenå®šä¹‰ç¼–è¯‘çš„ç‰ˆæœ¬</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugins</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">groupId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">org.apache.maven.plugins</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">groupId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">artifactId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">maven-compiler-plugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">artifactId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1.8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1.8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugins</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰ç¼–è¯‘</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mvn clean compile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-2-å­—èŠ‚ç ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-2-å­—èŠ‚ç ç»“æ„"><span>2.2 å­—èŠ‚ç ç»“æ„</span></a></h2><p><strong>å’Œè¯­è¨€æ— å…³</strong></p><p><img src="`+F+'" alt="image-20220606182947329"></p><h3 id="_2-2-1-äºŒè¿›åˆ¶æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#_2-2-1-äºŒè¿›åˆ¶æ¦‚è§ˆ"><span>2.2.1 äºŒè¿›åˆ¶æ¦‚è§ˆ</span></a></h3><p>1ï¼‰vscodeæ‰“å¼€</p><p><img src="'+j+'" alt="image-20210322174708164"></p><p>2ï¼‰classæ–‡ä»¶æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè½¬åŒ–åæ˜¯16è¿›åˆ¶å±•ç¤ºï¼Œå®é™…ä¸Šclassæ–‡ä»¶å°±æ˜¯ä¸€å¼ è¡¨ï¼Œå®ƒç”±ä»¥ä¸‹æ•°æ®é¡¹æ„æˆï¼Œè¿™äº›æ•°æ®é¡¹ä»å¤´åˆ°å°¾ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ’åˆ—ï¼š</p><table><thead><tr><th style="text-align:center;">ç±»å‹</th><th style="text-align:center;">åç§°</th><th style="text-align:center;">æ•°é‡</th><th style="text-align:center;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center;">u4</td><td style="text-align:center;">magic</td><td style="text-align:center;">1</td><td style="text-align:center;">é­”æ•°</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">minor_version</td><td style="text-align:center;">1</td><td style="text-align:center;">æ¬¡ç‰ˆæœ¬å·</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">major_version</td><td style="text-align:center;">1</td><td style="text-align:center;">ä¸»ç‰ˆæœ¬å·</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">constant_pool_count</td><td style="text-align:center;">1</td><td style="text-align:center;">å¸¸é‡è®¡æ•°</td></tr><tr><td style="text-align:center;">cp_info</td><td style="text-align:center;">constant_pool</td><td style="text-align:center;">constant_pool_count - 1</td><td style="text-align:center;">å…·ä½“å¸¸é‡</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">access_flags</td><td style="text-align:center;">1</td><td style="text-align:center;">è®¿é—®æ ‡å¿—</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">this_class</td><td style="text-align:center;">1</td><td style="text-align:center;">ç±»ç´¢å¼•</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">super_class</td><td style="text-align:center;">1</td><td style="text-align:center;">çˆ¶ç±»ç´¢å¼•</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">interfaces_count</td><td style="text-align:center;">1</td><td style="text-align:center;">æ¥å£ç´¢å¼•</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">interfaces</td><td style="text-align:center;">interfaces_count</td><td style="text-align:center;">å…·ä½“æ¥å£</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">fields_count</td><td style="text-align:center;">1</td><td style="text-align:center;">å­—æ®µä¸ªæ•°</td></tr><tr><td style="text-align:center;">field_info</td><td style="text-align:center;">fields</td><td style="text-align:center;">fields_count</td><td style="text-align:center;">å…·ä½“å­—æ®µ</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">methods_count</td><td style="text-align:center;">1</td><td style="text-align:center;">æ–¹æ³•ä¸ªæ•°</td></tr><tr><td style="text-align:center;">method_info</td><td style="text-align:center;">methods</td><td style="text-align:center;">methods_count</td><td style="text-align:center;">å…·ä½“æ–¹æ³•</td></tr><tr><td style="text-align:center;">u2</td><td style="text-align:center;">attributes_count</td><td style="text-align:center;">1</td><td style="text-align:center;">å±æ€§ä¸ªæ•°</td></tr><tr><td style="text-align:center;">attribute_info</td><td style="text-align:center;">attributes</td><td style="text-align:center;">attributes_count</td><td style="text-align:center;">å…·ä½“å±æ€§</td></tr></tbody></table><p>3ï¼‰å›¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="'+S+'" alt="image-20230928164236853"></p><p>a</p><h3 id="_2-2-2-é­”æ•°ä¸ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_2-2-2-é­”æ•°ä¸ç‰ˆæœ¬"><span>2.2.2 é­”æ•°ä¸ç‰ˆæœ¬</span></a></h3><p>1ï¼‰<strong>é­”æ•°ï¼š</strong></p><p>CAFEBABEï¼Œå’–å•¡å®å®ï¼Œå›ºå®šçš„ã€‚</p><p><img src="'+X+'" alt="image-20210322175549121"></p><p>2ï¼‰<strong>ç‰ˆæœ¬å·ï¼š</strong></p><p>34ï¼Œæ¢æˆ10è¿›åˆ¶å°±æ˜¯52</p><p><img src="'+M+'" alt="image-20210322175609021"></p><p>jdkçš„ç‰ˆæœ¬æ ‡è®°æ˜ å°„å…³ç³»ï¼š</p><p><img src="'+G+'" alt="image-20220606183542274"></p><p><img src="'+z+`" alt="image-20210322172801851"></p><p>è¯´æ˜ç¼–è¯‘ç”¨çš„æ˜¯jdk8ï¼Œæˆ‘ä»¬æ”¹æˆ1.6ï¼Œé‡æ–°æ‰§è¡Œ mvn clean compile ï¼Œå†æ¥æŸ¥çœ‹classæ–‡ä»¶è¯•è¯•ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugins</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">groupId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">org.apache.maven.plugins</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">groupId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">artifactId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">maven-compiler-plugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">artifactId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1.6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1.6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">plugins</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ‰©å±•</p></blockquote><p>åœ¨å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ç±»ä¼¼Unsupported major.minor version 51.0çš„é”™è¯¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯JDKç‰ˆæœ¬ä¸åŒ¹é…é€ æˆçš„ã€‚ è™½ç„¶jdkä»£ç åœ¨æ‰§è¡Œæ—¶åŸºæœ¬ä¸Šå‘ä¸‹å…¼å®¹ï¼Œä½†æ˜¯ï¼å¼€å‘ç¯å¢ƒå’ŒæœåŠ¡å™¨ç¯å¢ƒjdkæœ€å¥½ä¸€è‡´ï¼Œä¸è¦å°è¯•è¿™ä¸ªå‘ã€‚</p><p>åŒºåˆ†å’Œç†è§£ä¸¤ä¸ªç¯å¢ƒï¼šç¼–è¯‘ç¯å¢ƒï¼Œè¿è¡Œç¯å¢ƒ</p><h3 id="_2-2-3-å¸¸é‡æ± " tabindex="-1"><a class="header-anchor" href="#_2-2-3-å¸¸é‡æ± "><span>2.2.3 å¸¸é‡æ± </span></a></h3><p>å†å¾€ä¸‹éµä»ç›¸åŒçš„è§„å¾‹ï¼š è®¡æ•°å™¨ï¼ˆæ ‡æ³¨åé¢æœ‰å¤šå°‘ä¸ªï¼‰ + å¯¹åº”ä¸ªæ•°çš„ç»“æ„ä½“</p><p>æˆ‘ä»¬ä»¥å¸¸é‡æ± ä¸ºä¾‹ï¼š</p><p>1ï¼‰ä½ç½®</p><p><img src="`+q+'" alt="image-20210322175628817"></p><p>2ï¼‰ç»“æ„è¯´æ˜</p><p>å¸¸é‡æ± è®°å½•äº†jvmå†…çš„ä¸€å †å¸¸é‡ä¿¡æ¯ï¼Œè¿™éƒ¨åˆ†ç”± ã€2ä¸ªå­—èŠ‚è®¡æ•°ã€‘ + ã€nä¸ªcp_infoç»“æ„ã€‘ç»„æˆ</p><p><img src="'+J+'" alt="image-20210329105800328"></p><blockquote><p>å¸¸é‡æ± ä¸­ä¸»è¦å­˜æ”¾ä¸¤å¤§ç±»å¸¸é‡ï¼šå­—é¢é‡ï¼ˆLiteralï¼‰å’Œç¬¦å·å¼•ç”¨ï¼ˆSymbolic Referencesï¼‰ã€‚ å­—é¢é‡æ¯”è¾ƒæ¥è¿‘äº Java è¯­è¨€å±‚é¢çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜ä¸º final çš„å¸¸é‡å€¼ç­‰ã€‚ è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬äº†ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š ç±»å’Œæ¥å£çš„å…¨é™å®šåï¼ˆFully Qualified Nameï¼‰ã€å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ï¼ˆDescriptorï¼‰ã€æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</p></blockquote><p>å…¶ä¸­cp_infoæœ‰å¤šç§ç±»å‹ï¼š</p><ul><li>ç›´æ¥ç±»å‹ï¼Œå­˜çš„å°±æ˜¯å½“å‰å€¼ï¼Œè¿™ç§åƒIntegerï¼ŒLongç­‰é•¿åº¦éƒ½æ˜¯ç¡®å®šçš„</li><li>å¼•ç”¨ç±»å‹ï¼Œå­˜çš„æ˜¯æŒ‡å‘å…¶ä»–ä½ç½®çš„æŒ‡é’ˆ</li></ul><p><img src="'+T+'" alt="image-20210329105546453"></p><p><em>é™„ï¼šç»¿è‰²ä»£è¡¨æŒ‡é’ˆï¼Œæ©™è‰²ä»£è¡¨ç›´æ¥ç±»å‹</em></p><p>å…·ä½“è¯´æ˜ï¼š</p><p><img src="'+P+`" alt="image-20220606183820312"></p><p>CONSTANT_Utf8</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>tag 1</span></span>
<span class="line"><span>length u2</span></span>
<span class="line"><span>bytes[length]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+O+`" alt="image-20220606184302779"></p><p>CONSTANT_Integer</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>tag 3</span></span>
<span class="line"><span>byte u4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+w+'" alt="image-20220606184358909"></p><p>3ï¼‰æ¡ˆä¾‹</p><p>ä¸‹é¢ä»¥Stringä¸ºä¾‹ï¼ŒStringæ˜¯ä¸€ç§å¼•ç”¨ç±»ï¼Œå®ƒä¼šæŒ‡å‘ä¸€ä¸ªutf8ç±»å‹æ¥å­˜å‚¨çœŸå®çš„ä¿¡æ¯</p><p>jdkæä¾›äº†ä¸€ä¸ªå·¥å…·ï¼Œjavapï¼Œå¯ä»¥æŸ¥çœ‹å¸¸é‡åˆ—è¡¨çš„è¯¦ç»†å†…å®¹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>javap -v ClassStruct.class</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+K+'" alt="image-20210329104743038"></p><p><img src="'+R+'" alt="image-20220606184050633"></p><h3 id="_2-2-4-å…¶ä»–ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2-2-4-å…¶ä»–ä¿¡æ¯"><span>2.2.4 å…¶ä»–ä¿¡æ¯</span></a></h3><p>1ï¼‰è¯´æ˜</p><p>å¸¸é‡æ± ä¹‹åï¼Œæ˜¯ç´§æŒ¨çš„ä¸€ç³»åˆ—ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¤§åŒå°å¼‚ï¼Œæ— éå°±æ˜¯å€¼ã€æˆ–è€…å¼•ç”¨</p><p>ï¼ˆå‚è€ƒä¸Šé¢2.3.3é‡Œçš„è¡¨æ ¼å’Œå›¾ä¾‹ï¼‰</p><ul><li>è®¿é—®æ ‡è®°ï¼špublic abstract ç±»çš„æ ‡ç¤ºç¬¦ç­‰ä¿¡æ¯</li></ul><p><img src="'+L+'" alt="image-20220606184820692"></p><ul><li>ç±»ç´¢å¼•ï¼Œclassç±»å‹ï¼Œæœ€ç»ˆæŒ‡å‘ä¸€ä¸ªutf8ï¼Œæ ‡è®°å½“å‰ç±»çš„åå­—</li><li>çˆ¶ç±»ï¼ŒåŒä¸Š</li><li>æ¥å£ï¼Œ2å­—èŠ‚è®°å½•æ•°é‡ï¼Œåé¢è®°å½•å¤šä¸ªæ¥å£ç±»å‹</li><li>æ¥ä¸‹æ¥æ˜¯å­—æ®µã€æ–¹æ³•ã€å±æ€§ï¼Œéƒ½æ˜¯2å­—èŠ‚è®°å½•åé¢å¤šå°‘ä¸ªï¼Œåé¢ç´§è·Ÿå¯¹åº”çš„ç»“æ„ä½“ç±»å‹</li></ul><p>CONSTANT_NameAndType</p><p><img src="'+V+'" alt="image-20220606184610285"></p><p>CONSTANT_Class</p><p><img src="'+I+'" alt="image-20220606184637200"></p><p>CONSTANT_Fieldref ,CONSTANT_Methodref ,CONSTANT_InterfaceMethodref</p><p><img src="'+N+'" alt="image-20220606184659735"></p><p><img src="'+H+'" alt="image-20220606184716425"></p><p>2ï¼‰æ³¨æ„äº‹é¡¹</p><p>è¦çœ‹æ‡‚javapåçš„æ ¼å¼ï¼Œæ˜ç™½è¿™äº›æ ¼å¼ï¼Œå¯ä»¥è½»æ¾çœ‹æ‡‚classç»“æ„</p><p><img src="'+U+'" alt="image-20210329114350327"></p><table><thead><tr><th>ç±»å‹</th><th>æ ‡è¯†ç¬¦</th><th>æ¡ˆä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ•°ç»„</td><td>[</td><td>[Ljava.lang.String</td><td>Stringæ•°ç»„</td></tr><tr><td>å¯¹è±¡</td><td>L</td><td>Lcom.test.Demo</td><td></td></tr><tr><td>åŸºæœ¬ç±»å‹</td><td>å¤§å†™å­—æ¯å¼€å¤´</td><td>B=byteï¼ŒI=intâ€¦â€¦</td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><p>ç»„åˆç±»å‹</p><table><thead><tr><th>ç±»å‹</th><th>æ¡ˆä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç±»é‡Œçš„å±æ€§ã€å­—æ®µã€æ–¹æ³•ç­‰</td><td>com.test.Demo.name:Ljava.lang.String</td><td>è‹±æ–‡ç‚¹å·éš”å¼€</td></tr><tr><td>æ ‡è¯†ä»€ä¹ˆç±»å‹</td><td>com.test.Demo.getName:()Ljava.lang.String</td><td>è‹±æ–‡å†’å·éš”å¼€</td></tr><tr><td>æ–¹æ³•</td><td>(å‚æ•°ç±»å‹)è¿”å›å€¼ç±»å‹</td><td>è‹±æ–‡æ‹¬å¼§ï¼Œåé¢æ˜¯è¿”å›å€¼ç±»å‹</td></tr></tbody></table><p>3ï¼‰å®ä¾‹åˆ†æ</p><p><img src="'+W+`" alt="image-20210329114932971"></p><h3 id="userç±»ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#userç±»ä¾‹å­"><span><code>User</code>ç±»ä¾‹å­</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> User</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	private</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	private</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	private</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> getId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">		return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	}</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">		this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	}</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> String </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">		return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	}</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">		this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	}</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> getAge</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">		return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	}</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">	public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setAge</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">		this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Z+'" alt="image-20220606185129410"></p><p><img src="'+Y+'" alt="image-20220606185153807"></p><p><img src="'+$+'" alt="image-20220606185211781"></p><p><img src="'+Q+'" alt="image-20220606185227953"></p><h1 id="_3ã€è¿è¡Œæ•°æ®åŒº" tabindex="-1"><a class="header-anchor" href="#_3ã€è¿è¡Œæ•°æ®åŒº"><span>3ã€è¿è¡Œæ•°æ®åŒº</span></a></h1><p>å­—èŠ‚ç åªæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å­˜æ”¾åœ¨é‚£é‡Œã€‚è¦æƒ³åœ¨jvmé‡Œè·‘èµ·æ¥ï¼Œå…ˆå¾—æœ‰ä¸ªè¿è¡Œçš„å†…å­˜ç¯å¢ƒã€‚</p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„jvmè¿è¡Œæ—¶æ•°æ®åŒºã€‚</p><p>1ï¼‰è¿è¡Œæ—¶æ•°æ®åŒºçš„ä½ç½®</p><p>è¿è¡Œæ—¶æ•°æ®åŒºæ˜¯jvmä¸­æœ€ä¸ºé‡è¦çš„éƒ¨åˆ†ï¼Œæ‰§è¡Œå¼•æ“é¢‘ç¹æ“ä½œçš„å°±æ˜¯å®ƒã€‚ç±»çš„åˆå§‹åŒ–ï¼Œä»¥åŠåé¢æˆ‘ä»¬è®²çš„å¯¹è±¡ç©ºé—´çš„åˆ†é…ã€åƒåœ¾çš„å›æ”¶éƒ½æ˜¯åœ¨è¿™å—åŒºåŸŸå‘ç”Ÿçš„ã€‚</p><p><img src="'+ss+'" alt="image-20210325135403075"></p><p>2ï¼‰åŒºåŸŸåˆ’åˆ†</p><p>æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­çš„è§„å®šï¼Œåœ¨è¿è¡Œæ—¶æ•°æ®åŒºå°†å†…å­˜ç»†åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†</p><p>çº¿ç¨‹ç§æœ‰çš„ï¼šJavaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰ã€ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ã€æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</p><p>å¤§å®¶å…±äº«çš„ï¼šæ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ã€Javaå †åŒºï¼ˆJava Heapï¼‰</p><p><img src="'+is+'" alt="image-20210329093556986"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†å—è¯¦ç»†æ¥è§£è¯»ï¼Œæ¯ä¸€å—æ˜¯åšä»€ä¹ˆçš„ï¼Œå¦‚æœæº¢å‡ºäº†ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…</p><h2 id="_3-1-ç¨‹åºè®¡æ•°å™¨" tabindex="-1"><a class="header-anchor" href="#_3-1-ç¨‹åºè®¡æ•°å™¨"><span>3.1 ç¨‹åºè®¡æ•°å™¨</span></a></h2><h3 id="_3-1-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_3-1-1-æ¦‚è¿°"><span>3.1.1 æ¦‚è¿°</span></a></h3><p>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</p><ul><li><p>æ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªã€‚æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒè¡¨ç¤ºå½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚</p></li><li><p>å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶ï¼Œé€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œæ‰€ä»¥æ•´ä¸ªç¨‹åºæ— è®ºæ˜¯åˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p></li><li><p>ç”±äºçº¿ç¨‹æ˜¯å¤šæ¡å¹¶è¡Œæ‰§è¡Œçš„ï¼Œäº’ç›¸ä¹‹é—´æ‰§è¡Œåˆ°å“ªæ¡æŒ‡ä»¤æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸ºâ€œçº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚</p></li><li><p>å¦‚æœæ˜¯nativeæ–¹æ³•ï¼Œè¿™é‡Œä¸ºç©º</p></li></ul><h3 id="_3-1-2-æº¢å‡ºå¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_3-1-2-æº¢å‡ºå¼‚å¸¸"><span>3.1.2 æº¢å‡ºå¼‚å¸¸</span></a></h3><p>æ²¡æœ‰ï¼</p><p>åœ¨è™šæ‹Ÿæœºè§„èŒƒä¸­ï¼Œæ²¡æœ‰å¯¹è¿™å—åŒºåŸŸè®¾å®šå†…å­˜æº¢å‡ºè§„èŒƒï¼Œä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªä¸ä¼šæº¢å‡ºçš„åŒºåŸŸ</p><h3 id="_3-1-3-æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-1-3-æ¡ˆä¾‹"><span>3.1.3 æ¡ˆä¾‹</span></a></h3><p>å› ä¸ºå®ƒä¸ä¼šæº¢å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰åŠæ³•ç»™å®ƒé€ ä¸€ä¸ªï¼Œä½†æ˜¯ä»classç±»ä¸Šå¯ä»¥æ‰¾åˆ°ç—•è¿¹ã€‚</p><p>å›é¡¾ä¸Šé¢javapçš„åæ±‡ç¼–ï¼Œå…¶ä¸­codeæ‰€å¯¹åº”çš„ç¼–å·å°±å¯ä»¥ç†è§£ä¸ºè®¡æ•°å™¨ä¸­æ‰€è®°å½•çš„æ‰§è¡Œç¼–å·ã€‚</p><p><img src="'+as+'" alt="image-20210324101225120"></p><h2 id="_3-2-è™šæ‹Ÿæœºæ ˆ" tabindex="-1"><a class="header-anchor" href="#_3-2-è™šæ‹Ÿæœºæ ˆ"><span>3.2 è™šæ‹Ÿæœºæ ˆ</span></a></h2><p><img src="'+ns+`" alt="image-20210324103100187"></p><h3 id="_3-2-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_3-2-1-æ¦‚è¿°"><span>3.2.1 æ¦‚è¿°</span></a></h3><ul><li>ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚</li><li>å®ƒæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å½“å‰çº¿ç¨‹çš„å†…å­˜æ¨¡å‹ï¼Œæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</li></ul><h3 id="_3-2-2-æº¢å‡ºå¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_3-2-2-æº¢å‡ºå¼‚å¸¸"><span>3.2.2 æº¢å‡ºå¼‚å¸¸</span></a></h3><p>1ï¼‰æ ˆæ·±åº¦è¶…å‡ºè®¾å®š</p><p>å¦‚æœæ˜¯åˆ›å»ºçš„æ ˆçš„æ·±åº¦å¤§äºè™šæ‹Ÿæœºå…è®¸çš„æ·±åº¦ï¼ŒæŠ›å‡º</p><p>Exception in thread &quot;main&quot; java.lang.StackOverflowError</p><p>2ï¼‰å†…å­˜ç”³è¯·ä¸è¶³</p><p>å¦‚æœæ ˆå…è®¸å†…å­˜æ‰©å±•ï¼Œä½†æ˜¯å†…å­˜ç”³è¯·ä¸å¤Ÿçš„æ—¶å€™ï¼ŒæŠ›å‡º OutOfMemoryError</p><p>æ³¨æ„ï¼è¿™ä¸€ç‚¹å’Œå…·ä½“çš„è™šæ‹Ÿæœºæœ‰å…³ï¼Œhotspotè™šæ‹Ÿæœºå¹¶ä¸æ”¯æŒæ ˆç©ºé—´æ‰©å±•ï¼Œæ‰€ä»¥å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹åˆ›å»ºæ—¶ï¼Œåˆ†é…ç»™å®ƒå›ºå®šå¤§å°çš„ä¸€ä¸ªæ ˆï¼Œåœ¨è¿™ä¸ªå›ºå®šæ ˆç©ºé—´ä¸Šä¸ä¼šå‡ºç°å†å»æ‰©å®¹ç”³è¯·å†…å­˜çš„æƒ…å†µï¼Œä¹Ÿå°±ä¸ä¼šé‡åˆ°ç”³è¯·ä¸åˆ°ä¸€è¯´ï¼Œåªä¼šå› ä¸ºæ·±åº¦é—®é¢˜è¶…å‡ºå›ºå®šç©ºé—´é€ æˆä¸Šé¢çš„StackOverflowError</p><p>å¦‚æœæ¢æˆå¤šçº¿ç¨‹ï¼Œæ¯«æ— èŠ‚åˆ¶çš„åˆ›å»ºçº¿ç¨‹ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½é€ æˆOutOfMemoryErrorã€‚ä½†æ˜¯è¿™ä¸ªå’ŒXssæ ˆç©ºé—´å¤§å°æ— å…³ã€‚æ˜¯å› ä¸ºçº¿ç¨‹ä¸ªæ•°å¤ªå¤šï¼Œæ ˆçš„ä¸ªæ•°å¤ªå¤šï¼Œå¯¼è‡´ç³»ç»Ÿåˆ†é…ç»™jvmè¿›ç¨‹çš„ç‰©ç†å†…å­˜è¢«åƒå…‰ã€‚</p><p>è¿™æ—¶å€™è™šæ‹Ÿæœºä¼šé™„å¸¦ç›¸å…³çš„æç¤ºï¼š</p><p>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: unable to create native thread</p><p>ps: æ¯ä¸ªçº¿ç¨‹é»˜è®¤åˆ†é…1Mç©ºé—´ï¼ˆ64ä½linuxï¼Œhotspotç¯å¢ƒï¼‰</p><p>ç–‘é—®ï¼šæ˜¯ä¸æ˜¯æ”¹å°Xssçš„å€¼å°±å¯ä»¥å¾—åˆ°æ ˆç©ºé—´æº¢å‡ºå‘¢ï¼Ÿ</p><p>ç­”ï¼šæ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œhotspotä¸‹ä¸å¯ä»¥ï¼Œè¿˜æ˜¯ä¼šæŠ›å‡ºStackOverflowErrorï¼Œæ— éæ·±åº¦æ›´å°äº†ã€‚</p><h3 id="_3-2-3-æ¡ˆä¾‹ä¸€-è¿›å‡ºæ ˆé¡ºåº" tabindex="-1"><a class="header-anchor" href="#_3-2-3-æ¡ˆä¾‹ä¸€-è¿›å‡ºæ ˆé¡ºåº"><span>3.2.3 æ¡ˆä¾‹ä¸€ï¼šè¿›å‡ºæ ˆé¡ºåº</span></a></h3><p>1ï¼‰ä»£ç </p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * ç¨‹åºæ¨¡æ‹Ÿè¿›æ ˆã€å‡ºæ ˆè¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * å…ˆè¿›åå‡º</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> StackInAndOut</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * å®šä¹‰æ–¹æ³•ä¸€</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿›å…¥æ–¹æ³•A</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * å®šä¹‰æ–¹æ³•äºŒ;è°ƒç”¨æ–¹æ³•ä¸€</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿›å…¥æ–¹æ³•B</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿›å…¥Mainæ–¹æ³•</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰è¿è¡Œç»“æœï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">è¿›å…¥æ–¹æ³•A</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">è¿›å…¥æ–¹æ³•B</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">è¿›å…¥Mainæ–¹æ³•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰æ ˆç»“æ„ï¼š</p><p>mainæ–¹æ³•----&gt;Bæ–¹æ³•----&gt;Aæ–¹æ³•</p><p><img src="`+ls+`" alt="image-20210324104530470"></p><h3 id="_3-2-4-æ¡ˆä¾‹äºŒ-æ ˆæ·±åº¦æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3-2-4-æ¡ˆä¾‹äºŒ-æ ˆæ·±åº¦æº¢å‡º"><span>3.2.4 æ¡ˆä¾‹äºŒï¼šæ ˆæ·±åº¦æº¢å‡º</span></a></h3><p>1ï¼‰ä»£ç </p><p>è¿™ä¸ªå®¹æ˜“å®ç°ï¼Œæ–¹æ³•åµŒå¥—è‡ªå·±å°±å¯ä»¥ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * é€šè¿‡ä¸€ä¸ªç¨‹åºæ¨¡æ‹Ÿçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ ˆæ·±åº¦ï¼›</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * æŠ›å‡ºStackOverflowError</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * å®šä¹‰æ–¹æ³•ï¼Œå¾ªç¯åµŒå¥—è‡ªå·±</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿›å…¥æ–¹æ³•B</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿›å…¥Mainæ–¹æ³•</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰è¿è¡Œç»“æœï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception in thread </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverflowError</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">StackOverFlow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰æ ˆç»“æ„ï¼š</p><p><img src="`+hs+`" alt="image-20210324105125093"></p><h3 id="_3-2-5-æ¡ˆä¾‹ä¸‰-æ ˆå†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3-2-5-æ¡ˆä¾‹ä¸‰-æ ˆå†…å­˜æº¢å‡º"><span>3.2.5 æ¡ˆä¾‹ä¸‰ï¼šæ ˆå†…å­˜æº¢å‡º</span></a></h3><p>ä¸€ç›´ä¸åœçš„åˆ›å»ºçº¿ç¨‹å°±å¯ä»¥å †æ»¡æ ˆ</p><p>ä½†æ˜¯ï¼è¿™ä¸ªå¾ˆå±é™©ï¼Œåˆ°32ç³»ç»Ÿçš„winxpä¸Šå‹‡æ•¢çš„å°ä¼™ä¼´å¯ä»¥è¯•ä¸€è¯•ï¼Œæœºå™¨å¡æ­»ä¸è´Ÿè´£ï¼</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/*</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">* æ ˆå†…å­˜æº¢å‡ºï¼Œæ³¨æ„ï¼å¾ˆå±é™©ï¼Œè°¨æ…æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">* æ‰§è¡Œæ—¶å¯èƒ½ä¼šå¡æ­»ç³»ç»Ÿã€‚ç›´åˆ°å†…å­˜è€—å°½</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">* */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> StackOutOfMem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-3-æœ¬åœ°æ–¹æ³•æ ˆ" tabindex="-1"><a class="header-anchor" href="#_3-3-æœ¬åœ°æ–¹æ³•æ ˆ"><span>3.3 æœ¬åœ°æ–¹æ³•æ ˆ</span></a></h2><h3 id="_3-3-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_3-3-1-æ¦‚è¿°"><span>3.3.1 æ¦‚è¿°</span></a></h3><ul><li>æœ¬åœ°æ–¹æ³•æ ˆçš„åŠŸèƒ½å’Œç‰¹ç‚¹ç±»ä¼¼äºè™šæ‹Ÿæœºæ ˆï¼Œå‡å…·æœ‰çº¿ç¨‹éš”ç¦»çš„ç‰¹ç‚¹</li><li>ä¸åŒçš„æ˜¯ï¼Œæœ¬åœ°æ–¹æ³•æ ˆæœåŠ¡çš„å¯¹è±¡æ˜¯JVMæ‰§è¡Œçš„nativeæ–¹æ³•ï¼Œè€Œè™šæ‹Ÿæœºæ ˆæœåŠ¡çš„æ˜¯JVMæ‰§è¡Œçš„javaæ–¹æ³•</li><li>è™šæ‹Ÿæœºè§„èŒƒé‡Œå¯¹è¿™å—æ‰€ç”¨çš„è¯­è¨€ã€æ•°æ®ç»“æ„ã€æ²¡æœ‰å¼ºåˆ¶è§„å®šï¼Œè™šæ‹Ÿæœºå¯ä»¥è‡ªç”±å®ç°å®ƒ</li><li>ç”šè‡³ï¼ŒhotspotæŠŠå®ƒå’Œè™šæ‹Ÿæœºæ ˆåˆå¹¶æˆäº†1ä¸ª</li></ul><h3 id="_3-3-2-æº¢å‡ºå¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_3-3-2-æº¢å‡ºå¼‚å¸¸"><span>3.3.2 æº¢å‡ºå¼‚å¸¸</span></a></h3><p>å’Œè™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸¤ä¸ªï¼š</p><p>å¦‚æœæ˜¯åˆ›å»ºçš„æ ˆçš„æ·±åº¦å¤§äºè™šæ‹Ÿæœºå…è®¸çš„æ·±åº¦ï¼ŒæŠ›å‡º StackOverFlowError</p><p>å†…å­˜ç”³è¯·ä¸å¤Ÿçš„æ—¶å€™ï¼ŒæŠ›å‡º OutOfMemoryError</p><h2 id="_3-4-å †" tabindex="-1"><a class="header-anchor" href="#_3-4-å †"><span>3.4 å †</span></a></h2><h3 id="_3-4-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_3-4-1-æ¦‚è¿°"><span>3.4.1 æ¦‚è¿°</span></a></h3><p>ä¸ä¸Šé¢çš„3ä¸ªä¸åŒï¼Œå †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼æ‰€è°“çš„çº¿ç¨‹å®‰å…¨ä¸å®‰å…¨ä¹Ÿæ˜¯å‡ºè‡ªè¿™é‡Œã€‚</p><p>åœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼ŒJavaä¸–ç•Œé‡Œâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æ²¡æœ‰å¯¹å †è¿›è¡Œç»†è‡´çš„åˆ’åˆ†ï¼Œæ‰€ä»¥å¯¹äºå †çš„è®²è§£è¦åŸºäºå…·ä½“çš„è™šæ‹Ÿæœºï¼Œæˆ‘ä»¬ä»¥ä½¿ç”¨æœ€å¤šçš„HotSpotè™šæ‹Ÿæœºä¸ºä¾‹ã€‚</p><p>Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œå› æ­¤å®ƒä¹Ÿè¢«ç§°ä½œâ€œGCå †â€ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åšJVMè°ƒä¼˜çš„é‡ç‚¹åŒºåŸŸéƒ¨åˆ†ã€‚</p><h3 id="_3-4-2-jdk1-7" tabindex="-1"><a class="header-anchor" href="#_3-4-2-jdk1-7"><span>3.4.2 jdk1.7</span></a></h3><p>jvmçš„å†…å­˜æ¨¡å‹åœ¨1.7å’Œ1.8æœ‰è¾ƒå¤§çš„åŒºåˆ«ï¼Œè™½ç„¶1.7ç›®å‰ä½¿ç”¨çš„è¾ƒå°‘äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿæ˜¯éœ€è¦å¯¹1.7çš„å†…å­˜æ¨¡å‹æœ‰æ‰€äº†è§£ï¼Œæ‰€ä»¥æ¥ä¸‹é‡Œï¼Œæˆ‘ä»¬å°†å…ˆå­¦ä¹ 1.7å†å­¦ä¹ 1.8çš„å†…å­˜æ¨¡å‹ã€‚</p><p><img src="`+es+'" alt="image-20200421111048271"></p><ul><li><p>Young å¹´è½»åŒºï¼ˆä»£ï¼‰</p><p>YoungåŒºè¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒEdenåŒºå’Œä¸¤ä¸ªå¤§å°ä¸¥æ ¼ç›¸åŒçš„SurvivoråŒº</p><p>å…¶ä¸­ï¼ŒSurvivoråŒºé—´ä¸­ï¼ŒæŸä¸€æ—¶åˆ»åªæœ‰å…¶ä¸­ä¸€ä¸ªæ˜¯è¢«ä½¿ç”¨çš„ï¼Œå¦å¤–ä¸€ä¸ªç•™åšåƒåœ¾æ”¶é›†æ—¶å¤åˆ¶å¯¹è±¡ç”¨</p><p>åœ¨EdenåŒºé—´å˜æ»¡çš„æ—¶å€™ï¼Œ GCå°±ä¼šå°†å­˜æ´»çš„å¯¹è±¡ç§»åˆ°ç©ºé—²çš„SurvivoråŒºé—´ä¸­ï¼Œæ ¹æ®JVMçš„ç­–ç•¥ï¼Œåœ¨ç»è¿‡å‡ æ¬¡åƒåœ¾æ”¶é›†åï¼Œä»»ç„¶å­˜æ´»äºSurvivorçš„å¯¹è±¡å°†è¢«ç§»åŠ¨åˆ°ä¸‹é¢çš„TenuredåŒºé—´ã€‚</p></li></ul><blockquote><p>å¹¶ä¸æ˜¯æ‰€æœ‰newçš„å¯¹è±¡éƒ½ä¼šè¿›å…¥åˆ°å¹´è½»ä»£ï¼Œå¦‚æœæ˜¯å¤§å¯¹è±¡ä¼šç›´æ¥å»è€å¹´ä»£ã€‚</p></blockquote><ul><li><p>Tenured å¹´è€åŒº</p><p>TenuredåŒºä¸»è¦ä¿å­˜ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›è€çš„å¯¹è±¡ï¼Œå½“ä¸€äº›å¯¹è±¡åœ¨Youngå¤åˆ¶è½¬ç§»ä¸€å®šçš„æ¬¡æ•°ä»¥åï¼Œå¯¹è±¡å°±ä¼šè¢«è½¬ç§»åˆ°TenuredåŒºï¼Œä¸€èˆ¬å¦‚æœç³»ç»Ÿä¸­ç”¨äº†applicationçº§åˆ«çš„ç¼“å­˜ï¼Œç¼“å­˜ä¸­çš„å¯¹è±¡å¾€å¾€ä¼šè¢«è½¬ç§»åˆ°è¿™ä¸€åŒºé—´ã€‚</p></li><li><p>Perm æ°¸ä¹…åŒº</p><p>ç°åœ¨å·²ç»æˆä¸ºå†å²ï¼ŒPermä»£ä¸»è¦ä¿å­˜ç±»ä¿¡æ¯ï¼Œclass,method,filedç­‰å¯¹è±¡ï¼Œè¿™éƒ¨ä»½çš„ç©ºé—´ä¸€èˆ¬ä¸ä¼šæº¢å‡ºï¼Œé™¤éä¸€æ¬¡æ€§åŠ è½½äº†å¾ˆå¤šçš„ç±»ï¼Œä¸è¿‡åœ¨æ¶‰åŠåˆ°çƒ­éƒ¨ç½²çš„åº”ç”¨æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šé‡åˆ°java.lang.OutOfMemoryError : PermGen space çš„é”™è¯¯ï¼Œé€ æˆè¿™ä¸ªé”™è¯¯çš„å¾ˆå¤§åŸå› å°±æœ‰å¯èƒ½æ˜¯æ¯æ¬¡éƒ½é‡æ–°éƒ¨ç½²ï¼Œä½†æ˜¯é‡æ–°éƒ¨ç½²åï¼Œç±»çš„classæ²¡æœ‰è¢«å¸è½½æ‰ï¼Œè¿™æ ·å°±é€ æˆäº†å¤§é‡çš„classå¯¹è±¡ä¿å­˜åœ¨äº†permä¸­ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬é‡æ–°å¯åŠ¨åº”ç”¨æœåŠ¡å™¨å¯ä»¥è§£å†³é—®é¢˜ã€‚å¦å¤–ä¸€ç§å¯èƒ½æ˜¯åˆ›å»ºäº†å¤§æ‰¹é‡çš„jspæ–‡ä»¶ï¼Œé€ æˆç±»ä¿¡æ¯è¶…å‡ºpermçš„ä¸Šé™è€Œæº¢å‡ºã€‚è¿™ç§é‡å¯ä¹Ÿè§£å†³ä¸äº†ã€‚åªèƒ½è°ƒå¤§ç©ºé—´ã€‚</p></li></ul><h3 id="_3-4-3-jdk1-8" tabindex="-1"><a class="header-anchor" href="#_3-4-3-jdk1-8"><span>3.4.3 jdk1.8</span></a></h3><p><img src="'+ps+'" alt="image-20210325104219429"></p><p>ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œjdk1.8çš„å†…å­˜æ¨¡å‹æ˜¯ç”±2éƒ¨åˆ†ç»„æˆï¼Œå¹´è½»ä»£ + å¹´è€ä»£ã€‚æ°¸ä¹…ä»£è¢«å¹²æ‰ï¼Œæ¢æˆäº†Metaspaceï¼ˆå…ƒæ•°æ®ç©ºé—´ï¼‰</p><p>å¹´è½»ä»£ï¼šEden + 2*Survivor ï¼ˆä¸å˜ï¼‰</p><p>å¹´è€ä»£ï¼šOldGen ï¼ˆä¸å˜ï¼‰</p><p>å…ƒç©ºé—´ï¼šåŸæ¥çš„permåŒº ï¼ˆé‡ç‚¹ï¼ï¼‰</p><blockquote><p>éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼š<strong>Metaspaceæ‰€å ç”¨çš„å†…å­˜ç©ºé—´ä¸æ˜¯åœ¨è™šæ‹Ÿæœºå†…éƒ¨ï¼Œè€Œæ˜¯åœ¨æœ¬åœ°å†…å­˜ç©ºé—´ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ä¸1.7çš„æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«æ‰€åœ¨</strong>ã€‚</p></blockquote><p><img src="'+ts+'" alt="image-20200421114248164"></p><p><img src="'+ks+'" alt="image-20220830183650282"></p><p><a href="https://openjdk.org/jeps/122#Motivation" target="_blank" rel="noopener noreferrer">jdk1.8ç§»é™¤è€å¹´ä»£çš„åŠ¨æœº</a>: JRockit å’Œ Hotspot èåˆå·¥ä½œçš„ä¸€éƒ¨åˆ†ã€‚ JRockitå®¢æˆ·ä¸éœ€è¦é…ç½®æ°¸ä¹…ä»£ï¼ˆå› ä¸ºJRockitæ²¡æœ‰æ°¸ä¹…ä»£ï¼‰ï¼Œä¹ æƒ¯ä¸é…ç½®æ°¸ä¹…ä»£ã€‚</p><blockquote><p>å®é™…ä½¿ç”¨æ—¶ç”±äºæ°¸ä¹…ä»£å†…å­˜ç»å¸¸ä¸å¤Ÿç”¨/å‘ç”Ÿå†…å­˜æ³„æ¼ï¼ŒæŠ¥å‡ºå¼‚å¸¸OOM:PermGenã€‚æ‰€ä»¥å°†æ°¸ä¹…åŒºåºŸå¼ƒï¼Œæ”¹ç”¨å…ƒç©ºé—´ï¼Œæ”¹ä¸ºäº†ä½¿ç”¨æœ¬åœ°å†…å­˜ç©ºé—´ã€‚</p></blockquote><h3 id="_3-4-4-jstatæŸ¥çœ‹å †å†…å­˜ä½¿ç”¨æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#_3-4-4-jstatæŸ¥çœ‹å †å†…å­˜ä½¿ç”¨æƒ…å†µ"><span>3.4.4 jstatæŸ¥çœ‹å †å†…å­˜ä½¿ç”¨æƒ…å†µ</span></a></h3><p><code>jstat [-å‘½ä»¤é€‰é¡¹][VMid][é—´éš”æ—¶é—´/æ¯«ç§’][æŸ¥è¯¢æ¬¡æ•°]</code></p><ul><li>æŸ¥çœ‹classåŠ è½½ç»Ÿè®¡: <code>jstat -class 12112</code></li></ul><p><img src="'+ds+`" alt="image-20220830184731968"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>loaded ï¼šåŠ è½½classçš„æ•°é‡</span></span>
<span class="line"><span>bytes: å ç”¨ç©ºé—´çš„å¤§å°</span></span>
<span class="line"><span>unloadedï¼šè¿˜æ²¡åŠ è½½çš„æ•°é‡</span></span>
<span class="line"><span>bytesï¼š è¿˜æ²¡åŠ è½½çš„æ•°é‡çš„å¤§å°</span></span>
<span class="line"><span>time: åŠ è½½è€—æ—¶</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æŸ¥çœ‹ç¼–è¯‘ç»Ÿè®¡ï¼š <code>jstat -compiler 12112</code></li></ul><p><img src="`+rs+`" alt="image-20220830185043741"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>compiledï¼š ç¼–è¯‘æ•°é‡</span></span>
<span class="line"><span>failedï¼š å¤±è´¥æ•°é‡</span></span>
<span class="line"><span>invalidï¼š æ— æ•ˆæ•°é‡</span></span>
<span class="line"><span>timeï¼š æ—¶é—´</span></span>
<span class="line"><span>failedTypeï¼š å¤±è´¥ç±»å‹</span></span>
<span class="line"><span>failedMethod: å¤±è´¥çš„æ–¹æ³•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æŸ¥çœ‹åƒåœ¾å›æ”¶ç»Ÿè®¡ï¼š <code>jstat -gc 12112</code></li></ul><p><img src="`+gs+`" alt="image-20220830185209013"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>S0Cï¼šç¬¬ä¸€ä¸ªSurvivoråŒºçš„å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>S1Cï¼šç¬¬äºŒä¸ªSurvivoråŒºçš„å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>S0Uï¼šç¬¬ä¸€ä¸ªSurvivoråŒºçš„ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>S1Uï¼šç¬¬äºŒä¸ªSurvivoråŒºçš„ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>ECï¼šEdenåŒºçš„å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>EUï¼šEdenåŒºçš„ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>OCï¼šOldåŒºå¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>OUï¼šOldä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>MCï¼šæ–¹æ³•åŒºå¤§å°ï¼ˆKBï¼‰</span></span>
<span class="line"><span>MUï¼šæ–¹æ³•åŒºä½¿ç”¨å¤§å°ï¼ˆKBï¼‰ </span></span>
<span class="line"><span>CCSCï¼šå‹ç¼©ç±»ç©ºé—´å¤§å°ï¼ˆKBï¼‰ </span></span>
<span class="line"><span>CCSUï¼šå‹ç¼©ç±»ç©ºé—´ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰ </span></span>
<span class="line"><span>YGCï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span></span>
<span class="line"><span>YGCTï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</span></span>
<span class="line"><span>FGCï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span></span>
<span class="line"><span>FGCTï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</span></span>
<span class="line"><span>GCTï¼šåƒåœ¾å›æ”¶æ¶ˆè€—æ€»æ—¶é—´</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ¯1sæ‰“å°ä¸€æ¬¡ï¼Œä¸€å…±æ‰“å°åæ¬¡ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹ï¼š<code>jstat -gc 12112 1000 10</code></p></blockquote><h3 id="_3-4-5-æº¢å‡ºå¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_3-4-5-æº¢å‡ºå¼‚å¸¸"><span>3.4.5 æº¢å‡ºå¼‚å¸¸</span></a></h3><p>å†…å­˜ä¸è¶³æ—¶ï¼ŒæŠ›å‡º</p><p>java.lang.OutOfMemoryError: Java heap space</p><h3 id="_3-4-6-æ¡ˆä¾‹-å †æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3-4-6-æ¡ˆä¾‹-å †æº¢å‡º"><span>3.4.6 æ¡ˆä¾‹ï¼šå †æº¢å‡º</span></a></h3><p>1ï¼‰ä»£ç </p><p>åˆ†é…å¤§é‡å¯¹è±¡ï¼Œè¶…å‡ºjvmè§„å®šçš„å †èŒƒå›´å³å¯</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">util</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ArrayList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">util</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * å †æº¢å‡º</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> *   -Xms20m -Xmx20m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> HeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    Byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> bytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> Byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">];</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        List</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ArrayList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> HeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰å¯åŠ¨</p><p>æ³¨æ„å¯åŠ¨æ—¶ï¼ŒæŒ‡å®šä¸€ä¸‹å †çš„å¤§å°ï¼š</p><p><img src="`+cs+`" alt="image-20210325135056497"></p><p>2ï¼‰è¾“å‡º</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">5</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception in thread </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OutOfMemoryError</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Java heap space</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">init</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">13</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-æ–¹æ³•åŒº" tabindex="-1"><a class="header-anchor" href="#_3-5-æ–¹æ³•åŒº"><span>3.5 æ–¹æ³•åŒº</span></a></h2><h3 id="_3-5-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_3-5-1-æ¦‚è¿°"><span>3.5.1 æ¦‚è¿°</span></a></h3><p>åŒæ ·ï¼Œçº¿ç¨‹å…±äº«çš„ã€‚</p><p>å®ƒä¸»è¦ç”¨æ¥å­˜å‚¨ç±»çš„ä¿¡æ¯ã€ç±»é‡Œå®šä¹‰çš„å¸¸é‡ã€é™æ€å˜é‡ã€ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ã€‚</p><p>æ³¨æ„ï¼æ–¹æ³•åŒºåœ¨è™šæ‹Ÿæœºè§„èŒƒé‡Œè¿™æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œå®ƒå…·ä½“æ”¾åœ¨é‚£ä¸ªåŒºåŸŸé‡Œæ²¡æœ‰ä¸¥æ ¼çš„è§„å®šã€‚</p><p>æ‰€ä»¥ï¼Œhotspot 1.7- å°†å®ƒæ”¾åœ¨äº†å †çš„æ°¸ä¹…ä»£é‡Œï¼Œ1.8+å•ç‹¬å¼€è¾Ÿäº†ä¸€å—å«metaspaceæ¥å­˜æ”¾ä¸€éƒ¨åˆ†å†…å®¹ï¼ˆä¸æ˜¯å…¨éƒ¨ï¼å®šä¹‰çš„ç±»å¯¹è±¡åœ¨å †é‡Œï¼‰</p><p>å…·ä½“æ–¹æ³•åŒºä¸»è¦å­˜ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿç²—ç•¥çš„åˆ†ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li><p>ç±»ä¿¡æ¯ï¼šä¸»è¦æŒ‡ç±»ç›¸å…³çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£æè¿°ã€å¼•ç”¨ç­‰</p></li><li><p>è¿è¡Œæ—¶å¸¸é‡æ± ï¼šç¼–è¯‘é˜¶æ®µç”Ÿæˆçš„å¸¸é‡ä¸ç¬¦å·å¼•ç”¨ã€è¿è¡Œæ—¶åŠ å…¥çš„åŠ¨æ€å˜é‡</p><p>ï¼ˆå¸¸é‡æ± é‡Œçš„ç±»å˜é‡ï¼Œå¦‚å¯¹è±¡æˆ–å­—ç¬¦ä¸²ï¼Œæ¯”è¾ƒç‰¹æ®Šï¼Œ1.6å’Œ1.8ä½ç½®ä¸åŒï¼Œä¸‹é¢ä¼šè®²åˆ°ï¼‰</p></li></ul><p><strong>å°æç¤ºï¼š</strong></p><p>è¿™é‡Œç»å¸¸ä¼šè·Ÿä¸Šé¢å †é‡Œçš„æ°¸ä¹…ä»£æ··ä¸ºä¸€è°ˆï¼Œå®é™…ä¸Šè¿™æ˜¯ä¸¤ç äº‹</p><p>æ°¸ä¹…ä»£æ˜¯hotspotåœ¨1.7åŠä¹‹å‰æ‰æœ‰çš„è®¾è®¡ï¼Œ1.8+ï¼Œä»¥åŠå…¶ä»–è™šæ‹Ÿæœºå¹¶ä¸å­˜åœ¨è¿™ä¸ªä¸œè¥¿ã€‚</p><p>å¯ä»¥è¯´ï¼Œæ°¸ä¹…ä»£æ˜¯1.7çš„hotspotå·æ‡’çš„ç»“æœï¼Œä»–åœ¨å †é‡Œåˆ’åˆ†äº†ä¸€å—æ¥å®ç°æ–¹æ³•åŒºçš„åŠŸèƒ½ï¼Œå«æ°¸ä¹…ä»£ã€‚å› ä¸ºè¿™æ ·å¯ä»¥å€ŸåŠ©å †çš„åƒåœ¾å›æ”¶æ¥ç®¡ç†æ–¹æ³•åŒºçš„å†…å­˜ï¼Œè€Œä¸ç”¨å•ç‹¬ä¸ºæ–¹æ³•åŒºå†å»ç¼–å†™å†…å­˜ç®¡ç†ç¨‹åºã€‚æ‡’æƒ°ï¼</p><p>åŒæ—¶ä»£çš„å…¶ä»–è™šæ‹Ÿæœºï¼Œå¦‚J9ï¼ŒJrockitç­‰ï¼Œæ²¡æœ‰è¿™ä¸ªæ¦‚å¿µã€‚åæ¥hotspotè®¤è¯†åˆ°ï¼Œæ°¸ä¹…ä»£æ¥åšè¿™ä»¶äº‹ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚1.7å·²ç»ä»æ°¸ä¹…ä»£æ‹¿èµ°äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œç›´åˆ°1.8+å½»åº•å»æ‰äº†æ°¸ä¹…ä»£ï¼Œæ–¹æ³•åŒºå¤§éƒ¨åˆ†è¢«ç§»åˆ°äº†metaspaceï¼ˆå†å¼ºè°ƒä¸€ä¸‹ï¼Œä¸æ˜¯å…¨éƒ¨ï¼ï¼‰</p><p><strong>ç»“è®ºï¼š</strong></p><p>æ–¹æ³•åŒºæ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œè¿™æ˜¯è™šæ‹Ÿæœºè§„å®šçš„ï¼Œä½†æ˜¯æ˜¯ä¸ªé€»è¾‘æ¦‚å¿µï¼Œåœ¨å“ªé‡Œè™šæ‹Ÿæœºè‡ªå·±å»å†³å®š</p><p>è€Œæ°¸ä¹…ä»£ä¸ä¸€å®šå­˜åœ¨ï¼Œå·²æˆä¸ºå†å²</p><h3 id="_3-5-2-æº¢å‡ºå¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_3-5-2-æº¢å‡ºå¼‚å¸¸"><span>3.5.2 æº¢å‡ºå¼‚å¸¸</span></a></h3><p>1.6ï¼šOutOfMemoryError: PermGen space</p><p>1.8ï¼šOutOfMemoryError: Metaspace</p><h3 id="_3-5-3-æ¡ˆä¾‹-1-6æ–¹æ³•åŒºæº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3-5-3-æ¡ˆä¾‹-1-6æ–¹æ³•åŒºæº¢å‡º"><span>3.5.3 æ¡ˆä¾‹ï¼š1.6æ–¹æ³•åŒºæº¢å‡º</span></a></h3><p>1ï¼‰åŸç†</p><p><img src="`+os+`" alt="image-20210330111421370"></p><p>åœ¨1.6é‡Œï¼Œå­—ç¬¦ä¸²å¸¸é‡æ˜¯è¿è¡Œæ—¶å¸¸é‡æ± çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å½’å±äºæ–¹æ³•åŒºï¼Œæ”¾åœ¨äº†æ°¸ä¹…ä»£é‡Œã€‚</p><p>æ‰€ä»¥1.6ç¯å¢ƒä¸‹ï¼Œè®©æ–¹æ³•åŒºæº¢å‡ºï¼Œåªéœ€è¦å¯åŠ²é€ å¾€å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­é€ å­—ç¬¦ä¸²å³å¯ï¼Œè¿™é‡Œç”¨åˆ°ä¸€ä¸ªæ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/*</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± é‡Œæœ‰è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œç›´æ¥è¿”å›å¼•ç”¨ï¼Œä¸å†é¢å¤–æ·»åŠ </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">å¦‚æœæ²¡æœ‰ï¼ŒåŠ è¿›å»ï¼Œè¿”å›æ–°åˆ›å»ºçš„å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">*/</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">intern</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰ä»£ç </p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * æ–¹æ³•åŒºæº¢å‡ºï¼Œæ³¨æ„é™åˆ¶ä¸€ä¸‹æ°¸ä¹…ä»£çš„å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * ç¼–è¯‘çš„æ—¶å€™æ³¨æ„pomé‡Œçš„ç‰ˆæœ¬ï¼Œè¦è®¾ç½®1.6ï¼Œå¦åˆ™å¯åŠ¨ä¼šæœ‰é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> * jdk1.6  :     -XX:PermSize=6M -XX:MaxPermSize=6M</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> */</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> ConstantOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        ConstantOOM</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> oom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ConstantOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        Set</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> stringSet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> HashSet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            stringSet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">valueOf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">intern</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰åˆ›å»ºå¯åŠ¨ç¯å¢ƒ</p><p><img src="`+ys+`" alt="image-20210326141144524"></p><p>4ï¼‰å¼‚å¸¸ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">...</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19118</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19119</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19120</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception in thread </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OutOfMemoryError</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PermGen space</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">intern</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Native Method</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ConstantOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ConstantOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-4-æ¡ˆä¾‹-1-8æ–¹æ³•åŒºæº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_2-5-4-æ¡ˆä¾‹-1-8æ–¹æ³•åŒºæº¢å‡º"><span>2.5.4 æ¡ˆä¾‹ï¼š1.8æ–¹æ³•åŒºæº¢å‡º</span></a></h3><p>1ï¼‰åˆ°äº†1.8ï¼Œæƒ…å†µå‘ç”Ÿäº†å˜åŒ–</p><p>å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œ1.8ä¸‹æ— è®ºæŒ‡å®šä¸‹é¢çš„å“ªä¸ªå‚æ•°ï¼Œå¸¸é‡æ± è¿è¡Œéƒ½ä¸ä¼šæº¢å‡ºï¼Œä¼šä¸€ç›´æ‰“å°ä¸‹å»</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PermSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">6M </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxPermSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">6M</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MetaspaceSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10M </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxMetaspaceSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10M</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰é…ç½®è¿è¡Œç¯å¢ƒ</p><p><img src="`+ms+'" alt="image-20210326141912946"></p><p>3ï¼‰æ§åˆ¶å°ä¿¡æ¯</p><p>ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåªè¦ä½ jvmå †å†…å­˜å¤Ÿï¼Œç†è®ºä¸Šå¯ä»¥ä¸€ç›´æ‰“ä¸‹å»</p><p><img src="'+As+'" alt="image-20210326141956360"></p><p>4ï¼‰ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ°¸ä¹…ä»£æˆ‘ä»¬åŠ äº†é™åˆ¶ï¼Œç»“æœæ²¡æ„ä¹‰ï¼Œå› ä¸º1.8é‡Œå·²ç»æ²¡æœ‰è¿™è´§äº†</p><p>å…ƒç©ºé—´ä¹ŸåŠ äº†é™åˆ¶ï¼ŒåŒæ ·æ²¡æ„ä¹‰ï¼Œé‚£è¯´æ˜å­—ç¬¦ä¸²å¸¸é‡æ± å®ƒä¸åœ¨å…ƒç©ºé—´é‡Œï¼</p><p>é‚£ä¹ˆï¼Œå®ƒåœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p><img src="'+Ds+`" alt="image-20210330111458021"></p><p>jdk1.8ä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»åˆ°äº†å †ç©ºé—´ï¼Œå’Œå…¶ä»–å¯¹è±¡ä¸€æ ·ï¼Œæ¥å—å †çš„æ§åˆ¶ã€‚</p><p>å…¶ä»–çš„è¿è¡Œæ—¶çš„ç±»ä¿¡æ¯ã€åŸºæœ¬æ•°æ®ç±»å‹ç­‰åœ¨å…ƒç©ºé—´ã€‚</p><p>æˆ‘ä»¬å¯ä»¥éªŒè¯ä¸€ä¸‹ï¼Œå¯¹ä¸Šé¢çš„è¿è¡Œæ—¶å‚æ•°å†åŠ ä¸€ä¸ªå †ä¸Šé™é™åˆ¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-Xms10m</span></span>
<span class="line"><span>-Xmx10m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œç¯å¢ƒå¦‚ä¸‹ï¼š</p><p><img src="`+us+`" alt="image-20210330143017610"></p><p>è¿è¡Œæ²¡å¤šä¹…ï¼Œä½ ä¼šå¾—åˆ°ä»¥ä¸‹å¼‚å¸¸:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>â€¦â€¦</span></span>
<span class="line"><span>84014</span></span>
<span class="line"><span>84015</span></span>
<span class="line"><span>84016</span></span>
<span class="line"><span>84017</span></span>
<span class="line"><span>84018</span></span>
<span class="line"><span>84019</span></span>
<span class="line"><span>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded</span></span>
<span class="line"><span>    at java.lang.Integer.toString(Integer.java:403)</span></span>
<span class="line"><span>    at java.lang.String.valueOf(String.java:3099)</span></span>
<span class="line"><span>    at com.itheima.jvm.demo.ConstantOOM.main(ConstantOOM.java:18)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯´æ˜ï¼š1.8é‡Œï¼Œå­—ç¬¦ä¸²inter()è¢«æ”¾åœ¨äº†å †é‡Œï¼Œå—æœ€å¤§å †ç©ºé—´çš„é™åˆ¶ã€‚</p><p>5ï¼‰é‚£å¦‚ä½•æ‰èƒ½è®©å…ƒç©ºé—´æº¢å‡ºå‘¢ï¼Ÿ</p><p>æ—¢ç„¶å­—ç¬¦ä¸²å¸¸é‡æ± ä¸åœ¨è¿™é‡Œï¼Œé‚£å°±æ¢å…¶ä»–çš„ã€‚ç±»çš„åŸºæœ¬ä¿¡æ¯æ€»åœ¨å…ƒç©ºé—´å§ï¼Ÿæˆ‘ä»¬æ¥è¯•ä¸€ä¸‹</p><p>cglibæ˜¯ä¸€ä¸ªapacheä¸‹çš„å­—èŠ‚ç åº“ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶ç”Ÿæˆå¤§é‡çš„å¯¹è±¡ï¼Œæˆ‘ä»¬whileå¾ªç¯åŒæ—¶é™åˆ¶metaspaceè¯•è¯•ï¼š</p><p>é™„ï¼šhttps://gitee.com/mirrors/cglib ï¼ˆæƒ³æ·±å…¥äº†è§£è¿™ä¸ªå·¥å…·çš„çŒ›å‡»å·¦è¾¹ï¼Œè¿™é‡Œä¸åšè¿‡å¤šè®¨è®ºï¼‰</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>package com.itheima.jvm.demo;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import net.sf.cglib.proxy.Enhancer;</span></span>
<span class="line"><span>import net.sf.cglib.proxy.MethodInterceptor;</span></span>
<span class="line"><span>import net.sf.cglib.proxy.MethodProxy;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.lang.reflect.Method;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * jdk8æ–¹æ³•åŒºæº¢å‡º</span></span>
<span class="line"><span> *   -XX:MetaspaceSize=10M -XX:MaxMetaspaceSize=10M</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public class ConstantOOM8 {</span></span>
<span class="line"><span>    public static void main(final String[] args) {</span></span>
<span class="line"><span>        while (true) {</span></span>
<span class="line"><span>            Enhancer enhancer = new Enhancer();</span></span>
<span class="line"><span>            enhancer.setSuperclass(OOM.class);</span></span>
<span class="line"><span>            enhancer.setUseCache(false);</span></span>
<span class="line"><span>            enhancer.setCallback(new MethodInterceptor() {</span></span>
<span class="line"><span>                @Override</span></span>
<span class="line"><span>                public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable {</span></span>
<span class="line"><span>                    return methodProxy.invokeSuper(objects,args);</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            });</span></span>
<span class="line"><span>            enhancer.create();</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    static class OOM{</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6ï¼‰è¿è¡Œè®¾ç½®</p><p><img src="`+vs+`" alt="image-20210326152043324"></p><p>7ï¼‰è¿è¡Œç»“æœ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Caused by: java.lang.OutOfMemoryError: Metaspace</span></span>
<span class="line"><span>    at java.lang.ClassLoader.defineClass1(Native Method)</span></span>
<span class="line"><span>    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“è®ºï¼š</p><p>jdk8å¼•å…¥å…ƒç©ºé—´æ¥å­˜å‚¨æ–¹æ³•åŒºåï¼Œå†…å­˜æº¢å‡ºçš„é£é™©æ¯”å†å²ç‰ˆæœ¬å°å¤šäº†ï¼Œä½†æ˜¯åœ¨ç±»è¶…å‡ºæ§åˆ¶çš„æ—¶å€™ï¼Œä¾ç„¶ä¼šæ‰“çˆ†æ–¹æ³•åŒº</p><h2 id="_3-6-ä¸€ä¸ªæ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-6-ä¸€ä¸ªæ¡ˆä¾‹"><span>3.6 ä¸€ä¸ªæ¡ˆä¾‹</span></a></h2><p>ä¸ºä¾¿äºå¤§å®¶ç†è§£å’Œè®°å¿†ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªæ¡ˆä¾‹ï¼ŒæŠŠä¸Šé¢å„ä¸ªåŒºä¸²é€šèµ·æ¥ã€‚</p><p>å‡è®¾æœ‰ä¸ªBootstrapçš„ç±»ï¼Œæ‰§è¡Œmainæ–¹æ³•ã€‚åœ¨jvmé‡Œï¼Œå®ƒä»classæ–‡ä»¶åˆ°è·‘èµ·æ¥ï¼Œå¤§è‡´ç»è¿‡å¦‚ä¸‹æ­¥éª¤ï¼š</p><p><img src="`+Bs+'" alt="image-20210401175034807"></p><ol><li>é¦–å…ˆJVMä¼šå…ˆå°†è¿™ä¸ªBootstrap.class ä¿¡æ¯åŠ è½½åˆ°å†…å­˜ä¸­çš„æ–¹æ³•åŒº</li><li>æ¥ç€ï¼Œä¸»çº¿ç¨‹å¼€è¾Ÿä¸€å—å†…å­˜ç©ºé—´ï¼Œå‡†å¤‡å¥½ç¨‹åºè®¡æ•°å™¨pcï¼Œè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li><li>ç„¶åï¼ŒJVMä¼šåœ¨Heapå †ä¸Šä¸ºBootstrap.class åˆ›å»ºä¸€ä¸ªBootstrap.class çš„ç±»å®ä¾‹</li><li>JVMå¼€å§‹æ‰§è¡Œmainæ–¹æ³•ï¼Œè¿™æ—¶åœ¨è™šæ‹Ÿæœºæ ˆé‡Œä¸ºmainæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ ˆå¸§</li><li>mainæ–¹æ³•åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¹‹ä¸­ï¼Œè°ƒç”¨äº†greetingæ–¹æ³•ï¼Œåˆ™JVMä¼šä¸ºgreetingæ–¹æ³•å†åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œæ¨åˆ°è™šæ‹Ÿæœºæ ˆé¡¶ï¼Œåœ¨mainçš„ä¸Šé¢ï¼Œæ¯æ¬¡åªæœ‰ä¸€ä¸ªæ ˆå¸§å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå½“å‰ä¸ºgreeting</li><li>å½“greetingæ–¹æ³•è¿è¡Œå®Œæˆåï¼Œåˆ™greetingæ–¹æ³•å‡ºæ ˆï¼Œå½“å‰æ´»åŠ¨å¸§æŒ‡å‘mainï¼Œæ–¹æ³•ç»§ç»­å¾€ä¸‹è¿è¡Œ</li></ol><h2 id="_3-7-å½’çº³æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_3-7-å½’çº³æ€»ç»“"><span>3.7 å½’çº³æ€»ç»“</span></a></h2><p><img src="'+bs+'" alt="image-20230928164252806"></p><p>1ï¼‰ç‹¬äº«/å…±äº«çš„è§’åº¦ï¼š</p><ul><li>ç‹¬äº«ï¼šç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li><li>å…±äº«ï¼šå †ã€æ–¹æ³•åŒº</li></ul><p>2ï¼‰errorçš„è§’åº¦ï¼š</p><ul><li>ç¨‹åºè®¡æ•°å™¨ï¼šä¸ä¼šæº¢å‡ºï¼Œæ¯”è¾ƒç‰¹æ®Šï¼Œå…¶ä»–éƒ½ä¼š</li><li>ä¸¤ä¸ªæ ˆï¼šå¯èƒ½ä¼šå‘ç”Ÿä¸¤ç§æº¢å‡ºï¼Œä¸€æ˜¯æ·±åº¦è¶…äº†ï¼ŒæŠ¥StackOverflowErrorï¼Œç©ºé—´ä¸è¶³ï¼šOutOfMemoryError</li><li>å †ï¼šåªä¼šåœ¨ç©ºé—´ä¸è¶³æ—¶ï¼ŒæŠ¥OutOfMemoryErrorï¼Œä¼šæç¤ºheapSpace</li><li>æ–¹æ³•åŒºï¼šç©ºé—´ä¸è¶³æ—¶ï¼ŒæŠ¥OutOfMemoryErrorï¼Œæç¤ºä¸åŒï¼Œ1.6æ˜¯permspaceï¼Œ1.8æ˜¯å…ƒç©ºé—´ï¼Œå’Œå®ƒåœ¨ä»€ä¹ˆåœ°æ–¹æœ‰å…³</li></ul><p>3ï¼‰å½’å±ï¼š</p><ul><li>è®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆï¼šçº¿ç¨‹åˆ›å»ºå¿…é¡»ç”³è¯·é…å¥—ï¼ŒçœŸæ­£çš„ç‰©ç†ç©ºé—´</li><li>å †ï¼šçœŸæ­£çš„ç‰©ç†ç©ºé—´ï¼Œä½†æ˜¯å†…éƒ¨ç»“æ„çš„åˆ’åˆ†æœ‰å˜åŠ¨ï¼Œ1.6æœ‰æ°¸ä¹…ä»£ï¼Œ1.8è¢«å¹²æ‰</li><li>æ–¹æ³•åŒºï¼šæœ€æ²¡å½’å±æ„Ÿçš„ä¸€å—ï¼ŒåŸå› å°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µã€‚1.6è¢«æ”¾åœ¨äº†å †çš„æ°¸ä¹…ä»£ï¼Œ1.8è¢«æ‹†åˆ†ï¼Œä¸€éƒ¨åˆ†åœ¨å…ƒç©ºé—´ï¼Œä¸€éƒ¨åˆ†ï¼ˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± é‡Œé¢çš„ç±»å¯¹è±¡ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²å¸¸é‡ï¼Œè¢«è®¾è®¡æ”¾åœ¨äº†å †é‡Œï¼‰</li><li>ç›´æ¥å†…å­˜ï¼šè¿™å—å®é™…ä¸Šä¸å±äºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ç›´æ¥æ“ä½œç‰©ç†å†…å­˜ã€‚åœ¨nioæ“ä½œé‡ŒDirectByteBufferç±»å¯ä»¥å¯¹nativeæ“ä½œï¼Œé¿å…æµåœ¨å †å†…å¤–çš„æ‹·è´ã€‚æˆ‘ä»¬ä¸‹ä¸€æ­¥çš„è°ƒä¼˜ä¸ä¼šæ¶‰åŠåˆ°å®ƒï¼Œäº†è§£å³å¯ã€‚</li></ul><p>æ‰©å±• ï¼š</p><p>ä½¿ç”¨ASMç”ŸæˆJavaå­—èŠ‚ç </p><p>JITåŠå…¶ç›¸å…³å‚æ•°</p><h1 id="_4ã€ç±»åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_4ã€ç±»åŠ è½½"><span>4ã€ç±»åŠ è½½</span></a></h1><p>é€šè¿‡å­—èŠ‚ç ï¼Œæˆ‘ä»¬äº†è§£äº†classæ–‡ä»¶çš„ç»“æ„</p><p>é€šè¿‡è¿è¡Œæ•°æ®åŒºï¼Œæˆ‘ä»¬äº†è§£äº†jvmå†…éƒ¨çš„å†…å­˜åˆ’åˆ†åŠç»“æ„</p><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ï¼Œå­—èŠ‚ç æ€ä¹ˆè¿›å…¥jvmçš„å†…å­˜ç©ºé—´ï¼Œå„è‡ªè¿›å…¥é‚£ä¸ªç©ºé—´ï¼Œä»¥åŠæ€ä¹ˆè·‘èµ·æ¥ã€‚</p><p><img src="'+Cs+'" alt="image-20210331111333565"></p><h2 id="_4-1-åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_4-1-åŠ è½½"><span>4.1 åŠ è½½</span></a></h2><h3 id="_4-1-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_4-1-1-æ¦‚è¿°"><span>4.1.1 æ¦‚è¿°</span></a></h3><p>ç±»çš„åŠ è½½å°±æ˜¯å°†classæ–‡ä»¶ä¸­çš„äºŒè¿›åˆ¶æ•°æ®è¯»å–åˆ°å†…å­˜ä¸­ï¼Œç„¶åå°†è¯¥å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€æ•°æ®ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºä¸­è¿è¡Œçš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”åœ¨å †å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªjava.lang.Classå¯¹è±¡ä½œä¸ºè®¿é—®æ–¹æ³•åŒºæ•°æ®ç»“æ„çš„å…¥å£ã€‚</p><p><img src="'+Es+'" alt="image-20210330161050813"></p><p>æ³¨æ„ï¼š</p><ul><li>åŠ è½½çš„å­—èŠ‚ç æ¥æºï¼Œä¸ä¸€å®šéå¾—æ˜¯classæ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ç¬¦åˆå­—èŠ‚ç è§„èŒƒçš„ä»»æ„åœ°æ–¹ï¼Œç”šè‡³äºŒè¿›åˆ¶æµç­‰</li><li>ä»å­—èŠ‚ç åˆ°å†…å­˜ï¼Œæ˜¯ç”±åŠ è½½å™¨ï¼ˆClassLoaderï¼‰å®Œæˆçš„ï¼Œä¸‹é¢æˆ‘ä»¬è¯¦ç»†çœ‹ä¸€ä¸‹åŠ è½½å™¨ç›¸å…³å†…å®¹</li></ul><h3 id="_4-1-2-ç³»ç»ŸåŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#_4-1-2-ç³»ç»ŸåŠ è½½å™¨"><span>4.1.2 ç³»ç»ŸåŠ è½½å™¨</span></a></h3><p>jvmæä¾›äº†3ä¸ªç³»ç»ŸåŠ è½½å™¨ï¼Œåˆ†åˆ«æ˜¯<strong>Bootstrp loader</strong>ã€<strong>ExtClassLoader</strong> ã€<strong>AppClassLoader</strong></p><p>è¿™ä¸‰ä¸ªåŠ è½½å™¨äº’ç›¸æˆçˆ¶å­ç»§æ‰¿å…³ç³»</p><p><img src="'+fs+`" alt="image-20210330164000447"></p><p>1ï¼‰Bootstrp loader</p><p>BootstrpåŠ è½½å™¨æ˜¯ç”¨C++è¯­è¨€å†™çš„ï¼Œå®ƒåœ¨Javaè™šæ‹Ÿæœºå¯åŠ¨ååˆå§‹åŒ–</p><p>å®ƒä¸»è¦è´Ÿè´£åŠ è½½ä»¥ä¸‹è·¯å¾„çš„æ–‡ä»¶ï¼š</p><ul><li><p><code>%JAVA_HOME%/jre/lib/*.jar</code></p></li><li><p><code>%JAVA_HOME%/jre/classes/*</code></p></li><li><p><code>-Xbootclasspath</code>å‚æ•°æŒ‡å®šçš„è·¯å¾„</p></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sun.boot.class.path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2ï¼‰ExtClassLoader</p><p>ExtClassLoaderæ˜¯ç”¨Javaå†™çš„ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ sun.misc.Launcher$ExtClassLoader</p><p>ExtClassLoaderä¸»è¦åŠ è½½ï¼š</p><ul><li>%JAVA_HOME%/jre/lib/ext/*</li><li>extä¸‹çš„æ‰€æœ‰classesç›®å½•</li><li>java.ext.dirsç³»ç»Ÿå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­ç±»åº“</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">java.ext.dirs</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3ï¼‰AppClassLoader</p><p>AppClassLoaderä¹Ÿæ˜¯ç”¨Javaå†™æˆçš„ï¼Œå®ƒçš„å®ç°ç±»æ˜¯ sun.misc.Launcher$AppClassLoaderï¼Œå¦å¤–æˆ‘ä»¬çŸ¥é“ClassLoaderä¸­æœ‰ä¸ªgetSystemClassLoaderæ–¹æ³•ï¼Œæ­¤æ–¹æ³•è¿”å›çš„å°±æ˜¯å®ƒã€‚</p><ul><li>è´Ÿè´£åŠ è½½ -classpath æ‰€æŒ‡å®šçš„ä½ç½®çš„ç±»æˆ–è€…æ˜¯jaræ–‡æ¡£</li><li>ä¹Ÿæ˜¯Javaç¨‹åºé»˜è®¤çš„ç±»åŠ è½½å™¨</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">java.class.path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>4ï¼‰éªŒè¯</p><p>å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€æ®µä»£ç æ‰“å°å¯¹åº”çš„propertyä¿¡æ¯å°±å¯ä»¥æŸ¥åˆ°å½“å‰ä¸‰ä¸ªç±»åŠ è½½å™¨æ‰€åŠ è½½çš„ç›®å½•</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itheima</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">load</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> SystemLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> bootstrap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sun.boot.class.path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">split</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ext</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">java.ext.dirs</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">split</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">java.class.path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">split</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bootstrap:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> :</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> bootstrap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ext:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> :</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ext</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        //appæ˜¯é»˜è®¤åŠ è½½å™¨ï¼Œæ³¨æ„å¯åŠ¨æ§åˆ¶å°çš„ -classpath é€‰é¡¹</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">app:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> :</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-1-3-è‡ªå®šä¹‰åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#_4-1-3-è‡ªå®šä¹‰åŠ è½½å™¨"><span>4.1.3 è‡ªå®šä¹‰åŠ è½½å™¨</span></a></h3><p>é™¤äº†ä¸Šé¢çš„ç³»ç»Ÿæä¾›çš„3ç§loaderï¼Œjvmå…è®¸è‡ªå·±å®šä¹‰ç±»åŠ è½½å™¨ï¼Œå…¸å‹çš„åœ¨tomcatä¸Šï¼š</p><p><img src="`+_s+'" alt="image-20210331100234007"></p><p><em>æ‹“å±•ï¼šæ„Ÿå…´è¶£çš„åŒå­¦ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸‹ï¼Œç»§æ‰¿ClassLoaderè¿™ä¸ªæŠ½è±¡ç±»ï¼Œå¹¶è¦†ç›–å¯¹åº”çš„findClassæ–¹æ³•å³å¯</em></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸ªé‡ç‚¹ï¼šåŒäº²å§”æ´¾</p><h3 id="_4-1-4-åŒäº²å§”æ´¾" tabindex="-1"><a class="header-anchor" href="#_4-1-4-åŒäº²å§”æ´¾"><span>4.1.4 åŒäº²å§”æ´¾</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p><img src="'+xs+`" alt="image-20210331091443372"></p><p>ç±»åŠ è½½å™¨åŠ è½½æŸä¸ªç±»çš„æ—¶å€™ï¼Œå› ä¸ºæœ‰å¤šä¸ªåŠ è½½å™¨ï¼Œç”šè‡³å¯ä»¥æœ‰å„ç§è‡ªå®šä¹‰çš„ï¼Œä»–ä»¬å‘ˆçˆ¶å­ç»§æ‰¿å…³ç³»ã€‚</p><p>è¿™ç»™äººä¸€ç§å°è±¡ï¼Œå­ç±»çš„åŠ è½½ä¼šè¦†ç›–çˆ¶ç±»ï¼Œå…¶å®æ°æ°ç›¸åï¼</p><p>ä¸æ™®é€šç±»ç»§æ‰¿å±æ€§ä¸åŒï¼Œç±»åŠ è½½å™¨ä¼šä¼˜å…ˆè°ƒçˆ¶ç±»çš„loadæ–¹æ³•ï¼Œå¦‚æœçˆ¶ç±»èƒ½åŠ è½½ï¼Œç›´æ¥ç”¨çˆ¶ç±»çš„ï¼Œå¦åˆ™æœ€åä¸€æ­¥æ‰æ˜¯è‡ªå·±å°è¯•åŠ è½½ï¼Œä»æºä»£ç ä¸Šå¯ä»¥éªŒè¯ã€‚</p><p>ClassLoader.loadClass()æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">protected</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Class</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">?</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> loadClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> boolean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> throws ClassNotFoundException </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        synchronized</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClassLoadingLock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            // é¦–å…ˆï¼Œæ£€æµ‹æ˜¯å¦å·²ç»åŠ è½½ </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            Class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">?</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> findLoadedClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                //å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œå¼€å§‹æŒ‰å¦‚ä¸‹è§„åˆ™æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                long</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> t0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nanoTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">parent </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                        //é‡ç‚¹ï¼çˆ¶åŠ è½½å™¨ä¸ä¸ºç©ºåˆ™è°ƒç”¨çˆ¶åŠ è½½å™¨çš„loadClass </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                        c </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> parent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">loadClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                        //çˆ¶åŠ è½½å™¨ä¸ºç©ºåˆ™è°ƒç”¨Bootstrap Classloader </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                        c </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> findBootstrapClassOrNull</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ClassNotFoundException </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                    long</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> t1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nanoTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                    //çˆ¶åŠ è½½å™¨æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è°ƒç”¨findclassï¼Œè‡ªå·±æŸ¥æ‰¾å¹¶åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    c </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> findClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                resolveClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡å‘¢ï¼Ÿ</p><p><strong>é¿å…é‡å¤åŠ è½½ã€ é¿å…æ ¸å¿ƒç±»ç¯¡æ”¹</strong></p><p>é‡‡ç”¨åŒäº²å§”æ´¾æ¨¡å¼çš„æ˜¯å¥½å¤„æ˜¯Javaç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ï¼Œé€šè¿‡è¿™ç§å±‚çº§å…³å¯ä»¥é¿å…ç±»çš„é‡å¤åŠ è½½ï¼Œå½“çˆ¶äº²å·²ç»åŠ è½½äº†è¯¥ç±»æ—¶ï¼Œå°±æ²¡æœ‰å¿…è¦å­ClassLoaderå†åŠ è½½ä¸€æ¬¡ã€‚</p><p>å…¶æ¬¡æ˜¯è€ƒè™‘åˆ°å®‰å…¨å› ç´ ï¼Œjavaæ ¸å¿ƒapiä¸­å®šä¹‰ç±»å‹ä¸ä¼šè¢«éšæ„æ›¿æ¢ï¼Œå‡è®¾é€šè¿‡ç½‘ç»œä¼ é€’ä¸€ä¸ªåä¸ºjava.lang.Integerçš„ç±»ï¼Œé€šè¿‡åŒäº²å§”æ‰˜æ¨¡å¼ä¼ é€’åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œè€Œå¯åŠ¨ç±»åŠ è½½å™¨åœ¨æ ¸å¿ƒJavaã€‚</p><p>APIå‘ç°è¿™ä¸ªåå­—çš„ç±»ï¼Œå‘ç°è¯¥ç±»å·²è¢«åŠ è½½ï¼Œå¹¶ä¸ä¼šé‡æ–°åŠ è½½ç½‘ç»œä¼ é€’çš„è¿‡æ¥çš„java.lang.Integerï¼Œè€Œç›´æ¥è¿”å›å·²åŠ è½½è¿‡çš„Integer.class</p><p>å³ä¾¿æ˜¯çˆ¶ç±»æ²¡åŠ è½½ï¼Œä¹Ÿä¼šä¼˜å…ˆè®©çˆ¶ç±»å»åŠ è½½ç‰¹å®šç³»ç»Ÿç›®å½•é‡Œçš„classï¼Œä½ è·å–åˆ°çš„ä¾ç„¶æ˜¯jvmå†…çš„æ ¸å¿ƒç±»ï¼Œè€Œä¸æ˜¯ä½ èƒ¡ä¹±æ”¹å†™çš„ã€‚è¿™æ ·ä¾¿å¯ä»¥é˜²æ­¢æ ¸å¿ƒAPIåº“è¢«éšæ„ç¯¡æ”¹ã€‚</p><blockquote><p>æŸ¥æ‰¾ app -&gt; ext -&gt; boot,æ‰¾ä¸åˆ°,åŠ è½½ boot-&gt;ext-&gt;app</p><p>åå°„å¯ä»¥ä¿®æ”¹,ä»appåŠ è½½ã€‚æ˜¯å¦åªèƒ½ç”¨åå°„?</p></blockquote><p><strong>åŒäº²æ¨¡å¼çš„ç ´å</strong></p><p>åŒäº²æ¨¡å¼æ˜¯é»˜è®¤çš„æ¨¡å¼ï¼Œä½†ä¸æ˜¯å¿…é¡»è¿™ä¹ˆåšã€‚ï¼ˆæœ‰è¿™ç§æœºåˆ¶å­˜åœ¨ï¼Œjavaæ‰èƒ½åšåˆ°çƒ­æ›¿æ¢ï¼Œä»¥åŠæ›´åŠ çµæ´»ï¼‰</p><ul><li>Tomcatçš„WebappClassLoader å°±ä¼šå…ˆåŠ è½½è‡ªå·±çš„Classï¼Œæ‰¾ä¸åˆ°å†å§”æ‰˜parent</li><li>OSGiçš„ClassLoaderå½¢æˆç½‘çŠ¶ç»“æ„ï¼Œæ ¹æ®éœ€è¦è‡ªç”±åŠ è½½Class</li></ul><p>å…ˆä»åº•å±‚ClassLoaderåŠ è½½</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">protected</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> synchronized</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Class</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">?</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> loadClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> boolean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> throws ClassNotFoundException </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // First, check if the class has already been loaded</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    Class</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> re</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">findClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">re</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€œæ— æ³•è½½å…¥ç±»</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€œ éœ€è¦è¯·æ±‚çˆ¶åŠ è½½å™¨</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        return super.loadClass(name,resolve);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    }</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    return re;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">}</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">protected Class&lt;?&gt; findClass(String className) throws ClassNotFoundException {</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Class clazz = this.findLoadedClass(className);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    if (null == clazz) {</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        try {</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            String classFile = getClassFile(className);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            FileInputStream fis = new FileInputStream(classFile);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            FileChannel fileC = fis.getChannel();</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            ByteArrayOutputStream baos = new ByteArrayOutputStream();</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            WritableByteChannel outC = Channels.newChannel(baos);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            ByteBuffer buffer = ByteBuffer.allocateDirect(1024);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            // çœç•¥éƒ¨åˆ†ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            fis.close();</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            byte[] bytes = baos.toByteArray();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            clazz = defineClass(className, bytes, 0, bytes.length);</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        } catch (FileNotFoundException e) {</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            e.printStackTrace();</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        } catch (IOException e) {</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            e.printStackTrace();</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        }</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    }</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    return clazz;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Fs+`" alt="image-20220606075858080"></p><p><strong>åŒäº²æ¨¡å¼å­˜åœ¨çš„é—®é¢˜?</strong></p><blockquote><p>é¡¶å±‚ClassLoader,æ— æ³•åŠ è½½åº•å±‚ClassLoaderçš„ç±»</p><p>é‚£javaæ¡†æ¶(rt.jar)æ˜¯å¦‚ä½•åŠ è½½åº”ç”¨çš„ç±»çš„?</p><p>â€‹ javax.xml.parsersåŒ…ä¸­å®šä¹‰äº†xmlè§£æçš„ç±»æ¥å£Service Provider Interface</p><p>â€‹ SPI ä½äºrt.jar,å³æ¥å£åœ¨å¯åŠ¨ClassLoaderä¸­,è€ŒSPIçš„å®ç°ç±»,åœ¨AppLoaderä¸­ã€‚</p></blockquote><p>è§£å†³æ–¹æ¡ˆï¼šä¸Šä¸‹æ–‡ClassLoader</p><h3 id="_4-1-5-ä¸Šä¸‹æ–‡åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#_4-1-5-ä¸Šä¸‹æ–‡åŠ è½½å™¨"><span>4.1.5 ä¸Šä¸‹æ–‡åŠ è½½å™¨</span></a></h3><p><code>Thread. setContextClassLoader()</code></p><ul><li>ä¸Šä¸‹æ–‡åŠ è½½å™¨</li><li>æ˜¯ä¸€ä¸ªè§’è‰²</li><li>ç”¨ä»¥<strong>è§£å†³é¡¶å±‚ClassLoaderæ— æ³•è®¿é—®åº•å±‚ClassLoaderçš„ç±»</strong>çš„é—®é¢˜</li><li>åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨é¡¶å±‚ClassLoaderä¸­ï¼Œä¼ å…¥åº•å±‚ClassLoaderçš„å®ä¾‹</li></ul><p>ä»£ç æ¥è‡ªäºjavax.xml.parsers.FactoryFinderå±•ç¤ºå¦‚ä½•åœ¨å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½AppLoaderçš„ç±»</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> private</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Class </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProviderClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String className</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ClassLoader cl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        boolean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> doFallback</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> boolean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> useBSClsLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> throws ClassNotFoundException</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cl </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">useBSClsLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">forName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">className</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> FactoryFinder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClassLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                cl </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ss</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getContextClassLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cl </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                    throw</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ClassNotFoundException</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">loadClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">className</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> //ä½¿ç”¨ä¸Šä¸‹æ–‡ClassLoader</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">loadClass</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">className</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ClassNotFoundException </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">doFallback</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            // Use current class loader - should always be bootstrap CL</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">forName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">className</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> FactoryFinder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getClassLoader</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">â€¦</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">..</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸Šä¸‹æ–‡ClassLoaderå¯ä»¥çªç ´åŒäº²æ¨¡å¼çš„å±€é™æ€§</p></blockquote><h3 id="çƒ­æ›¿æ¢" tabindex="-1"><a class="header-anchor" href="#çƒ­æ›¿æ¢"><span>çƒ­æ›¿æ¢</span></a></h3><p>å½“ä¸€ä¸ªclassè¢«æ›¿æ¢åï¼Œç³»ç»Ÿæ— éœ€é‡å¯ï¼Œæ›¿æ¢çš„ç±»ç«‹å³ç”Ÿæ•ˆ</p><p>å¯ä»¥ç”¨classLoaderç›¸å…³çŸ¥è¯†è§£å†³</p><h2 id="_4-2-éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_4-2-éªŒè¯"><span>4.2 éªŒè¯</span></a></h2><p>åŠ è½½å®Œæˆåï¼Œclassé‡Œå®šä¹‰çš„ç±»ç»“æ„å°±è¿›å…¥äº†å†…å­˜çš„æ–¹æ³•åŒºã€‚</p><p>è€Œæ¥ä¸‹æ¥ï¼ŒéªŒè¯æ˜¯è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ã€‚å®é™…ä¸Šï¼ŒéªŒè¯å’Œä¸Šé¢çš„åŠ è½½æ˜¯äº¤äº’è¿›è¡Œçš„ï¼ˆæ¯”å¦‚classæ–‡ä»¶æ ¼å¼éªŒè¯ï¼‰ã€‚</p><p>è€Œä¹‹æ‰€ä»¥æŠŠéªŒè¯æ”¾åœ¨åŠ è½½çš„åé¢ï¼Œæ˜¯å› ä¸ºé™¤äº†åŸºæœ¬çš„classæ–‡ä»¶æ ¼å¼ï¼Œè¿˜éœ€è¦å…¶ä»–å¾ˆå¤šéªŒè¯ï¼Œæˆ‘ä»¬é€ä¸ªæ¥çœ‹ï¼š</p><h3 id="_4-2-1-æ–‡ä»¶æ ¼å¼éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_4-2-1-æ–‡ä»¶æ ¼å¼éªŒè¯"><span>4.2.1 æ–‡ä»¶æ ¼å¼éªŒè¯</span></a></h3><p>è¿™ä¸ªå¥½ç†è§£ï¼Œå°±æ˜¯éªŒè¯åŠ è½½çš„å­—èŠ‚ç æ˜¯ä¸æ˜¯ç¬¦åˆè§„èŒƒ</p><ul><li>æ˜¯ä¸æ˜¯CAFEBABYEå¼€å¤´</li><li>ä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰jvmè™šæ‹Ÿæœºå¯è¿è¡Œçš„èŒƒå›´å†…</li><li>å¸¸é‡æ± ç±»å‹å¯¹ä¸å¯¹</li><li>æœ‰æ²¡æœ‰å…¶ä»–ä¸å¯è¯†åˆ«çš„ä¿¡æ¯</li><li>â€¦â€¦ç­‰</li></ul><p>æ€»ä¹‹ï¼Œæ ¹æ®æˆ‘ä»¬ä¸ŠèŠ‚è®²çš„å­—èŠ‚ç åˆ†æï¼Œè¦æ»¡è¶³åˆæ³•çš„å­—èŠ‚ç çº¦æŸ</p><h3 id="_4-2-2-å…ƒæ•°æ®éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_4-2-2-å…ƒæ•°æ®éªŒè¯"><span>4.2.2 å…ƒæ•°æ®éªŒè¯</span></a></h3><p>åˆ°javaè¯­æ³•çº§åˆ«äº†ã€‚è¿™ä¸ªé˜¶æ®µä¸»è¦éªŒè¯å±æ€§ã€å­—æ®µã€ç±»å…³ç³»ã€æ–¹æ³•ç­‰æ˜¯å¦åˆè§„</p><ul><li>æ˜¯å¦æœ‰çˆ¶ç±»ï¼Ÿé™¤äº†Objectå…¶ä»–ç±»å¿…é¡»æœ‰</li><li>æ˜¯å¦ç»§æ‰¿äº†ä¸è¯¥è¢«ç»§æ‰¿çš„ç±»ï¼Œæ¯”å¦‚final</li><li>æ˜¯ä¸æ˜¯æŠ½è±¡ç±»ï¼Œæ˜¯çš„è¯ï¼Œæ–¹æ³•éƒ½å®Œå¤‡äº†æ²¡</li><li>å­—æ®µæœ‰æ²¡é—®é¢˜ï¼Ÿæ˜¯ä¸æ˜¯è¦†ç›–äº†çˆ¶ç±»é‡Œçš„final</li><li>â€¦â€¦ç­‰</li></ul><p>æ€»ä¹‹ï¼Œç»è¿‡è¿™ä¸ªé˜¶æ®µï¼Œä½ çš„ç±»å¯¹è±¡ç»“æ„æ˜¯okçš„äº†</p><h3 id="_4-2-3-å­—èŠ‚ç éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_4-2-3-å­—èŠ‚ç éªŒè¯"><span>4.2.3 å­—èŠ‚ç éªŒè¯</span></a></h3><p>æœ€å¤æ‚çš„ä¸€ä¸ªé˜¶æ®µã€‚</p><p>ç­‰ç­‰ï¼Œå­—èŠ‚ç å‰é¢ä¸æ˜¯éªŒè¯è¿‡äº†å—ï¼Ÿå’‹è¿˜è¦éªŒè¯ï¼Ÿ</p><p>ä¸Šé¢çš„éªŒè¯æ˜¯åŸºæœ¬å­—èŠ‚è¡¨æ ¼å¼éªŒè¯ã€‚è€Œè¿™é‡Œä¸»è¦éªŒè¯classé‡Œå®šä¹‰çš„æ–¹æ³•ï¼Œçœ‹æ–¹æ³•å†…éƒ¨çš„codeæ˜¯å¦åˆæ³•ã€‚</p><ul><li>ç±»å‹è½¬æ¢æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ</li><li>æŒ‡ä»¤æ˜¯å¦è·³åˆ°äº†æ–¹æ³•å¤–çš„å­—èŠ‚ç ä¸Šï¼Ÿ</li><li>â€¦â€¦</li></ul><p>ç»è¿‡æœ¬é˜¶æ®µï¼Œå¯ä»¥ç¡®ä¿ä½ çš„ä»£ç æ‰§è¡Œæ—¶ï¼Œä¸ä¼šå‘ç”Ÿå¤§çš„æ„å¤–</p><p>æ³¨æ„ï¼ä¸æ˜¯å®Œå…¨ä¸ä¼šå‘ç”Ÿã€‚æ¯”å¦‚ä½ å†™äº†ä¸€æ®µä»£ç ï¼Œjvmåªä¼šçŸ¥é“ä½ çš„æ–¹æ³•æ‰§è¡Œæ—¶ç¬¦åˆç³»ç»Ÿè§„åˆ™ã€‚</p><p>å®ƒä¹Ÿä¸çŸ¥é“ä½ ä¼šä¸ä¼šæ‰§è¡Œå¾ˆé•¿å¾ˆé•¿æ—¶é—´å¯¼è‡´ç³»ç»Ÿå¡æ­»</p><h3 id="_4-2-4-ç¬¦å·å¼•ç”¨éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_4-2-4-ç¬¦å·å¼•ç”¨éªŒè¯"><span>4.2.4 ç¬¦å·å¼•ç”¨éªŒè¯</span></a></h3><p>æœ€åä¸€ä¸ªé˜¶æ®µã€‚</p><p>è¿™ä¸ªé˜¶æ®µä¹Ÿå¥½ç†è§£ï¼Œæˆ‘ä»¬ä¸Šé¢çš„å­—èŠ‚ç è§£è¯»æ—¶ï¼ŒçŸ¥é“å­—èŠ‚ç é‡Œæœ‰çš„æ˜¯ç›´æ¥å¼•ç”¨ï¼Œæœ‰çš„æ˜¯æŒ‡å‘äº†å…¶ä»–çš„å­—èŠ‚ç åœ°å€ã€‚</p><p>è€Œç¬¦å·å¼•ç”¨éªŒè¯çš„å°±æ˜¯ï¼Œè¿™äº›å¼•ç”¨çš„å¯¹åº”çš„å†…å®¹æ˜¯å¦åˆæ³•ã€‚</p><ul><li>utf8é‡Œè®°äº†æŸä¸ªç±»çš„åå­—ï¼Œè¿™ä¸ªç±»å­˜åœ¨ä¸ï¼Ÿ</li><li>æ–¹æ³•æˆ–å­—æ®µå¼•ç”¨ï¼Œè¿™äº›æ–¹æ³•åœ¨å¯¹åº”çš„ç±»é‡Œå­˜åœ¨ä¸å­˜åœ¨ï¼Ÿ</li><li>ç±»ã€å­—æ®µã€æ–¹æ³•ç­‰ä¸Šé¢çš„å¯è§æ€§æ˜¯å¦åˆæ³•</li><li>â€¦â€¦</li></ul><h2 id="_4-3-å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_4-3-å‡†å¤‡"><span>4.3 å‡†å¤‡</span></a></h2><p>è¿™ä¸ªé˜¶æ®µä¸ºclassä¸­å®šä¹‰çš„å„ç§ç±»å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶èµ‹åˆå§‹å€¼ã€‚</p><p>æ‰€åšçš„äº‹æƒ…å¥½ç†è§£ï¼Œä½†æ˜¯è¦æ³¨æ„å‡ ç‚¹ï¼š</p><h3 id="_4-3-1-å˜é‡ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_4-3-1-å˜é‡ç±»å‹"><span>4.3.1 å˜é‡ç±»å‹</span></a></h3><p>æ³¨æ„æ˜¯ç±»å˜é‡ï¼Œä¹Ÿå°±æ˜¯ç±»é‡Œçš„é™æ€å˜é‡ï¼Œè€Œä¸æ˜¯newçš„é‚£äº›å®ä¾‹å˜é‡ã€‚newçš„åœ¨ä¸‹é¢çš„åˆå§‹åŒ–é˜¶æ®µ</p><ul><li>ç±»å˜é‡ = é™æ€å˜é‡</li><li>å®ä¾‹å˜é‡ = å®ä¾‹åŒ–newå‡ºæ¥çš„é‚£äº›</li></ul><h3 id="_4-3-2-å­˜å‚¨ä½ç½®" tabindex="-1"><a class="header-anchor" href="#_4-3-2-å­˜å‚¨ä½ç½®"><span>4.3.2 å­˜å‚¨ä½ç½®</span></a></h3><p>ç†è®ºä¸Šè¿™äº›å€¼éƒ½åœ¨æ–¹æ³•åŒºé‡Œï¼Œä½†æ˜¯æ³¨æ„ï¼Œæ–¹æ³•åŒºæœ¬èº«å°±æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µã€‚</p><p>1.6é‡Œï¼Œåœ¨æ°¸ä¹…ä»£</p><p>1.8ä»¥åï¼Œé™æ€ç±»å˜é‡å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å®å®ƒåœ¨å †é‡Œã€‚è¿™ä¸ªä¸Šé¢æˆ‘ä»¬è®²æ–¹æ³•åŒºçš„æ—¶å€™éªŒè¯è¿‡ã€‚</p><h3 id="_4-3-3-åˆå§‹åŒ–å€¼" tabindex="-1"><a class="header-anchor" href="#_4-3-3-åˆå§‹åŒ–å€¼"><span>4.3.3 åˆå§‹åŒ–å€¼</span></a></h3><p>è¿™ä¸ªå€¼è¿›å…¥äº†å†…å­˜ï¼Œé‚£åˆ°åº•å†…å­˜é‡Œæ”¾çš„valueæ˜¯å•¥ï¼Ÿ</p><p>æ³¨æ„ï¼</p><p>å³ä¾¿æ˜¯staticå˜é‡ï¼Œå®ƒåœ¨è¿™ä¸ªé˜¶æ®µåˆå§‹åŒ–è¿›å†…å­˜çš„ä¾ç„¶æ˜¯å®ƒçš„åˆå§‹å€¼ï¼</p><p>è€Œä¸æ˜¯ä½ æƒ³è¦ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆã€‚</p><p>çœ‹ä¸‹é¢ä¸¤ä¸ªå®ä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//æ™®é€šç±»å˜é‡ï¼šåœ¨å‡†å¤‡é˜¶æ®µä¸ºå®ƒå¼€äº†å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯å®ƒçš„valueæ˜¯intçš„åˆå§‹å€¼ï¼Œä¹Ÿå°±æ˜¯ 0ï¼</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//è€ŒçœŸæ­£çš„123èµ‹å€¼ï¼Œæ˜¯åœ¨ç±»æ„é€ å™¨ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„åˆå§‹åŒ–é˜¶æ®µ</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//finalä¿®é¥°çš„ç±»å˜é‡ï¼Œç¼–è¯‘æˆå­—èŠ‚ç åï¼Œæ˜¯ä¸€ä¸ªConstantValueç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//è¿™ç§ç±»å‹ï¼Œåœ¨å‡†å¤‡é˜¶æ®µï¼Œç›´æ¥ç»™å®šå€¼123ï¼ŒåæœŸä¹Ÿæ²¡æœ‰äºŒæ¬¡åˆå§‹åŒ–ä¸€è¯´</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> final</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-4-è§£æ" tabindex="-1"><a class="header-anchor" href="#_4-4-è§£æ"><span>4.4 è§£æ</span></a></h2><p>è§£æé˜¶æ®µå¼€å§‹è§£æç±»ä¹‹é—´çš„å…³ç³»ï¼Œéœ€è¦å…³è”çš„ç±»è¢«åŠ è½½ã€‚</p><p>è¿™æ¶‰åŠåˆ°ï¼š</p><ul><li>ç±»æˆ–æ¥å£çš„è§£æï¼šç±»ç›¸å…³çš„çˆ¶å­ç»§æ‰¿ï¼Œå®ç°çš„æ¥å£éƒ½æœ‰å“ªäº›ç±»å‹ï¼Ÿ</li><li>å­—æ®µçš„è§£æï¼šå­—æ®µå¯¹åº”çš„ç±»å‹ï¼Ÿ</li><li>æ–¹æ³•çš„è§£æï¼šæ–¹æ³•çš„å‚æ•°ã€è¿”å›å€¼ã€å…³è”äº†å“ªäº›ç±»å‹</li><li>æ¥å£æ–¹æ³•çš„è§£æï¼šæ¥å£ä¸Šçš„ç±»å‹ï¼Ÿ</li></ul><p>ç»è¿‡è§£æåï¼Œå½“å‰classé‡Œçš„æ–¹æ³•å­—æ®µçˆ¶å­ç»§æ‰¿ç­‰å¯¹è±¡çº§åˆ«çš„å…³ç³»è§£æå®Œæˆã€‚</p><p>è¿™äº›æ“ä½œä¸Šç›¸å…³çš„ç±»ä¿¡æ¯ä¹Ÿè¢«åŠ è½½ã€‚</p><h2 id="_4-4-åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_4-4-åˆå§‹åŒ–"><span>4.4 åˆå§‹åŒ–</span></a></h2><h3 id="_4-4-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_4-4-1-æ¦‚è¿°"><span>4.4.1 æ¦‚è¿°</span></a></h3><p>æœ€åä¸€ä¸ªæ­¥éª¤ï¼Œç»è¿‡è¿™ä¸ªæ­¥éª¤åï¼Œç±»ä¿¡æ¯å®Œå…¨è¿›å…¥äº†jvmå†…å­˜ï¼Œç›´åˆ°å®ƒè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</p><p>å‰é¢å‡ ä¸ªé˜¶æ®µéƒ½æ˜¯è™šæ‹Ÿæœºæ¥æå®šçš„ã€‚æˆ‘ä»¬ä¹Ÿå¹²æ¶‰ä¸äº†ï¼Œä»ä»£ç ä¸Šåªèƒ½éµä»å®ƒçš„è¯­æ³•è¦æ±‚ã€‚</p><p>è€Œè¿™ä¸ªé˜¶æ®µï¼Œæ˜¯èµ‹å€¼ï¼Œæ‰æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­ç¼–å†™çš„æœ‰ä¸»å¯¼æƒçš„åœ°æ–¹</p><p>åœ¨å‡†å¤‡é˜¶æ®µï¼Œjvmå·²ç»åˆå§‹åŒ–äº†å¯¹åº”çš„å†…å­˜ç©ºé—´ï¼Œfinalä¹Ÿæœ‰äº†è‡ªå·±çš„å€¼ã€‚ä½†æ˜¯å…¶ä»–ç±»å˜é‡ï¼Œæ˜¯åœ¨è¿™é‡Œèµ‹å€¼å®Œæˆçš„ã€‚</p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™è¡Œä»£ç çš„123æ‰çœŸæ­£èµ‹å€¼å®Œæˆã€‚</p><h3 id="_4-4-2-ä¸¤ä¸ªåˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_4-4-2-ä¸¤ä¸ªåˆå§‹åŒ–"><span>4.4.2 ä¸¤ä¸ªåˆå§‹åŒ–</span></a></h3><p>1ï¼‰ç±»å˜é‡ä¸å®ä¾‹å˜é‡çš„åŒºåˆ†</p><p>æ³¨æ„ä¸€ä»¶äº‹æƒ…ï¼</p><p>è¿™é‡Œæ‰€è¯´çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ªclassç±»åŠ è½½åˆ°å†…å­˜çš„è¿‡ç¨‹ï¼Œæ‰€è°“çš„åˆå§‹åŒ–å€¼å¾—æ˜¯ç±»é‡Œå®šä¹‰çš„ç±»å˜é‡ã€‚ä¹Ÿå°±æ˜¯é™æ€å˜é‡ã€‚</p><p>è¿™ä¸ªåˆå§‹åŒ–è¦å’Œnewä¸€ä¸ªç±»åŒºåˆ†å¼€æ¥ã€‚newçš„æ˜¯å®ä¾‹å˜é‡ï¼Œæ˜¯åœ¨æ‰§è¡Œé˜¶æ®µæ‰åˆ›å»ºçš„ã€‚</p><p>2ï¼‰å®ä¾‹å˜é‡åˆ›å»ºçš„è¿‡ç¨‹</p><p>å½“æˆ‘ä»¬åœ¨æ–¹æ³•é‡Œå†™äº†ä¸€æ®µä»£ç ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¦newä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š</p><ul><li>åœ¨æ–¹æ³•åŒºä¸­æ‰¾åˆ°å¯¹åº”ç±»å‹çš„ç±»ä¿¡æ¯</li><li>åœ¨å½“å‰æ–¹æ³•æ ˆå¸§çš„æœ¬åœ°å˜é‡è¡¨ä¸­æ”¾ç½®ä¸€ä¸ªreferenceæŒ‡é’ˆ</li><li>åœ¨å †ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œæ”¾è¿™ä¸ªå¯¹è±¡çš„å®ä¾‹</li><li>å°†æŒ‡é’ˆæŒ‡å‘å †é‡Œå¯¹è±¡çš„åœ°å€ï¼Œå®Œå·¥ï¼</li></ul><h1 id="_5ã€å¯¹è±¡åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_5ã€å¯¹è±¡åˆ›å»º"><span>5ã€å¯¹è±¡åˆ›å»º</span></a></h1><p>å‰é¢æˆ‘ä»¬ä»‹ç»çš„æ˜¯ä»classå­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°jvmå†…å­˜çš„è¿‡ç¨‹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹jvmé‡Œçš„ä»£ç è·‘èµ·æ¥ä»¥åï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯åœ¨å†…å­˜ä¸­ç»å†äº†ä»€ä¹ˆæ ·çš„äº‹æƒ…ã€‚</p><h2 id="_5-1-å¯¹è±¡åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_5-1-å¯¹è±¡åˆ›å»º"><span>5.1 å¯¹è±¡åˆ›å»º</span></a></h2><h3 id="_5-1-1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_5-1-1-æ¦‚è¿°"><span>5.1.1 æ¦‚è¿°</span></a></h3><p>ä»ä½ newä¸€ä¸ªå¯¹è±¡å¼€å§‹ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><p>é‡åˆ°newæŒ‡ä»¤ï¼Œjvmé¦–å…ˆè¦åšçš„äº‹æ˜¯æ£€æŸ¥æœ‰æ²¡æœ‰è¿™ä¸ªç±»ï¼Œæ²¡æœ‰çš„è¯ï¼ŒåŠ è½½å®ƒï¼</p><h3 id="_5-1-2-å†…å­˜åˆ†é…" tabindex="-1"><a class="header-anchor" href="#_5-1-2-å†…å­˜åˆ†é…"><span>5.1.2 å†…å­˜åˆ†é…</span></a></h3><p>ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œå°±è¦ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜ã€‚</p><p>å› ä¸ºä¸€ä¸ªç±»å‹ç¡®å®šåï¼Œå®ƒå†…éƒ¨å®šä¹‰äº†å“ªäº›ç»“æ„å“ªäº›å€¼ï¼Œæ‰€éœ€è¦çš„å†…å­˜ç©ºé—´ä¹Ÿå°±ç¡®å®šäº†ã€‚å…ˆç»™ä»–åˆ’å‡ºæ¥ã€‚</p><p>ï¼ˆå…·ä½“å¯¹è±¡çš„å†…å­˜å¸ƒå±€ï¼Œåœ¨ä¸‹ä¸€å°èŠ‚ï¼‰</p><p>ä½†æ˜¯è¿™ä¸ªå†…å­˜åˆ†é…ï¼Œå…·ä½“æ€ä¹ˆåˆ’å‡ºæ¥ï¼Œæœ‰ä¸åŒçš„æ–¹å¼ï¼š</p><p>1ï¼‰æŒ‡é’ˆç¢°æ’ï¼ˆBump The Pointerï¼‰</p><p>è¿™ç§åˆ†é…å‰ææ˜¯å†…å­˜ä¸­æœ‰æ•´ç‰‡è¿ç»­çš„ç©ºé—´ï¼Œç”¨çš„åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„åœ¨å¦ä¸€è¾¹ï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘åˆ†ç•Œçº¿ã€‚</p><p>éœ€è¦å¤šå°‘æŒ‡é’ˆå¾€ç©ºé—²é‚£è¾¹ç§»åŠ¨å¤šå°‘ï¼Œç›´æ¥åˆ’åˆ†å‡ºæ¥ä¸€æ®µï¼Œç»™å½“å‰å¯¹è±¡ï¼Œå®Œå·¥ã€‚</p><p><img src="`+js+'" alt="image-20210331153504656"></p><p>2ï¼‰ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰</p><p>é‚£å¦‚æœjvmå †ä¸é‚£ä¹ˆè§„æ•´å‘¢ï¼Ÿç”¨çš„å’Œæ²¡ç”¨çš„äº¤å‰åœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å†…å­˜ç¢ç‰‡ã€‚</p><p>è¿™ç§æƒ…å†µå°±éœ€è¦æˆ‘ä»¬å•ç‹¬æœ‰ä¸€å¼ è¡¨æ¥è®°å½•ï¼Œå“ªäº›å†…å­˜å—æ˜¯ç©ºçš„ã€‚</p><p>åˆ†é…çš„æ—¶å€™æŸ¥è¡¨ï¼Œæ‰¾åˆ°å¤§å°å¤Ÿç”¨çš„ä¸€å—ï¼Œåˆ†é…ç»™å¯¹è±¡ï¼ŒåŒæ—¶æ›´æ–°åˆ—è¡¨ã€‚</p><p>å…·ä½“å“ªç§æ–¹å¼ï¼Œå’Œæˆ‘ä»¬çš„åƒåœ¾å›æ”¶å™¨æœ‰å…³ç³»ã€‚æœ‰çš„åƒåœ¾å›æ”¶å™¨ä¼šå¯¹å†…å­˜åšæ•´ç†å‹ç¼©ï¼Œé‚£å°±æŒ‡é’ˆç¢°æ’ç®€å•é«˜æ•ˆã€‚å¦‚æœæ²¡æœ‰å‹ç¼©åŠŸèƒ½ï¼Œé‚£åªèƒ½æ˜¯é‡‡ç”¨ç©ºé—²åˆ—è¡¨</p><p>è¿™éƒ¨åˆ†è¯¦ç»†çš„åƒåœ¾å›æ”¶åœ¨ä¸‹é¢çš„ç¬¬6å°èŠ‚ï¼ˆå†…å®¹å¾ˆå¤šï¼ï¼‰</p><p>3ï¼‰å¹¶å‘æ€§</p><p>æ— è®ºæŒ‡é’ˆç§»åŠ¨è¿˜æ˜¯ç©ºé—²åˆ—è¡¨çš„åŒä¸€ä¸ªæŒ‡é’ˆç©ºé—´ï¼Œåœ¨å¹¶å‘åˆ†é…çš„æƒ…å†µä¸‹ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Ÿ</p><p>å¾ˆèªæ˜ï¼ç¡®å®æœ‰å¹¶å‘é—®é¢˜ã€‚é‚£jvmæ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ</p><p>æ–¹å¼ä¸€ï¼šcasåŸå­æ“ä½œ + å¤±è´¥é‡è¯•</p><p><img src="'+Ss+'" alt="image-20210331160410760"></p><p>æ–¹å¼äºŒï¼šæœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆTLABï¼‰</p><p>å…¨ç§°æ˜¯ Thread Local Allocation Bufferï¼Œéœ€è¦ -XX:+/-UseTLAB</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ ˆã€è®¡æ•°å™¨ï¼Œæ¯ä¸ªçº¿ç¨‹ç‹¬äº«ï¼Œå †æ˜¯å…±äº«çš„ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è®©çº¿ç¨‹åœ¨åˆ›å»ºæ—¶ï¼Œå…ˆç‹¬äº«åˆ’èµ°ä¸€éƒ¨åˆ†å †ã€‚</p><p>é‚£ä¹ˆçº¿ç¨‹åˆ›å»ºå¯¹è±¡éœ€è¦å†…å­˜æ—¶ï¼Œå¯ä»¥åœ¨è‡ªå·±åˆ’èµ°çš„å †ä¸Šå…ˆæ“ä½œã€‚ç›¸å½“äºæ¯ä¸ªçº¿ç¨‹æ‰¹å‘äº†ä¸€æ‰¹å†…å­˜å…ˆç”¨ç€ã€‚</p><p>å½“å‰çº¿ç¨‹ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œå†å»å…¬å…±å †ä¸Šç”³è¯·ï¼Œè¿™æ ·å°±å‡å°‘äº†å¹¶å‘å†²çªçš„æœºä¼šã€‚å½“ç„¶ä¹Ÿå¤šå°‘æœ‰ç‚¹æµªè´¹</p><h2 id="_5-2-å†…å­˜å¸ƒå±€" tabindex="-1"><a class="header-anchor" href="#_5-2-å†…å­˜å¸ƒå±€"><span>5.2 å†…å­˜å¸ƒå±€</span></a></h2><p>ä¸Šé¢æˆ‘ä»¬ç»™è¿™ä¸ªå¯¹è±¡åˆ†é…å¥½äº†å†…å­˜ç©ºé—´ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚å¯¹è±¡æ‹¿èµ°çš„è¿™å—å†…å­˜ï¼Œå®ƒéƒ½å†™äº†äº›å•¥è¿›å»å‘¢ï¼Ÿ</p><p>å¯¹è±¡åœ¨å †ä¸Šçš„å¸ƒå±€ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå¯¹è±¡å¤´ã€å®ä¾‹æ•°æ®ã€å¯¹é½å¡«å……ã€‚</p><p><img src="'+Xs+'" alt="image-20210331164644697"></p><p><img src="'+Ms+'" alt="image-20230928164306371"></p><h3 id="_5-2-1-å¯¹è±¡å¤´" tabindex="-1"><a class="header-anchor" href="#_5-2-1-å¯¹è±¡å¤´"><span>5.2.1 å¯¹è±¡å¤´</span></a></h3><p>å¯¹è±¡å¤´ä¸€èˆ¬åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ŒMark Word å’Œ ç±»å‹æŒ‡é’ˆï¼ˆHotspotï¼‰</p><p>1ï¼‰Mark Wordï¼Œå®˜æ–¹å«æ³•ï¼Œå…¶å®å°±æ˜¯å­˜å‚¨å¯¹è±¡è‡ªå·±è¿è¡Œæ—¶çš„æ•°æ®</p><p>å¦‚å“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡è®°ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çš„çº¿ç¨‹idâ€¦â€¦ï¼ˆä¸ç”¨è®°ï¼‰</p><p>2ï¼‰ç±»å‹æŒ‡é’ˆ</p><p>æŒ‡å‘å½“å‰å¯¹è±¡çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯æ–¹æ³•åŒºé‡Œï¼Œç±»ä¿¡æ¯çš„åœ°å€ã€‚</p><p>å½“ç„¶è¿™é‡Œä¸æ˜¯ç»å¯¹çš„ï¼Œhotspotè¿™ä¹ˆè®¾è®¡ã€‚åœ¨5.3å¯¹è±¡è®¿é—®ä¸€èŠ‚ï¼Œè¿˜ä¼šçœ‹åˆ°å…¶ä»–æ–¹å¼ã€‚</p><h3 id="_5-2-2-å®ä¾‹æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_5-2-2-å®ä¾‹æ•°æ®"><span>5.2.2 å®ä¾‹æ•°æ®</span></a></h3><p>å¯¹è±¡é‡Œå„ä¸ªå­—æ®µçš„å€¼ã€‚è¿™ä¸ªå¥½ç†è§£ã€‚</p><p>longï¼Œdoubleï¼Œintç­‰é•¿åº¦éƒ½æ˜¯å›ºå®šçš„</p><p>stringã€å¯¹è±¡ç±»å‹ç­‰æ˜¯ä¸ªåœ°å€ï¼ŒæŒ‡å‘å…¶ä»–å¤–éƒ¨å †ç©ºé—´</p><h3 id="_5-2-3-å¯¹é½å¡«å……" tabindex="-1"><a class="header-anchor" href="#_5-2-3-å¯¹é½å¡«å……"><span>5.2.3 å¯¹é½å¡«å……</span></a></h3><p>ä¸æ˜¯å¿…é¡»çš„ã€‚å°±æ˜¯ä¸ªå ä½ç¬¦è€Œå·²ã€‚</p><p>Hotspotè§„å®šçš„ï¼Œå†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ã€‚</p><p>è¿™ä¸ªåœ¨å¯¹è±¡å¤´ä¸Šï¼Œå·²ç»è¢«ç²¾å¿ƒè®¾è®¡è¿‡ï¼Œæ»¡è¶³è¦æ±‚ã€‚</p><p>ä½†æ˜¯ï¼å®ä¾‹æ•°æ®éƒ¨åˆ†ä¸ä¸€å®šã€‚å¦‚æœæ²¡æœ‰å¯¹é½çš„è¯ï¼Œé€šè¿‡è¿™é‡Œçš„å¯¹é½å¡«å……è¡¥æ»¡å®ƒã€‚æ²¡æœ‰åˆ«çš„æ„ä¹‰ã€‚</p><h2 id="_5-3-å¯¹è±¡çš„è®¿é—®" tabindex="-1"><a class="header-anchor" href="#_5-3-å¯¹è±¡çš„è®¿é—®"><span>5.3 å¯¹è±¡çš„è®¿é—®</span></a></h2><p>å¯¹è±¡åˆ›å»ºäº†ï¼Œå°±è¦ç”¨ï¼Œå®ƒåœ¨å †é‡Œã€‚</p><p>æˆ‘ä»¬çš„ç¨‹åºè¿è¡Œæ—¶ï¼Œå¤§å®¶çŸ¥é“ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•ç›¸å…³çš„å˜é‡ä¿¡æ¯éƒ½åœ¨æ ˆé‡Œã€‚é‚£ä¹ˆæ€ä¹ˆæ‰¾åˆ°è¿™ä¸ªå¯¹è±¡å‘¢ï¼Ÿ</p><p>ä¸€èˆ¬æ¥è®²ï¼Œä¸¤ç§æ–¹æ¡ˆï¼š</p><h3 id="_5-3-1-å¥æŸ„è®¿é—®" tabindex="-1"><a class="header-anchor" href="#_5-3-1-å¥æŸ„è®¿é—®"><span>5.3.1 å¥æŸ„è®¿é—®</span></a></h3><p><img src="'+Gs+'" alt="image-20210331114434625"></p><p>å¥æŸ„æ–¹å¼ï¼š</p><p>æ ˆæŒ‡é’ˆæŒ‡å‘å †é‡Œçš„ä¸€ä¸ªå¥æŸ„çš„åœ°å€ï¼Œè¿™ä¸ªå¥æŸ„å†å®šä¹‰ä¿©æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ç±»å‹å’Œå®ä¾‹</p><p>å¾ˆæ˜¾ç„¶ï¼Œåƒåœ¾å›æ”¶ç§»åŠ¨å¯¹è±¡çš„è¯åªéœ€è¦æ”¹å¥æŸ„å³å¯ï¼Œä¸ä¼šæ³¢åŠåˆ°æ ˆï¼Œä½†æ˜¯å¤šäº†ä¸€æ¬¡å¯»å€æ“ä½œ</p><h3 id="_5-3-2-ç›´æ¥åœ°å€" tabindex="-1"><a class="header-anchor" href="#_5-3-2-ç›´æ¥åœ°å€"><span>5.3.2 ç›´æ¥åœ°å€</span></a></h3><p><img src="'+zs+`" alt="image-20210331114645139"></p><p>ç›´æ¥åœ°å€ï¼š</p><p>æ ˆæŒ‡é’ˆæŒ‡å‘çš„å°±æ˜¯å®ä¾‹æœ¬èº«çš„åœ°å€ï¼Œåœ¨å®ä¾‹é‡Œå°è£…ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒè‡ªå·±çš„ç±»å‹</p><p>å¾ˆæ˜¾ç„¶ï¼Œåƒåœ¾å›æ”¶ç§»åŠ¨å¯¹è±¡è¦æ”¹æ ˆé‡Œçš„åœ°å€å€¼ï¼Œä½†æ˜¯å®ƒå‡å°‘äº†ä¸€æ¬¡å¯»å€æ“ä½œã€‚</p><p><em>å¤‡æ³¨ï¼šhostspotä½¿ç”¨çš„æ˜¯ç›´æ¥åœ°å€æ–¹å¼</em></p><h1 id="_6ã€å¯¹è±¡çš„é”€æ¯" tabindex="-1"><a class="header-anchor" href="#_6ã€å¯¹è±¡çš„é”€æ¯"><span>6ã€å¯¹è±¡çš„é”€æ¯</span></a></h1><p>javaè¯­è¨€å¼€å§‹å­¦ä¹ çš„æ—¶å€™ï¼Œå°±éª„å‚²çš„å‘Šè¯‰å¤§å®¶ä½œä¸ºä¸€ä¸ªjavaç¨‹åºå‘˜æˆ‘ä»¬å…·æœ‰c++ä»¬ç¾¡æ…•ä¸å·²çš„æŠ€èƒ½ï¼šä¸ç”¨å…³å¿ƒå†…å­˜æ˜¯æ€ä¹ˆæ”¶å›æ¥çš„ã€‚</p><p>å‰é¢è®²çš„éƒ½æ˜¯ç±»ã€å¯¹è±¡æ˜¯æ€ä¹ˆæ¥çš„ï¼Œè¿™èŠ‚æˆ‘ä»¬è®²è®²å®ƒæ˜¯æ€ä¹ˆæ²¡çš„ã€‚</p><h2 id="_6-1-jvmå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_6-1-jvmå‚æ•°"><span>6.1 jvmå‚æ•°</span></a></h2><p>åœ¨å­¦åƒåœ¾å›æ”¶å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦çŸ¥é“ï¼Œjvmå‚æ•°æ˜¯æ€ä¹ˆå›äº‹ã€‚å› ä¸ºé…ç½®å„ç§å›æ”¶å™¨ï¼Œå¿…é¡»å¯¹åº”å„ç§å‚æ•°è®¾ç½®ã€‚</p><p>åœ¨jvmä¸­æœ‰å¾ˆå¤šçš„å‚æ•°å¯ä»¥è¿›è¡Œè®¾ç½®ï¼Œç»å¤§éƒ¨åˆ†çš„å‚æ•°ä¿æŒé»˜è®¤å³å¯ã€‚</p><h3 id="_6-1-1-åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_6-1-1-åˆ†ç±»"><span>6.1.1 åˆ†ç±»</span></a></h3><p>jvmçš„å‚æ•°ç±»å‹çœ‹ä¸Šå»æ‚ä¹±ï¼Œå…¶å®ä¸€å…±å°±ä¸‰ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><p>æ ‡å‡†å‚æ•°ï¼ˆ-ï¼‰</p><p>æ‰€æœ‰çš„JVMå®ç°éƒ½å¿…é¡»å®ç°è¿™äº›å‚æ•°çš„åŠŸèƒ½ï¼Œè€Œä¸”å‘åå…¼å®¹</p><ul><li>-help</li><li>-version</li></ul></li><li><p>éæ ‡å‡†å‚æ•°ï¼ˆ-Xï¼‰</p><p>é»˜è®¤jvmå®ç°è¿™äº›å‚æ•°çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯æ‰€æœ‰jvmå®ç°éƒ½æ»¡è¶³ï¼Œä¸”ä¸ä¿è¯å‘åå…¼å®¹</p><ul><li>-Xint</li><li>-Xcomp</li></ul></li><li><p>éStableå‚æ•°ï¼ˆ-XXï¼‰</p><p>å„ä¸ªjvmå®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå°†æ¥å¯èƒ½ä¼šéšæ—¶å–æ¶ˆï¼Œéœ€è¦æ…é‡ä½¿ç”¨</p><ul><li>-XX:newSize</li><li>-XX:+UseSerialGC</li></ul></li></ul><blockquote><p>åœ¨ä½¿ç”¨Xæˆ–XXå‚æ•°çš„æ—¶å€™ï¼Œä¸€å®šè¦å…ˆçŸ¥é“è‡ªå·±çš„jdkç‰ˆæœ¬ï¼Œå¹¶æŸ¥å¯¹åº”çš„æ‰‹å†Œç¡®è®¤ã€‚</p></blockquote><h3 id="_6-1-2-æ ‡å‡†å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_6-1-2-æ ‡å‡†å‚æ•°"><span>6.1.2 æ ‡å‡†å‚æ•°</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p>jvmçš„æ ‡å‡†å‚æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯å¾ˆç¨³å®šçš„ï¼Œåœ¨æœªæ¥çš„JVMç‰ˆæœ¬ä¸­ä¸ä¼šæ”¹å˜ã€‚</p><p>ä½¿ç”¨<code>java -help</code>åˆ—å‡ºæ¥çš„å°±æ˜¯æ ‡å‡†å‚æ•°ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#æ‰“å°å¸®åŠ©ä¿¡æ¯</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -help</span></span>
<span class="line"><span>ç”¨æ³•ï¼šjava [options] &lt;ä¸»ç±»&gt; [args...]</span></span>
<span class="line"><span>           ï¼ˆæ‰§è¡Œç±»ï¼‰</span></span>
<span class="line"><span>   æˆ–  java [options] -jar &lt;jar æ–‡ä»¶&gt; [args...]</span></span>
<span class="line"><span>           ï¼ˆæ‰§è¡Œ jar æ–‡ä»¶ï¼‰</span></span>
<span class="line"><span>â€¦â€¦</span></span>
<span class="line"><span>æ­¤å¤„çœç•¥nè¡Œ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›¾ç‰‡æ•ˆæœï¼š</p><p><img src="`+qs+`" alt="image-20220830175025468"></p><p>2ï¼‰å®ä¾‹ä¸€</p><p>æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„jdkç‰ˆæœ¬æŸ¥çœ‹ <code>java -version</code></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">shawn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">macpro</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">version</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">java version </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">11.0.2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2019</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">01</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">15</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LTS   #ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">TM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> SE Runtime Environment </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">18.9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">build </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11.0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">9</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Java </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HotSpot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">TM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 64</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Bit Server VM </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">18.9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">build </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">11.0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">9</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> mixed mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  #è¿è¡Œæ¨¡å¼ï¼šserver</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™„ï¼šå…³äºè¿è¡Œæ¨¡å¼ï¼ˆäº†è§£ï¼‰</p><p>å¯ä»¥é€šè¿‡<code>-server</code>æˆ–<code>-client</code>è®¾ç½®JVMçš„è¿è¡Œå‚æ•°</p><ul><li>Server VMçš„åˆå§‹å †ç©ºé—´ä¼šå¤§ä¸€äº›ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å¹¶è¡Œåƒåœ¾å›æ”¶æœŸï¼Œå¯åŠ¨æ…¢è¿è¡Œå¿«ã€‚</li><li>Client VMç›¸å¯¹æ¥è®²ä¼šä¿å®ˆä¸€äº›ï¼Œåˆå§‹å †ç©ºé—´ä¼šå°ä¸€äº›ï¼Œä½¿ç”¨çš„æ˜¯ä¸²è¡Œåƒåœ¾å›æ”¶æœŸï¼Œå¯åŠ¨å¿«è¿è¡Œæ…¢ã€‚</li><li>JVMåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæ ¹æ®ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ä½¿ç”¨Serverè¿˜æ˜¯Clientç±»å‹çš„JVMã€‚</li><li>32ä½æ“ä½œç³»ç»Ÿ <ul><li>å¦‚æœæ˜¯Windowsç³»ç»Ÿï¼Œä¸è®ºç¡¬ä»¶é…ç½®å¦‚ä½•ï¼Œéƒ½é»˜è®¤ä½¿ç”¨Clientç±»å‹çš„JVMã€‚</li><li>å¦‚æœæ˜¯å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šï¼Œ2Gï¼Œ2æ ¸ä»¥ä¸Šé»˜è®¤ä½¿ç”¨serveræ¨¡å¼ï¼Œå¦åˆ™ä½¿ç”¨clientæ¨¡å¼ã€‚</li></ul></li><li>64ä½æ“ä½œç³»ç»Ÿ <ul><li>åªæœ‰serverç±»å‹ï¼Œä¸æ”¯æŒclientç±»å‹ã€‚</li></ul></li></ul><p><img src="`+Js+`" alt="image-20220830180020170"></p><p>ps: <code>-showversion</code>å±•ç¤ºç‰ˆæœ¬</p><p>3ï¼‰å®ä¾‹äºŒ</p><p>é€šè¿‡<code>-D</code>è®¾ç½®ç³»ç»Ÿå±æ€§å‚æ•°</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> TestJVM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        //è·å–å‘½ä»¤è¡Œ -Dè®¾ç½®çš„å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getProperty</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">str</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Ts+'" alt="image-20220830175226283"></p><p>å°†ä¼šè¾“å‡ºnbchen</p><p><img src="'+Ps+`" alt="image-20220830175317648"></p><h3 id="_6-1-3-xå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_6-1-3-xå‚æ•°"><span>6.1.3 -Xå‚æ•°</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p>jvmçš„-Xå‚æ•°æ˜¯éæ ‡å‡†å‚æ•°ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„jvmä¸­ï¼Œå‚æ•°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ</p><p>å¯ä»¥é€šè¿‡<code>java -X</code>æŸ¥çœ‹éæ ‡å‡†å‚æ•°</p><p>è¿™éƒ¨åˆ†å‚æ•°éå¸¸å¤šï¼ŒçŸ¥é“å¸¸ç”¨çš„å‡ ä¸ªå³å¯</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>[root@node01 test]# java -X</span></span>
<span class="line"><span>    -Xmixed           æ··åˆæ¨¡å¼æ‰§è¡Œ (é»˜è®¤)  #äº†è§£ï¼</span></span>
<span class="line"><span>    -Xint             ä»…è§£é‡Šæ¨¡å¼æ‰§è¡Œ  #äº†è§£ï¼</span></span>
<span class="line"><span>    -Xbootclasspath:&lt;ç”¨ : åˆ†éš”çš„ç›®å½•å’Œ zip/jar æ–‡ä»¶&gt;</span></span>
<span class="line"><span>                      è®¾ç½®æœç´¢è·¯å¾„ä»¥å¼•å¯¼ç±»å’Œèµ„æº</span></span>
<span class="line"><span>    -Xbootclasspath/a:&lt;ç”¨ : åˆ†éš”çš„ç›®å½•å’Œ zip/jar æ–‡ä»¶&gt;</span></span>
<span class="line"><span>                      é™„åŠ åœ¨å¼•å¯¼ç±»è·¯å¾„æœ«å°¾</span></span>
<span class="line"><span>    -Xbootclasspath/p:&lt;ç”¨ : åˆ†éš”çš„ç›®å½•å’Œ zip/jar æ–‡ä»¶&gt;</span></span>
<span class="line"><span>                      ç½®äºå¼•å¯¼ç±»è·¯å¾„ä¹‹å‰</span></span>
<span class="line"><span>    -Xdiag            æ˜¾ç¤ºé™„åŠ è¯Šæ–­æ¶ˆæ¯</span></span>
<span class="line"><span>    -Xnoclassgc       ç¦ç”¨ç±»åƒåœ¾æ”¶é›†</span></span>
<span class="line"><span>    -Xincgc           å¯ç”¨å¢é‡åƒåœ¾æ”¶é›†</span></span>
<span class="line"><span>    -Xloggc:&lt;file&gt;    å°† GC çŠ¶æ€è®°å½•åœ¨æ–‡ä»¶ä¸­ (å¸¦æ—¶é—´æˆ³)</span></span>
<span class="line"><span>    -Xbatch           ç¦ç”¨åå°ç¼–è¯‘</span></span>
<span class="line"><span>    -Xms&lt;size&gt;        è®¾ç½®åˆå§‹ Java å †å¤§å°     #æŒæ¡ï¼</span></span>
<span class="line"><span>    -Xmx&lt;size&gt;        è®¾ç½®æœ€å¤§ Java å †å¤§å°     #æŒæ¡ï¼</span></span>
<span class="line"><span>    -Xss&lt;size&gt;        è®¾ç½® Java çº¿ç¨‹å †æ ˆå¤§å°   #æŒæ¡ï¼</span></span>
<span class="line"><span>    -Xprof            è¾“å‡º cpu é…ç½®æ–‡ä»¶æ•°æ®</span></span>
<span class="line"><span>    -Xfuture          å¯ç”¨æœ€ä¸¥æ ¼çš„æ£€æŸ¥, é¢„æœŸå°†æ¥çš„é»˜è®¤å€¼</span></span>
<span class="line"><span>    -Xrs              å‡å°‘ Java/VM å¯¹æ“ä½œç³»ç»Ÿä¿¡å·çš„ä½¿ç”¨ (è¯·å‚é˜…æ–‡æ¡£)</span></span>
<span class="line"><span>    -Xcheck:jni       å¯¹ JNI å‡½æ•°æ‰§è¡Œå…¶ä»–æ£€æŸ¥</span></span>
<span class="line"><span>    -Xshare:off       ä¸å°è¯•ä½¿ç”¨å…±äº«ç±»æ•°æ®</span></span>
<span class="line"><span>    -Xshare:auto      åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ä½¿ç”¨å…±äº«ç±»æ•°æ® (é»˜è®¤)</span></span>
<span class="line"><span>    -Xshare:on        è¦æ±‚ä½¿ç”¨å…±äº«ç±»æ•°æ®, å¦åˆ™å°†å¤±è´¥ã€‚</span></span>
<span class="line"><span>    -XshowSettings    æ˜¾ç¤ºæ‰€æœ‰è®¾ç½®å¹¶ç»§ç»­</span></span>
<span class="line"><span>    -XshowSettings:all</span></span>
<span class="line"><span>                      æ˜¾ç¤ºæ‰€æœ‰è®¾ç½®å¹¶ç»§ç»­</span></span>
<span class="line"><span>    -XshowSettings:vm æ˜¾ç¤ºæ‰€æœ‰ä¸ vm ç›¸å…³çš„è®¾ç½®å¹¶ç»§ç»­</span></span>
<span class="line"><span>    -XshowSettings:properties</span></span>
<span class="line"><span>                      æ˜¾ç¤ºæ‰€æœ‰å±æ€§è®¾ç½®å¹¶ç»§ç»­</span></span>
<span class="line"><span>    -XshowSettings:locale</span></span>
<span class="line"><span>                      æ˜¾ç¤ºæ‰€æœ‰ä¸åŒºåŸŸè®¾ç½®ç›¸å…³çš„è®¾ç½®å¹¶ç»§ç»­</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-X é€‰é¡¹æ˜¯éæ ‡å‡†é€‰é¡¹, å¦‚æœ‰æ›´æ”¹, æ•ä¸å¦è¡Œé€šçŸ¥ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›¾ç‰‡æ•ˆæœï¼š</p><p><img src="`+Os+`" alt="image-20220830180208969"></p><p>2ï¼‰æ¡ˆä¾‹ä¸€ï¼š<code>-Xint</code>ã€<code>-Xcomp</code>ã€<code>-Xmixed</code></p><ul><li><p>åœ¨è§£é‡Šæ¨¡å¼(interpreted mode)ä¸‹ï¼Œ<code>-Xint</code>æ ‡è®°ä¼šå¼ºåˆ¶JVMæ‰§è¡Œæ‰€æœ‰çš„å­—èŠ‚ç ï¼Œå½“ç„¶è¿™ä¼šé™ä½è¿è¡Œé€Ÿåº¦ï¼Œé€šå¸¸ä½10å€æˆ–æ›´å¤šã€‚</p></li><li><p><code>-Xcomp</code>å‚æ•°ä¸å®ƒï¼ˆ-Xintï¼‰æ­£å¥½ç›¸åï¼ŒJVMåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¼šæŠŠæ‰€æœ‰çš„å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œä»è€Œå¸¦æ¥æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–ã€‚</p><ul><li>ç„¶è€Œï¼Œå¾ˆå¤šåº”ç”¨åœ¨ä½¿ç”¨-Xcompä¹Ÿä¼šæœ‰ä¸€äº›æ€§èƒ½æŸå¤±ï¼Œå½“ç„¶è¿™æ¯”ä½¿ç”¨-XintæŸå¤±çš„å°‘ï¼ŒåŸå› æ˜¯-xcompæ²¡æœ‰è®©JVMå¯ç”¨JITç¼–è¯‘å™¨çš„å…¨éƒ¨åŠŸèƒ½ã€‚JITç¼–è¯‘å™¨å¯ä»¥å¯¹æ˜¯å¦éœ€è¦ç¼–è¯‘åšåˆ¤æ–­ï¼Œå¦‚æœæ‰€æœ‰ä»£ç éƒ½è¿›è¡Œç¼–è¯‘çš„è¯ï¼Œå¯¹äºä¸€äº›åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚</li></ul></li><li><p><code>-Xmixed</code>æ˜¯æ··åˆæ¨¡å¼ï¼Œå°†è§£é‡Šæ¨¡å¼ä¸ç¼–è¯‘æ¨¡å¼è¿›è¡Œæ··åˆä½¿ç”¨ï¼Œç”±jvmè‡ªå·±å†³å®šï¼Œ<strong>è¿™æ˜¯jvmé»˜è®¤çš„æ¨¡å¼ï¼Œä¹Ÿæ˜¯æ¨èä½¿ç”¨çš„æ¨¡å¼ã€‚</strong></p></li></ul><p>ç¤ºä¾‹ï¼šå¼ºåˆ¶è®¾ç½®è¿è¡Œæ¨¡å¼</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#å¼ºåˆ¶è®¾ç½®ä¸ºè§£é‡Šæ¨¡å¼</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -Xint -version</span></span>
<span class="line"><span>java version &quot;11.0.2&quot; 2019-01-15 LTS</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment 18.9 (build 11.0.2+9-LTS)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.2+9-LTS, interpreted mode)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#å¼ºåˆ¶è®¾ç½®ä¸ºç¼–è¯‘æ¨¡å¼</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -Xcomp -version</span></span>
<span class="line"><span>java version &quot;11.0.2&quot; 2019-01-15 LTS</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment 18.9 (build 11.0.2+9-LTS)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.2+9-LTS, compiled mode)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#é»˜è®¤çš„æ··åˆæ¨¡å¼</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -Xmixed -version</span></span>
<span class="line"><span>java version &quot;11.0.2&quot; 2019-01-15 LTS</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment 18.9 (build 11.0.2+9-LTS)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.2+9-LTS, mixed mode)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›¾ç‰‡æ•ˆæœï¼š</p><p><img src="`+ws+'" alt="image-20220830180550626"></p><p>3ï¼‰æ¡ˆä¾‹äºŒï¼š-Xmsä¸-Xmxå‚æ•°</p><p><code>-Xms</code>ä¸<code>-Xmx</code>åˆ†åˆ«æ˜¯è®¾ç½®jvmçš„å †å†…å­˜çš„åˆå§‹å¤§å°å’Œæœ€å¤§å¤§å°ã€‚</p><ul><li><code>-Xmx2048m</code>ï¼šç­‰ä»·äº<code>-XX:MaxHeapSize</code>ï¼Œè®¾ç½®JVM<strong>æœ€å¤§å †å†…å­˜</strong>ä¸º2048Mã€‚</li><li><code>-Xms512m</code>ï¼šç­‰ä»·äº<code>-XX:InitialHeapSize</code>ï¼Œè®¾ç½®JVM<strong>åˆå§‹å †å†…å­˜</strong>ä¸º512Mã€‚</li></ul><p><img src="'+Ks+`" alt="image-20220830181511968"></p><p>å…·ä½“æ¡ˆä¾‹å‰é¢è®¾ç½®æº¢å‡ºçš„æ—¶å€™é…ç½®è¿‡ï¼Œä¸å†èµ˜è¿°ã€‚</p><p>æ¯”å¦‚åˆ†é…ï¼š-Xmx20m -Xms5m</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">print</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Xmx=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getRuntime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">maxMemory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024.0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">M</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // Xmx=19.375M</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">print</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">free mem=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getRuntime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">freeMemory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024.0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">M</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // free mem=4.342750549316406M</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">print</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">total mem=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getRuntime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">totalMemory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024.0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">M</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // total mem=4.875M</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">----------------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">];</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">åˆ†é…äº†1Mç©ºé—´ç»™æ•°ç»„</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">åˆ†é…äº†1Mç©ºé—´ç»™æ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Xmx</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">19</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">375M</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">free mem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">4791183471679688M</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">total mem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">875M</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Javaä¼šå°½å¯èƒ½ç»´æŒåœ¨æœ€å°å †</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">----------------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">];</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">åˆ†é…äº†4Mç©ºé—´ç»™æ•°ç»„</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">åˆ†é…äº†4Mç©ºé—´ç»™æ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Xmx</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">19</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">375M</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">free mem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">5899810791015625M</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">total mem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">00390625M</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ€»å†…å­˜å˜å¤šäº†</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">----------------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gc</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">å›æ”¶å†…å­˜</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Xmx</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">19</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">375M</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">free mem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">354591369628906M</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> //ç©ºé—²å†…å­˜å¢å¤š</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">total mem</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">75390625M</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€è€ƒï¼š</p><ul><li><code>-Xmx</code> å’Œ <code>â€“Xms</code> åº”è¯¥ä¿æŒä¸€ä¸ªä»€ä¹ˆå…³ç³»ï¼Œå¯ä»¥è®©ç³»ç»Ÿçš„æ€§èƒ½å°½å¯èƒ½çš„å¥½å‘¢ï¼Ÿ</li><li>å¦‚æœä½ è¦åšä¸€ä¸ªJavaçš„æ¡Œé¢äº§å“ï¼Œéœ€è¦ç»‘å®šJREï¼Œä½†æ˜¯JREåˆå¾ˆå¤§ï¼Œä½ å¦‚ä½•åšä¸€ä¸‹JREçš„ç˜¦èº«å‘¢ï¼Ÿ</li></ul><h3 id="_6-1-4-xxå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_6-1-4-xxå‚æ•°"><span>6.1.4 -XXå‚æ•°</span></a></h3><p>-XXå‚æ•°ä¹Ÿæ˜¯éæ ‡å‡†å‚æ•°ï¼Œä¸»è¦ç”¨äºæ”¹å˜jvmçš„ä¸€äº›åŸºç¡€è¡Œä¸ºï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶è¡Œä¸ºã€jvmçš„è°ƒä¼˜ã€è¾“å‡ºdebugè°ƒè¯•ä¿¡æ¯ç­‰ã€‚</p><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹ï¼ˆéå¸¸å¤šï¼ï¼‰ï¼š</p><ul><li>java <code>-XX:+PrintFlagsFinal</code> ï¼š è¢«ä¿®æ”¹è¿‡ï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®</li><li>java <code>-XX:+PrintFlagsInitial</code> ï¼š jvmåˆå§‹åŒ–çš„é…ç½®</li></ul><p><code>-XX</code>å‚æ•°çš„ä½¿ç”¨æœ‰2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯booleanç±»å‹ï¼Œä¸€ç§æ˜¯ébooleanç±»å‹ï¼š</p><ul><li>booleanç±»å‹ <ul><li>æ ¼å¼ï¼š<code>-XX:[+-]&lt;name&gt;</code> è¡¨ç¤ºå¯ç”¨æˆ–ç¦ç”¨<code>&lt;name&gt;</code>å±æ€§.(+è¡¨ç¤ºå¯ç”¨ï¼Œ-è¡¨ç¤ºç¦ç”¨)</li><li>å¦‚ï¼š<code>-XX:+DisableExplicitGC</code> è¡¨ç¤ºç¦ç”¨æ‰‹åŠ¨è°ƒç”¨gcæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨System.gc()æ— æ•ˆ</li></ul></li><li>ébooleanç±»å‹ <ul><li>æ ¼å¼ï¼š<code>-XX:&lt;name&gt;=&lt;value&gt;</code> è¡¨ç¤º<code>&lt;name&gt;</code>å±æ€§çš„å€¼ä¸º<code>&lt;value&gt;</code></li><li>å¦‚ï¼š<code>-XX:NewRatio=4</code> è¡¨ç¤ºæ–°ç”Ÿä»£(eden+2*s)å’Œè€å¹´ä»£çš„æ¯”å€¼ä¸º1:4,å³å¹´è½»ä»£å å †çš„1/5 <ul><li>æ‰©å±•ï¼š<code>-Xmn</code> è®¾ç½®æ–°ç”Ÿä»£å¤§å°</li><li><code>-XX:SurvivorRatio</code>è®¾ç½®ä¸¤ä¸ªSurvivoråŒºå’Œedençš„æ¯”ã€‚8è¡¨ç¤º ä¸¤ä¸ªSurvivor :eden=2:8ï¼Œå³ä¸€ä¸ªSurvivorå å¹´è½»ä»£çš„1/10</li></ul></li></ul></li></ul><p><img src="`+Rs+`" alt="image-20220830181222212"></p><p>è¿™ç±»å‚æ•°çš„æ¡ˆä¾‹ï¼Œä¸‹é¢å¤šå¾—æ˜¯ï¼Œæˆ‘ä»¬åˆ°åƒåœ¾æ”¶é›†ä¸€èŠ‚å†è¯¦ç»†è®²è§£ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#è¡Œä¸ºå‚æ•°(åŠŸèƒ½å¼€å…³)</span></span>
<span class="line"><span>-XX:-DisableExplicitGC  ç¦æ­¢è°ƒç”¨System.gc()ï¼›ä½†jvmçš„gcä»ç„¶æœ‰æ•ˆ</span></span>
<span class="line"><span>-XX:+MaxFDLimit æœ€å¤§åŒ–æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡é™åˆ¶</span></span>
<span class="line"><span>-XX:+ScavengeBeforeFullGC   æ–°ç”Ÿä»£GCä¼˜å…ˆäºFull GCæ‰§è¡Œ</span></span>
<span class="line"><span>-XX:+UseGCOverheadLimit åœ¨æŠ›å‡ºOOMä¹‹å‰é™åˆ¶jvmè€—è´¹åœ¨GCä¸Šçš„æ—¶é—´æ¯”ä¾‹</span></span>
<span class="line"><span>-XX:-UseConcMarkSweepGC å¯¹è€ç”Ÿä»£é‡‡ç”¨å¹¶å‘æ ‡è®°äº¤æ¢ç®—æ³•è¿›è¡ŒGC</span></span>
<span class="line"><span>-XX:-UseParallelGC  å¯ç”¨å¹¶è¡ŒGC</span></span>
<span class="line"><span>-XX:-UseParallelOldGC   å¯¹Full GCå¯ç”¨å¹¶è¡Œï¼Œå½“-XX:-UseParallelGCå¯ç”¨æ—¶è¯¥é¡¹è‡ªåŠ¨å¯ç”¨</span></span>
<span class="line"><span>-XX:-UseSerialGC    å¯ç”¨ä¸²è¡ŒGC</span></span>
<span class="line"><span>-XX:+UseThreadPriorities    å¯ç”¨æœ¬åœ°çº¿ç¨‹ä¼˜å…ˆçº§</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#æ€§èƒ½è°ƒä¼˜</span></span>
<span class="line"><span>-XX:LargePageSizeInBytes=4m è®¾ç½®ç”¨äºJavaå †çš„å¤§é¡µé¢å°ºå¯¸</span></span>
<span class="line"><span>-XX:MaxHeapFreeRatio=70 GCåjavaå †ä¸­ç©ºé—²é‡å çš„æœ€å¤§æ¯”ä¾‹</span></span>
<span class="line"><span>-XX:MaxNewSize=size æ–°ç”Ÿæˆå¯¹è±¡èƒ½å ç”¨å†…å­˜çš„æœ€å¤§å€¼</span></span>
<span class="line"><span>-XX:MaxPermSize=64m è€ç”Ÿä»£å¯¹è±¡èƒ½å ç”¨å†…å­˜çš„æœ€å¤§å€¼</span></span>
<span class="line"><span>-XX:MinHeapFreeRatio=40 GCåjavaå †ä¸­ç©ºé—²é‡å çš„æœ€å°æ¯”ä¾‹</span></span>
<span class="line"><span>-XX:NewRatio=2  æ–°ç”Ÿä»£å†…å­˜å®¹é‡ä¸è€ç”Ÿä»£å†…å­˜å®¹é‡çš„æ¯”ä¾‹</span></span>
<span class="line"><span>-XX:NewSize=2.125m  æ–°ç”Ÿä»£å¯¹è±¡ç”Ÿæˆæ—¶å ç”¨å†…å­˜çš„é»˜è®¤å€¼</span></span>
<span class="line"><span>-XX:ReservedCodeCacheSize=32m   ä¿ç•™ä»£ç å ç”¨çš„å†…å­˜å®¹é‡</span></span>
<span class="line"><span>-XX:ThreadStackSize=512 è®¾ç½®çº¿ç¨‹æ ˆå¤§å°ï¼Œè‹¥ä¸º0åˆ™ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å€¼</span></span>
<span class="line"><span>-XX:+UseLargePages  ä½¿ç”¨å¤§é¡µé¢å†…å­˜</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#è°ƒè¯•å‚æ•°</span></span>
<span class="line"><span>-XX:-CITime æ‰“å°æ¶ˆè€—åœ¨JITç¼–è¯‘çš„æ—¶é—´</span></span>
<span class="line"><span>-XX:ErrorFile=./hs_err_pid&lt;pid&gt;.log ä¿å­˜é”™è¯¯æ—¥å¿—æˆ–è€…æ•°æ®åˆ°æ–‡ä»¶ä¸­</span></span>
<span class="line"><span>-XX:-ExtendedDTraceProbes   å¼€å¯solarisç‰¹æœ‰çš„dtraceæ¢é’ˆ</span></span>
<span class="line"><span>-XX:HeapDumpPath=./java_pid&lt;pid&gt;.hprof  æŒ‡å®šå¯¼å‡ºå †ä¿¡æ¯æ—¶çš„è·¯å¾„æˆ–æ–‡ä»¶å</span></span>
<span class="line"><span>-XX:-HeapDumpOnOutOfMemoryError å½“é¦–æ¬¡é­é‡OOMæ—¶å¯¼å‡ºæ­¤æ—¶å †ä¸­ç›¸å…³ä¿¡æ¯</span></span>
<span class="line"><span>-XX:OnError=&quot;&lt;cmd args&gt;;&lt;cmd args&gt;&quot; å‡ºç°è‡´å‘½ERRORä¹‹åè¿è¡Œè‡ªå®šä¹‰å‘½ä»¤</span></span>
<span class="line"><span>-XX:OnOutOfMemoryError=&quot;&lt;cmd args&gt;;&lt;cmd args&gt;&quot;  å½“é¦–æ¬¡é­é‡OOMæ—¶æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤</span></span>
<span class="line"><span>-XX:-PrintClassHistogram    é‡åˆ°Ctrl+Breakåæ‰“å°ç±»å®ä¾‹çš„æŸ±çŠ¶ä¿¡æ¯ï¼Œä¸jmap -histoåŠŸèƒ½ç›¸åŒ</span></span>
<span class="line"><span>-XX:-PrintConcurrentLocks   é‡åˆ°Ctrl-Breakåæ‰“å°å¹¶å‘é”çš„ç›¸å…³ä¿¡æ¯ï¼Œä¸jstack -låŠŸèƒ½ç›¸åŒ</span></span>
<span class="line"><span>-XX:-PrintCommandLineFlags  æ‰“å°åœ¨å‘½ä»¤è¡Œä¸­å‡ºç°è¿‡çš„æ ‡è®°</span></span>
<span class="line"><span>-XX:-PrintCompilation   å½“ä¸€ä¸ªæ–¹æ³•è¢«ç¼–è¯‘æ—¶æ‰“å°ç›¸å…³ä¿¡æ¯</span></span>
<span class="line"><span>-XX:-PrintGC    æ¯æ¬¡GCæ—¶æ‰“å°ç›¸å…³ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç”¨-verbose:gc</span></span>
<span class="line"><span>-XX:-PrintGCDetails    æ¯æ¬¡GCæ—¶æ‰“å°è¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span>-XX:-PrintGCTimeStamps  æ‰“å°æ¯æ¬¡GCçš„æ—¶é—´æˆ³</span></span>
<span class="line"><span>-XX:-TraceClassLoading  è·Ÿè¸ªç±»çš„åŠ è½½ä¿¡æ¯</span></span>
<span class="line"><span>-XX:-TraceClassLoadingPreorder  è·Ÿè¸ªè¢«å¼•ç”¨åˆ°çš„æ‰€æœ‰ç±»çš„åŠ è½½ä¿¡æ¯</span></span>
<span class="line"><span>-XX:-TraceClassResolution   è·Ÿè¸ªå¸¸é‡æ± </span></span>
<span class="line"><span>-XX:-TraceClassUnloading    è·Ÿè¸ªç±»çš„å¸è½½ä¿¡æ¯</span></span>
<span class="line"><span>-XX:-TraceLoaderConstraints è·Ÿè¸ªç±»åŠ è½½å™¨çº¦æŸçš„ç›¸å…³ä¿¡æ¯</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-1-5-å‚æ•°æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_6-1-5-å‚æ•°æŸ¥è¯¢"><span>6.1.5 å‚æ•°æŸ¥è¯¢</span></a></h3><p>è¿è¡Œæ—¶æ‰“å°å‚æ•°ï¼Œå¯ä»¥é€šè¿‡<code>-XX:+PrintFlagsFinal</code>è®¾ç½®</p><p><img src="`+Ls+`" alt="image-20220830182151723"></p><p>å¦‚æœæƒ³è¦æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„jvmå°±éœ€è¦å€ŸåŠ©äºjinfoå‘½ä»¤æŸ¥çœ‹ã€‚</p><p>1ï¼‰èµ·ä¸€ä¸ªè¿›ç¨‹ï¼Œè®©å®ƒå¤„äºè¿è¡Œä¸­</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> App</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> )</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> throws</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> InterruptedException </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">currentTimeMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æ—¶å¯åŠ¨ä¸€ä¸ªtonmcatï¼Œä¹Ÿæ˜¯Javaè¿›ç¨‹</p><p><img src="`+Vs+`" alt="image-20220830183048287"></p><p>2ï¼‰jpsæŸ¥åˆ°ä»–çš„è¿›ç¨‹å·</p><p>é™¤äº†<code>ps -ef</code>æŸ¥çœ‹æ­£å†è¿è¡Œçš„Javaè¿›ç¨‹ï¼Œç”¨jpsä¹Ÿå¯ä»¥</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">shawn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">macpro</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> jps</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">44561</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2691</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Launcher</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2692</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> App</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2693</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Jps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>jps -l</code>è¿˜å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„è¿è¡ŒåŒ…</p><p>å›¾ç‰‡æ•ˆæœï¼š</p><p><img src="`+Is+`" alt="image-20220830182708026"></p><p>3ï¼‰æŸ¥è¯¢çœ‹è¿è¡Œå‚æ•°</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">shawn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">macpro</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flags </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2692</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">VM</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Flags</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CICompilerCount</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">InitialHeapSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">134217728</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxHeapSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2147483648</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxNewSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">715653120</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MinHeapDeltaBytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">524288</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">NewSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">44564480</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">OldSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">89653248</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">UseCompressedClassPointers </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">UseCompressedOops </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">UseFastUnorderedTimeStamps </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">UseParallelGC </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#æŸ¥çœ‹æŸä¸€å‚æ•°çš„å€¼ï¼Œç”¨æ³•ï¼šjinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">å‚æ•°å</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">è¿›ç¨‹id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">shawn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">macpro</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag MaxHeapSize </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2692</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxHeapSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2147483648</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›¾ç‰‡æ•ˆæœï¼š</p><p><img src="`+Ns+'" alt="image-20220830182854330"></p><p>æŸ¥çœ‹å•ä¸ªæ•ˆæœ:</p><p><img src="'+Hs+'" alt="image-20220830183016790"></p><h2 id="_6-2-åƒåœ¾å›æ”¶æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_6-2-åƒåœ¾å›æ”¶æ¦‚è¿°"><span>6.2 åƒåœ¾å›æ”¶æ¦‚è¿°</span></a></h2><h3 id="åƒåœ¾å›æ”¶èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾å›æ”¶èƒŒæ™¯"><span>åƒåœ¾å›æ”¶èƒŒæ™¯</span></a></h3><p>å®é™…ä¸Šï¼Œåƒåœ¾å›æ”¶å¹¶ä¸æ˜¯javaé¦–åˆ›çš„ã€‚åƒåœ¾æ”¶é›†çš„å†å²è¿œæ¯”javaè¯­è¨€æœ¬èº«è¿˜è¦ä¹…</p><p>æœ€æ—©ä½¿ç”¨åƒåœ¾å›æ”¶åŠŸèƒ½çš„è¯­è¨€æ˜¯Lispï¼Œäº1960å¹´è¯ç”Ÿäºéº»çœç†å·¥å­¦é™¢ã€‚</p><p>Javaä¸­ï¼ŒGC(Garbage Collection)çš„å¯¹è±¡æ˜¯å †ç©ºé—´å’Œæ°¸ä¹…åŒº</p><h3 id="ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶"><span>ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼Ÿ</span></a></h3><p>ç¨‹åºçš„è¿è¡Œå¿…ç„¶éœ€è¦ç”³è¯·å†…å­˜èµ„æºï¼Œæ— æ•ˆçš„å¯¹è±¡èµ„æºå¦‚æœä¸åŠæ—¶å¤„ç†å°±ä¼šä¸€ç›´å æœ‰å†…å­˜èµ„æºï¼Œæœ€ç»ˆå°†å¯¼è‡´å†…å­˜æº¢ å‡ºï¼Œæ‰€ä»¥å¯¹å†…å­˜èµ„æºçš„ç®¡ç†æ˜¯éå¸¸é‡è¦äº†ã€‚</p><h3 id="c-c-è¯­è¨€çš„åƒåœ¾å›æ”¶" tabindex="-1"><a class="header-anchor" href="#c-c-è¯­è¨€çš„åƒåœ¾å›æ”¶"><span>C/C++è¯­è¨€çš„åƒåœ¾å›æ”¶</span></a></h3><p>åœ¨C/C++è¯­è¨€ä¸­ï¼Œæ²¡æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ˜¯é€šè¿‡newå…³é”®å­—ç”³è¯·å†…å­˜èµ„æºï¼Œé€šè¿‡deleteå…³é”®å­—é‡Šæ”¾å†…å­˜èµ„æºã€‚ å¦‚æœï¼Œç¨‹åºå‘˜åœ¨æŸäº›ä½ç½®æ²¡æœ‰å†™deleteè¿›è¡Œé‡Šæ”¾ï¼Œé‚£ä¹ˆç”³è¯·çš„å¯¹è±¡å°†ä¸€ç›´å ç”¨å†…å­˜èµ„æºï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢ å‡ºã€‚</p><h3 id="javaè¯­è¨€çš„åƒåœ¾å›æ”¶" tabindex="-1"><a class="header-anchor" href="#javaè¯­è¨€çš„åƒåœ¾å›æ”¶"><span>Javaè¯­è¨€çš„åƒåœ¾å›æ”¶</span></a></h3><p>ä¸ºäº†è®©ç¨‹åºå‘˜æ›´ä¸“æ³¨äºä»£ç çš„å®ç°ï¼Œè€Œä¸ç”¨è¿‡å¤šçš„è€ƒè™‘å†…å­˜é‡Šæ”¾çš„é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œåœ¨Javaè¯­è¨€ä¸­ï¼Œæœ‰äº†è‡ªåŠ¨çš„åƒåœ¾å› æ”¶æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„GCã€‚ æœ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶åï¼Œç¨‹åºå‘˜åªéœ€è¦å…³å¿ƒå†…å­˜çš„ç”³è¯·å³å¯ï¼Œå†…å­˜çš„é‡Šæ”¾ç”±ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å®Œæˆã€‚ æ¢å¥è¯è¯´ï¼Œè‡ªåŠ¨çš„åƒåœ¾å›æ”¶çš„ç®—æ³•å°±ä¼šå˜å¾—éå¸¸é‡è¦äº†ï¼Œå¦‚æœå› ä¸ºç®—æ³•çš„ä¸åˆç†ï¼Œå¯¼è‡´å†…å­˜èµ„æºä¸€ç›´æ²¡æœ‰é‡Šæ”¾ï¼ŒåŒ æ ·ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºçš„ã€‚ å½“ç„¶ï¼Œé™¤äº†Javaè¯­è¨€ï¼ŒC#ã€Pythonç­‰è¯­è¨€ä¹Ÿéƒ½æœ‰è‡ªåŠ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦å­¦åƒåœ¾å›æ”¶-æ„ä¹‰" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦å­¦åƒåœ¾å›æ”¶-æ„ä¹‰"><span>ä¸ºä»€ä¹ˆè¦å­¦åƒåœ¾å›æ”¶/æ„ä¹‰</span></a></h3><p>jdkå‘å±•åˆ°ä»Šå¤©åƒåœ¾å›æ”¶å·²ç»ç›¸å½“å®Œå–„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­¦ä¹ å®ƒï¼Ÿ</p><ul><li>é¢è¯•å¿…é—®ï¼ï¼ˆæ— åŠ›åæ§½ï¼‰</li><li>æ’æŸ¥å†…å­˜æ³„éœ²ã€æº¢å‡ºç­‰é—®é¢˜</li><li>ç³»ç»Ÿé»˜è®¤é…ç½®ä¸é€‚åˆå½“å‰ä¸šåŠ¡ç‰¹æ®Šåœºæ™¯çš„æ—¶å€™ï¼Œå¿…é¡»æ‰‹åŠ¨è°ƒæ•´å‚æ•°</li></ul><h2 id="_6-3-å›æ”¶äº‹ä»¶ä¸‰è¦ç´ " tabindex="-1"><a class="header-anchor" href="#_6-3-å›æ”¶äº‹ä»¶ä¸‰è¦ç´ "><span>6.3 å›æ”¶äº‹ä»¶ä¸‰è¦ç´ </span></a></h2><p>è¯­æ–‡è€å¸ˆå‘Šè¯‰æˆ‘ä»¬ï¼šä»»ä½•äº‹æƒ…å‘ç”Ÿä¸€å®šæœ‰ä¸‰è¦ç´ ï¼šæ—¶é—´ã€åœ°ç‚¹ã€äººç‰©</p><h3 id="_6-3-1-åœ¨å“ªæ”¶-åœ°ç‚¹" tabindex="-1"><a class="header-anchor" href="#_6-3-1-åœ¨å“ªæ”¶-åœ°ç‚¹"><span>6.3.1 åœ¨å“ªæ”¶ï¼ˆåœ°ç‚¹ï¼‰</span></a></h3><p>æ ¹æ®ä¸Šé¢æˆ‘ä»¬çš„å­¦ä¹ ï¼Œå¤§å®¶å¯¹jvmé‡Œçš„å†…å­˜ç©ºé—´æœ‰äº†æ¸…æ™°çš„è®¤è¯†ã€‚é‚£ä¹ˆï¼š</p><ul><li><p>ç¨‹åºè®¡æ•°å™¨ã€jvmè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆï¼Œè¿™äº›éšç€çº¿ç¨‹è¯ç”Ÿå’Œæ¶ˆäº¡ï¼Œçº¿ç¨‹é‡Šæ”¾å®ƒå°±é‡Šæ”¾ï¼Œæ— éœ€å›æ”¶ã€‚</p></li><li><p>æ–¹æ³•åŒºï¼Œè¿™é‡Œæ˜¯ä¸€äº›ç±»ä¿¡æ¯å’Œé™æ€å˜é‡ï¼Œä¹Ÿæœ‰å›æ”¶çš„å¯èƒ½æ€§ï¼Œä½†æ˜¯å¾ˆé¸¡è‚‹ï¼Œæ”¶ä¸å›å¤šå°‘ä¸œè¥¿ã€‚</p><p>å®é™…ä¸Šï¼Œè™šæ‹Ÿæœºè§„èŒƒä¹Ÿå¹¶ä¸å¼ºåˆ¶è¦æ±‚å›æ”¶è¿™é‡Œã€‚</p></li><li><p>å †ï¼Œè¿™æ‰æ˜¯å¤§å¤´ã€‚å› ä¸ºè¿è¡ŒæœŸé¢‘ç¹åˆ›å»ºå’Œä¸¢å¼ƒå¯¹è±¡çš„äº‹ä»¶éƒ½åœ¨è¿™é‡Œå‘ç”Ÿï¼</p></li></ul><p>æ‰€ä»¥ï¼Œè°ˆå›æ”¶æˆ‘ä»¬ä¸»è¦çœ‹å †ã€‚</p><h3 id="_6-3-2-ä»€ä¹ˆæ—¶å€™æ”¶-æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#_6-3-2-ä»€ä¹ˆæ—¶å€™æ”¶-æ—¶é—´"><span>6.3.2 ä»€ä¹ˆæ—¶å€™æ”¶ï¼ˆæ—¶é—´ï¼‰</span></a></h3><p>å›æ”¶æˆ‘ä»¬æ˜¯ä¸éœ€è¦ç®¡çš„ï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰å¯¹åº”çš„æœºåˆ¶ï¼Œæˆ–è€…è¯´ä»€ä¹ˆæ¡ä»¶ä¸‹æ»¡è¶³äº†ï¼Œè§¦å‘äº†jvmçš„å†…å­˜å›æ”¶ã€‚</p><p>å“ªäº›æ¡ä»¶å‘¢ï¼Ÿ</p><ul><li><p>åœ¨å †å†…å­˜å­˜å‚¨è¾¾åˆ°ä¸€å®šé˜ˆå€¼ä¹‹å</p><p>å½“å¹´è½»ä»£æˆ–è€…è€å¹´ä»£è¾¾åˆ°ä¸€å®šé˜ˆå€¼ï¼ŒJavaè™šæ‹Ÿæœºæ— æ³•å†ä¸ºæ–°çš„å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´äº†ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºå°±ä¼šè§¦å‘ä¸€æ¬¡GCå»å›æ”¶æ‰é‚£äº›å·²ç»ä¸ä¼šå†è¢«ä½¿ç”¨åˆ°çš„å¯¹è±¡</p></li><li><p>ä¸»åŠ¨è°ƒç”¨System.gc() åå°è¯•è¿›è¡Œå›æ”¶</p><p>æ‰‹åŠ¨è°ƒç”¨System.gc()æ–¹æ³•ï¼Œé€šå¸¸è¿™æ ·ä¼šè§¦å‘ä¸€æ¬¡çš„Full GCï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸æ¨èè¿™ä¸ªä¸œè¥¿çš„ä½¿ç”¨ï¼Œä½ ä¼šå¹²æ‰°jvmçš„è¿ä½œ</p></li></ul><h3 id="_6-3-3-å›æ”¶è°-äººç‰©" tabindex="-1"><a class="header-anchor" href="#_6-3-3-å›æ”¶è°-äººç‰©"><span>6.3.3 å›æ”¶è°ï¼ˆäººç‰©ï¼‰</span></a></h3><p>å›æ”¶è°ï¼Ÿå“ªäº›å¯¹è±¡èƒ½å¤Ÿè¢«å›æ”¶ï¼Œå“ªäº›è¿˜ä¸èƒ½ï¼Ÿæ€»å¾—æœ‰ä¸ªåˆ¤æ–­æ ‡å‡†ã€‚</p><p>åœ¨ç¼–ç¨‹è¯­è¨€ç•Œï¼Œæœ‰ä¸¤ç§åŠæ³•åˆ¤å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦å·²æ¶ˆäº¡ï¼š</p><h4 id="_6-3-3-1-å¼•ç”¨è®¡æ•°æ³•" tabindex="-1"><a class="header-anchor" href="#_6-3-3-1-å¼•ç”¨è®¡æ•°æ³•"><span>6.3.3.1 å¼•ç”¨è®¡æ•°æ³•</span></a></h4><p>å¼•ç”¨è®¡æ•°æ˜¯å†å²æœ€æ‚ ä¹…çš„ä¸€ç§ç®—æ³•ï¼Œæœ€æ—©George E. Collinsåœ¨1960çš„æ—¶å€™é¦–æ¬¡æå‡ºï¼Œ50å¹´åçš„ä»Šå¤©ï¼Œè¯¥ç®—æ³•ä¾ç„¶è¢«å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä½¿ç”¨ã€‚ï¼ˆäº†è§£å³å¯ï¼Œ**å› ä¸ºJVMä¸ç”¨ï¼**COMã€ActionScript3ã€Pythonä½¿ç”¨ï¼‰</p><p>1ï¼‰åŸç†</p><p>å‡è®¾æœ‰ä¸€ä¸ªå¯¹è±¡Aï¼Œä»»ä½•ä¸€ä¸ªå¯¹è±¡å¯¹Açš„å¼•ç”¨ï¼Œé‚£ä¹ˆå¯¹è±¡Açš„å¼•ç”¨è®¡æ•°å™¨+1ï¼Œå½“å¼•ç”¨å¤±è´¥æ—¶ï¼Œå¯¹è±¡Açš„å¼•ç”¨è®¡æ•°å™¨å°±-1ï¼Œå¦‚æœå¯¹è±¡Açš„è®¡æ•°å™¨çš„å€¼ä¸º0ï¼Œå°±è¯´æ˜å¯¹è±¡Aæ²¡æœ‰å¼•ç”¨äº†ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚</p><p><img src="'+Us+'" alt="image-20220605092936434"></p><p>2ï¼‰ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å®æ—¶æ€§è¾ƒé«˜ï¼Œæ— éœ€ç­‰åˆ°å†…å­˜ä¸å¤Ÿçš„æ—¶å€™ï¼Œæ‰å¼€å§‹å›æ”¶ï¼Œè¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„è®¡æ•°å™¨æ˜¯å¦ä¸º0ï¼Œå°±å¯ä»¥ç›´æ¥å›æ”¶ã€‚</li><li>åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨æ— éœ€æŒ‚èµ·ã€‚å¦‚æœç”³è¯·å†…å­˜æ—¶ï¼Œå†…å­˜ä¸è¶³ï¼Œåˆ™ç«‹åˆ»æŠ¥outofmember é”™è¯¯ã€‚</li><li>åŒºåŸŸæ€§ï¼Œæ›´æ–°å¯¹è±¡çš„è®¡æ•°å™¨æ—¶ï¼Œåªæ˜¯å½±å“åˆ°è¯¥å¯¹è±¡ï¼Œä¸ä¼šæ‰«æå…¨éƒ¨å¯¹è±¡ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ¯æ¬¡å¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œéƒ½éœ€è¦å»æ›´æ–°è®¡æ•°å™¨ï¼Œæœ‰ä¸€ç‚¹æ—¶é—´å¼€é”€ã€‚</li><li>æµªè´¹CPUèµ„æºï¼Œå³ä½¿å†…å­˜å¤Ÿç”¨ï¼Œä»ç„¶åœ¨è¿è¡Œæ—¶è¿›è¡Œè®¡æ•°å™¨çš„ç»Ÿè®¡ã€‚</li><li>æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ï¼ˆæœ€å¤§çš„ç¼ºç‚¹ï¼‰</li></ul><p><img src="'+Ws+`" alt="image-20220605093119151"></p><p>3ï¼‰æ¡ˆä¾‹ï¼šä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨ï¼Ÿ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>class TestA{</span></span>
<span class="line"><span>  public TestB b;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>class TestB{</span></span>
<span class="line"><span>  public TestA a;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>public class Main{</span></span>
<span class="line"><span>    public static void main(String[] args){</span></span>
<span class="line"><span>        A a = new A();</span></span>
<span class="line"><span>        B b = new B();</span></span>
<span class="line"><span>        a.b=b;</span></span>
<span class="line"><span>        b.a=a;</span></span>
<span class="line"><span>        a = null; //é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span>        b = null; //é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶aå’Œbéƒ½ä¸ºnullï¼Œä½†æ˜¯ç”±äºaå’Œbå­˜åœ¨å¾ªç¯å¼•ç”¨ï¼Œæ ¹æ®å¼•ç”¨çš„ç†è®ºï¼Œaå’Œbæ°¸è¿œéƒ½ä¸ä¼šè¢«å›æ”¶ã€‚</p><p>äº‹å®ä¸Šï¼Œä»¥ä¸Šä»£ç æˆ‘ä»¬åœ¨å¼€å‘ä¸­æ˜¯å¾ˆå¯èƒ½å­˜åœ¨çš„ï¼Œæˆ‘ä»¬çš„jvmä¹Ÿæ²¡æœ‰è¢«æ’‘çˆ†ã€‚å› ä¸ºjvmæ²¡æœ‰é‡‡ç”¨è¿™ç§ç®—æ³•ã€‚</p><p>é‚£å®ƒç”¨çš„å•¥å‘¢ï¼Ÿ</p><h4 id="_6-3-3-2-å¯è¾¾æ€§åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_6-3-3-2-å¯è¾¾æ€§åˆ†æ"><span>6.3.3.2 å¯è¾¾æ€§åˆ†æ</span></a></h4><p>1ï¼‰æ¦‚è¿°</p><p>é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºâ€œGC Rootsâ€çš„æ ¹å¯¹è±¡ä½œä¸ºèµ·å§‹èŠ‚ç‚¹é›†ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®å¼•ç”¨å…³ç³»å‘ä¸‹æœç´¢ï¼Œæœç´¢è¿‡ç¨‹æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºâ€œå¼•ç”¨é“¾â€ï¼ˆReference Chainï¼‰ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡åˆ°GC Rootsé—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œå°±è¯´æ˜ä»GC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ï¼Œå°±æ˜¯å¯ä»¥å›æ”¶çš„å¯¹è±¡ã€‚</p><p>JVMç”¨çš„æ˜¯è¿™ç§ç®—æ³•ï¼</p><p><img src="`+Zs+`" alt="image-20200429102816516"></p><p>2ï¼‰GC Rootsæ¸…å•</p><p>åœ¨JVMè™šæ‹Ÿæœºä¸­ï¼Œå¯ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>åœ¨è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡</li><li>åœ¨æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼ˆç±»å˜é‡ï¼‰ã€‚</li><li>åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Tableï¼‰é‡Œçš„å¼•ç”¨ã€‚</li><li>åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³é€šå¸¸æ‰€è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ‰€æœ‰è¢«åŒæ­¥é”ï¼ˆsynchronizedå…³é”®å­—ï¼‰æŒæœ‰çš„å¯¹è±¡ã€‚</li><li>Javaè™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„Classå¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡ï¼ˆæ¯”å¦‚NullPointExcepitonã€OutOfMemoryErrorï¼‰ç­‰ï¼Œè¿˜æœ‰ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚</li><li>åæ˜ Javaè™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„JMXBeanã€JVMTIä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚</li></ul><p>3ï¼‰é™„ï¼šå¯¹è±¡çš„å››ç±»å¼•ç”¨</p><p>åœ¨javaä¸­ï¼Œå¯¹è±¡çš„å¼•ç”¨ä¸»è¦æœ‰4ç§ï¼Œä»ä¸Šåˆ°ä¸‹çº§åˆ«ä¾æ¬¡é™ä½ã€‚ä¸åŒçš„å¼•ç”¨å›æ”¶çš„æ€åº¦ä¸åŒ</p><ul><li>å¼ºå¼•ç”¨ <ul><li>åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼â€œObject obj=new Object()â€è¿™ç§å¼•ç”¨å…³ç³»ã€‚</li><li>æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œå†…å­˜ç”¨ä¸å›æ”¶ï¼Œå¤Ÿå°±å¤Ÿï¼Œä¸å¤ŸæŠ›å†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</li></ul></li><li>è½¯å¼•ç”¨ <ul><li>ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†éå¿…é¡»çš„å¯¹è±¡ã€‚è¢«SoftReferenceåŒ…è£…çš„é‚£äº›ç±»</li><li>å…ˆå›æ”¶æ²¡ç”¨çš„å¯¹è±¡ï¼Œæ”¶å®Œåå‘ç°è¿˜ä¸å¤Ÿï¼Œå†è§¦å‘äºŒæ¬¡å›æ”¶ï¼Œå¯¹è½¯å¼•ç”¨å¯¹è±¡ä¸‹æ‰‹ã€‚</li></ul></li><li>å¼±å¼•ç”¨ <ul><li>ç”¨æ¥æè¿°é‚£äº›éå¿…é¡»å¯¹è±¡ï¼Œå¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ã€‚è¢«WeakReferenceåŒ…è£…çš„é‚£äº›ç±»</li><li>æ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œåƒåœ¾æ”¶é›†ä¸€æ—¦å‘ç”Ÿï¼Œå¼±å¼•ç”¨ç›´æ¥å›æ”¶ã€‚</li></ul></li><li>è™šå¼•ç”¨ï¼ˆå®é™…å¼€å‘åŸºæœ¬ä¸ç”¨ï¼‰ <ul><li>æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚</li><li>ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åªæ˜¯ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</li></ul></li></ul><h2 id="_6-4-å›æ”¶ç®—æ³•-ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_6-4-å›æ”¶ç®—æ³•-ç­–ç•¥"><span>6.4 å›æ”¶ç®—æ³•ï¼ˆç­–ç•¥ï¼‰</span></a></h2><p>å›æ”¶æ˜¯åšä¸€ä»¶äº‹æƒ…ï¼Œè¦å®Œæˆè¿™ä»¶äº‹ï¼Œæˆ‘ä»¬éœ€è¦é‡‡ç”¨ä»€ä¹ˆæ ·çš„ç­–ç•¥ï¼Ÿç”¨ä»€ä¹ˆæ ·çš„æ€æƒ³ä¼šæ›´ç¨³å¦¥ï¼Ÿ</p><p>è¿™å°±æ¶‰åŠåˆ°å›æ”¶çš„å…·ä½“ç®—æ³•</p><p>è‡ªåŠ¨åŒ–çš„ç®¡ç†å†…å­˜èµ„æºï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å¿…é¡»è¦æœ‰ä¸€å¥—ç®—æ³•æ¥è¿›è¡Œè®¡ç®—ï¼Œå“ªäº›æ˜¯æœ‰æ•ˆçš„å¯¹è±¡ï¼Œå“ªäº›æ˜¯æ— æ•ˆçš„å¯¹è±¡ï¼Œå¯¹äºæ— æ•ˆçš„å¯¹è±¡å°±è¦è¿›è¡Œå›æ”¶å¤„ç†ã€‚</p><p>å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰ï¼šå¼•ç”¨è®¡æ•°æ³•ã€æ ‡è®°æ¸…é™¤æ³•ã€æ ‡è®°å‹ç¼©æ³•ã€å¤åˆ¶ç®—æ³•ã€åˆ†ä»£ç®—æ³•ç­‰ã€‚</p><h3 id="å¼•ç”¨è®¡æ•°æ³•" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨è®¡æ•°æ³•"><span><strong>å¼•ç”¨è®¡æ•°æ³•</strong></span></a></h3><p>å¼•ç”¨è®¡æ•°æ˜¯å†å²æœ€æ‚ ä¹…çš„ä¸€ç§ç®—æ³•ï¼Œæœ€æ—©George E. Collinsåœ¨1960çš„æ—¶å€™é¦–æ¬¡æå‡ºï¼Œ50å¹´åçš„ä»Šå¤©ï¼Œè¯¥ç®—æ³•ä¾ç„¶è¢«å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä½¿ç”¨ã€‚</p><p><strong>åŸç†ï¼š</strong></p><p>å‡è®¾æœ‰ä¸€ä¸ªå¯¹è±¡Aï¼Œä»»ä½•ä¸€ä¸ªå¯¹è±¡å¯¹Açš„å¼•ç”¨ï¼Œé‚£ä¹ˆå¯¹è±¡Açš„å¼•ç”¨è®¡æ•°å™¨+1ï¼Œå½“å¼•ç”¨å¤±è´¥æ—¶ï¼Œå¯¹è±¡Açš„å¼•ç”¨è®¡æ•°å™¨å°±-1ï¼Œå¦‚æœå¯¹è±¡Açš„è®¡æ•°å™¨çš„å€¼ä¸º0ï¼Œå°±è¯´æ˜å¯¹è±¡Aæ²¡æœ‰å¼•ç”¨äº†ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å®æ—¶æ€§è¾ƒé«˜ï¼Œæ— éœ€ç­‰åˆ°å†…å­˜ä¸å¤Ÿçš„æ—¶å€™ï¼Œæ‰å¼€å§‹å›æ”¶ï¼Œè¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„è®¡æ•°å™¨æ˜¯å¦ä¸º0ï¼Œå°±å¯ä»¥ç›´æ¥å›æ”¶ã€‚</li><li>åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨æ— éœ€æŒ‚èµ·ã€‚å¦‚æœç”³è¯·å†…å­˜æ—¶ï¼Œå†…å­˜ä¸è¶³ï¼Œåˆ™ç«‹åˆ»æŠ¥outofmember é”™è¯¯ã€‚</li><li>åŒºåŸŸæ€§ï¼Œæ›´æ–°å¯¹è±¡çš„è®¡æ•°å™¨æ—¶ï¼Œåªæ˜¯å½±å“åˆ°è¯¥å¯¹è±¡ï¼Œä¸ä¼šæ‰«æå…¨éƒ¨å¯¹è±¡ã€‚</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>æ¯æ¬¡å¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œéƒ½éœ€è¦å»æ›´æ–°è®¡æ•°å™¨ï¼Œæœ‰ä¸€ç‚¹æ—¶é—´å¼€é”€ã€‚</li><li>æµªè´¹CPUèµ„æºï¼Œå³ä½¿å†…å­˜å¤Ÿç”¨ï¼Œä»ç„¶åœ¨è¿è¡Œæ—¶è¿›è¡Œè®¡æ•°å™¨çš„ç»Ÿè®¡ã€‚</li><li>æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚<strong>ï¼ˆæœ€å¤§çš„ç¼ºç‚¹ï¼‰</strong></li></ul><p><strong>ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨ï¼Ÿ</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> TestA</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> TestB</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> TestB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> TestA</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        A</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        B</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        a </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        b </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶aå’Œbéƒ½ä¸ºnullï¼Œä½†æ˜¯ç”±äºaå’Œbå­˜åœ¨å¾ªç¯å¼•ç”¨ï¼Œè¿™æ ·aå’Œbæ°¸è¿œéƒ½ä¸ä¼šè¢«å›æ”¶ã€‚</p><h3 id="æ ‡è®°æ¸…é™¤æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°æ¸…é™¤æ³•"><span>æ ‡è®°æ¸…é™¤æ³•</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p>æ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œæ˜¯å°†åƒåœ¾å›æ”¶åˆ†ä¸º2ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯æ ‡è®°å’Œæ¸…é™¤ã€‚</p><ul><li>æ ‡è®°ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>æ¸…é™¤ï¼šæœªè¢«æ ‡è®°å¼•ç”¨çš„å¯¹è±¡å°±æ˜¯åƒåœ¾å¯¹è±¡ï¼Œæ¸…ç†æ‰ã€‚</li></ul><p>æ ‡è®°æ¸…é™¤æ³•å¯ä»¥è¯´æ˜¯æœ€åŸºç¡€çš„æ”¶é›†ç®—æ³•ï¼Œå› ä¸ºåç»­çš„æ”¶é›†ç®—æ³•å¤§å¤šéƒ½æ˜¯ä»¥æ ‡è®°-æ¸…é™¤ç®—æ³•ä¸ºåŸºç¡€ï¼Œå¯¹å…¶ç¼ºç‚¹è¿›è¡Œæ”¹è¿›è€Œå¾—åˆ°çš„ã€‚</p><p>2ï¼‰åŸç†/æ‰§è¡Œè¿‡ç¨‹</p><p><img src="`+Ys+'" alt="image-20220915201654499"></p><p>è¿™å¼ å›¾ä»£è¡¨çš„æ˜¯ç¨‹åºè¿è¡ŒæœŸé—´æ‰€æœ‰å¯¹è±¡çš„çŠ¶æ€ï¼Œå®ƒä»¬çš„æ ‡å¿—ä½å…¨éƒ¨æ˜¯0ï¼ˆä¹Ÿå°±æ˜¯æœªæ ‡è®°ï¼Œä»¥ä¸‹é»˜è®¤0å°±æ˜¯æœªæ ‡è®°ï¼Œ1ä¸ºå·²æ ‡è®°ï¼‰ï¼Œå‡è®¾è¿™ä¼šå„¿æœ‰æ•ˆå†…å­˜ç©ºé—´è€—å°½äº†ï¼ŒJVMå°†ä¼šåœæ­¢åº”ç”¨ç¨‹åºçš„è¿è¡Œå¹¶å¼€å¯GCçº¿ç¨‹ï¼Œç„¶åå¼€å§‹è¿›è¡Œæ ‡è®°å·¥ä½œï¼ŒæŒ‰ç…§æ ¹æœç´¢ç®—æ³•ï¼Œæ ‡è®°å®Œä»¥åï¼Œå¯¹è±¡çš„çŠ¶æ€å¦‚ä¸‹å›¾ã€‚</p><p><img src="'+$s+'" alt="image-20220915201753250"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‰ç…§æ ¹æœç´¢ç®—æ³•ï¼Œæ‰€æœ‰ä»rootå¯¹è±¡å¯è¾¾çš„å¯¹è±¡å°±è¢«æ ‡è®°ä¸ºäº†å­˜æ´»çš„å¯¹è±¡ï¼Œæ­¤æ—¶å·²ç»å®Œæˆäº†ç¬¬ä¸€é˜¶æ®µæ ‡è®°ã€‚æ¥ä¸‹æ¥ï¼Œå°±è¦æ‰§è¡Œç¬¬äºŒé˜¶æ®µæ¸…é™¤äº†ï¼Œé‚£ä¹ˆæ¸…é™¤å®Œä»¥åï¼Œå‰©ä¸‹çš„å¯¹è±¡ä»¥åŠå¯¹è±¡çš„çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="'+Qs+'" alt="image-20220915201850728"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡å°†ä¼šå›æ”¶æ¸…é™¤æ‰ï¼Œè€Œè¢«æ ‡è®°çš„å¯¹è±¡å°†ä¼šç•™ä¸‹ï¼Œå¹¶ä¸”ä¼šå°†æ ‡è®°ä½é‡æ–°å½’0ã€‚æ¥ä¸‹æ¥å°±ä¸ç”¨è¯´äº†ï¼Œå”¤é†’åœæ­¢çš„ç¨‹åºçº¿ç¨‹ï¼Œè®©ç¨‹åºç»§ç»­è¿è¡Œå³å¯ã€‚</p><p>3ï¼‰ä¼˜ç‚¹ï¼š</p><ul><li>å¯ä»¥çœ‹åˆ°ï¼Œæ ‡è®°æ¸…é™¤ç®—æ³•è§£å†³äº†å¼•ç”¨è®¡æ•°ç®—æ³•ä¸­çš„å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œæ²¡æœ‰ä»rootèŠ‚ç‚¹å¼•ç”¨çš„å¯¹è±¡éƒ½ä¼šè¢«å›æ”¶ã€‚</li></ul><p>4ï¼‰ç¼ºç‚¹ï¼š</p><ul><li>æ‰§è¡Œæ•ˆç‡è¾ƒä½ï¼Œæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªåŠ¨ä½œéƒ½éœ€è¦éå†æ‰€æœ‰çš„å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨GCæ—¶ï¼Œéœ€è¦åœæ­¢åº”ç”¨ç¨‹åºï¼Œå¯¹äºäº¤äº’æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨è€Œè¨€è¿™ä¸ªä½“éªŒæ˜¯éå¸¸å·®çš„ã€‚</li><li>é€šè¿‡æ ‡è®°æ¸…é™¤ç®—æ³•æ¸…ç†å‡ºæ¥çš„å†…å­˜ï¼Œç¢ç‰‡åŒ–è¾ƒä¸ºä¸¥é‡ï¼Œå› ä¸ºè¢«å›æ”¶çš„å¯¹è±¡å¯èƒ½å­˜åœ¨äºå†…å­˜çš„å„ä¸ªè§’è½ï¼Œæ‰€ä»¥æ¸…ç†å‡ºæ¥çš„å†…å­˜æ˜¯ä¸è¿è´¯çš„ã€‚</li></ul><p><img src="'+si+'" alt="image-20200429235159875"></p><blockquote><p>ç¨‹åºå‘JVMç”³è¯·å†…å­˜çš„æ—¶å€™,å¯èƒ½ä¼šè®¤ä¸ºè¿™äº›&quot;ç¢ç‰‡åŒ–&quot;çš„å†…å­˜ç©ºé—´ä¸è¶³ï¼Œä¸å¤Ÿç”¨ã€‚è€Œå»åˆ«çš„åœ°æ–¹ç”³è¯·å†…å­˜ç©ºé—´ã€‚</p></blockquote><p>5ï¼‰ä¸ºä»€ä¹ˆè¦æš‚åœ?</p><p>å› ä¸ºæ ‡è®°è¦éå†æ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æœä¸æ–­æœ‰æ–°å¯¹è±¡åŠ å…¥ï¼Œæ²¡æ³•ç¡®å®šæ ‡è®°å…³ç³»ï¼Œå¯èƒ½ä¼šæŠŠå­˜æ´»çš„å¯¹è±¡ä¹Ÿæ¸…é™¤æ‰ï¼Œæ‰€ä»¥å¿…é¡»è¦æš‚åœã€‚</p><h3 id="æ ‡è®°å‹ç¼©ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°å‹ç¼©ç®—æ³•"><span>æ ‡è®°å‹ç¼©ç®—æ³•</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p>ä¹Ÿå«æ ‡è®°-æ•´ç†ï¼Œæ ‡è®°å‹ç¼©ç®—æ³•æ˜¯åœ¨æ ‡è®°æ¸…é™¤ç®—æ³•çš„åŸºç¡€ä¹‹ä¸Šï¼Œåšäº†ä¼˜åŒ–æ”¹è¿›çš„ç®—æ³•ã€‚</p><p>å’Œæ ‡è®°æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯¹å¯¹è±¡çš„å¼•ç”¨è¿›è¡Œæ ‡è®°</p><p>åœ¨æ¸…ç†é˜¶æ®µï¼Œå¹¶ä¸æ˜¯ç®€å•çš„æ¸…ç†æœªæ ‡è®°çš„å¯¹è±¡ï¼Œè€Œæ˜¯å°†å­˜æ´»çš„å¯¹è±¡å‹ç¼©åˆ°å†…å­˜çš„ä¸€ç«¯ï¼Œç„¶å<strong>æ¸…ç†è¾¹ç•Œä»¥å¤–çš„åƒåœ¾</strong>ï¼Œä»è€Œè§£å†³äº†ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚</p><p>2ï¼‰æ‰§è¡Œè¿‡ç¨‹ï¼š <img src="'+ii+'" alt="image-20200429235422031"></p><p>3ï¼‰ç‰¹ç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šè¯¥ç®—æ³•è§£å†³äº†<strong>æ ‡è®°æ¸…é™¤ç®—æ³•çš„ç¢ç‰‡åŒ–çš„é—®é¢˜ï¼Œä¸‹ä¸€æ­¥åˆ†é…å†…å­˜çš„æ—¶å€™æ›´æ–¹ä¾¿</strong></li><li>ç¼ºç‚¹ï¼šå¤šäº†ä¸€æ­¥æ•´ç†æ“ä½œï¼Œå¯¹è±¡éœ€è¦ç§»åŠ¨å†…å­˜ä½ç½®ï¼Œæ•ˆç‡ä¹Ÿå¥½ä¸åˆ°å“ªå»ã€‚</li></ul><h3 id="æ ‡è®°å¤åˆ¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°å¤åˆ¶ç®—æ³•"><span>æ ‡è®°å¤åˆ¶ç®—æ³•</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p>å¤åˆ¶ç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯ï¼Œå°†åŸæœ‰çš„å†…å­˜ç©ºé—´ä¸€åˆ†ä¸ºäºŒï¼Œæ¯æ¬¡åªç”¨å…¶ä¸­çš„ä¸€å—ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œå°†æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå†…å­˜ç©ºé—´ä¸­ï¼Œç„¶åå°†è¯¥å†…å­˜ç©ºé—´æ¸…ç©ºï¼Œäº¤æ¢ä¸¤ä¸ªå†…å­˜çš„è§’è‰²ï¼Œå®Œæˆåƒåœ¾çš„å›æ”¶ã€‚</p><p>å¦‚æœå†…å­˜ä¸­çš„åƒåœ¾å¯¹è±¡è¾ƒå¤šï¼Œéœ€è¦å¤åˆ¶çš„å¯¹è±¡å°±è¾ƒå°‘ï¼Œè¿™ç§æƒ…å†µä¸‹é€‚åˆä½¿ç”¨è¯¥æ–¹å¼å¹¶ä¸”æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œåä¹‹ï¼Œåˆ™ä¸é€‚åˆã€‚</p><p>2ï¼‰è¿‡ç¨‹</p><p><img src="'+ai+'" alt="image-20200430001554975"></p><p>3ï¼‰é™„ï¼šå¹´è½»ä»£çš„æ ‡è®°å¤åˆ¶ç®—æ³•</p><p>JVMä¸­å¹´è½»ä»£å†…å­˜ç©ºé—´çš„å›æ”¶å°±æ˜¯å…¸å‹çš„æ ‡è®°å¤åˆ¶æ³•</p><p><img src="'+ni+`" alt="image-20200430001725601"></p><ul><li>sruvivoråŒºæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªfromï¼Œå¦ä¸€ä¸ªå«toï¼Œè¿™ä¿©äº¤æ›¿äº’æ¢è§’è‰²</li><li>1.åœ¨GCå¼€å§‹çš„æ—¶å€™ï¼Œå¯¹è±¡åªä¼šå­˜åœ¨äºEdenåŒºå’Œåä¸ºâ€œFromâ€çš„SurvivoråŒºï¼ŒSurvivoråŒºâ€œToâ€æ˜¯ç©ºçš„ã€‚</li><li>2.ç´§æ¥ç€è¿›è¡ŒGCï¼ŒEdenåŒºä¸­æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½ä¼šè¢«å¤åˆ¶åˆ°â€œToâ€ï¼Œè€Œåœ¨â€œFromâ€åŒºä¸­ï¼Œä»å­˜æ´»çš„å¯¹è±¡ä¼šæ ¹æ®ä»–ä»¬çš„å¹´é¾„å€¼æ¥å†³å®šå»å‘ã€‚å¹´é¾„è¾¾åˆ°ä¸€å®šå€¼(å¹´é¾„é˜ˆå€¼ï¼Œå¯ä»¥é€šè¿‡-XX:MaxTenuringThresholdæ¥è®¾ç½®) çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°å¹´è€ä»£ä¸­ï¼Œæ²¡æœ‰è¾¾åˆ°é˜ˆå€¼çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°â€œToâ€åŒºåŸŸã€‚</li><li>3.ç»è¿‡è¿™æ¬¡GCåï¼ŒEdenåŒºå’ŒFromåŒºå·²ç»è¢«æ¸…ç©ºã€‚è¿™ä¸ªæ—¶å€™ï¼Œâ€œFromâ€å’Œâ€œToâ€ä¼šäº¤æ¢ä»–ä»¬çš„è§’è‰²ï¼Œä¹Ÿå°±æ˜¯æ–°çš„â€œToâ€å°±æ˜¯ä¸Šæ¬¡GCå‰çš„â€œFromâ€ï¼Œæ–°çš„â€œFromâ€å°±æ˜¯ä¸Šæ¬¡GCå‰çš„â€œToâ€ã€‚ä¸ç®¡æ€æ ·ï¼Œéƒ½ä¼šä¿è¯åä¸ºToçš„SurvivoråŒºåŸŸæ˜¯ç©ºçš„ã€‚</li><li>4.GCä¼šä¸€ç›´é‡å¤è¿™æ ·çš„è¿‡ç¨‹ï¼Œç›´åˆ°â€œToâ€åŒºè¢«å¡«æ»¡ï¼Œâ€œToâ€åŒºè¢«å¡«æ»¡ä¹‹åï¼Œä¼šå°†æ‰€æœ‰å¯¹è±¡ç§»åŠ¨åˆ°å¹´è€ä»£ä¸­ã€‚</li></ul><p>4ï¼‰ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>åœ¨åƒåœ¾å¯¹è±¡å¤šçš„æƒ…å†µä¸‹ï¼Œæ•ˆç‡è¾ƒé«˜ï¼Œå› ä¸ºè¦æŠŠå­˜æ´»çš„å…¨éƒ¨ç§»åŠ¨ä¸€é</li><li>æ¸…ç†åï¼Œå†…å­˜æ— ç¢ç‰‡</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>åœ¨åƒåœ¾å¯¹è±¡æ¯”ä¾‹å°‘çš„æƒ…å†µä¸‹ï¼Œä¸é€‚ç”¨ï¼Œå¦‚ï¼šå¹´è½»ä»£è¿™ä¹ˆç”¨å¯ä»¥ï¼Œè€å¹´ä»£å°±ä¸åˆé€‚</li><li>åˆ†é…çš„2å—å†…å­˜ç©ºé—´ï¼Œåœ¨åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªèƒ½ä½¿ç”¨ä¸€åŠï¼Œå†…å­˜ä½¿ç”¨ç‡è¾ƒä½</li></ul><h3 id="åˆ†ä»£ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åˆ†ä»£ç®—æ³•"><span>åˆ†ä»£ç®—æ³•</span></a></h3><blockquote><p>å‰é¢ä»‹ç»äº†å¤šç§å›æ”¶ç®—æ³•ï¼Œæ¯ä¸€ç§ç®—æ³•éƒ½æœ‰è‡ªå·±çš„ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œè°éƒ½ä¸èƒ½æ›¿ä»£è°ï¼Œæ‰€ä»¥æ ¹æ®åƒåœ¾å›æ”¶å¯¹è±¡çš„ç‰¹ç‚¹è¿›è¡Œé€‰æ‹©ï¼Œæ‰æ˜¯æ˜æ™ºçš„é€‰æ‹©ã€‚</p></blockquote><p>1ï¼‰å…·ä½“æ€æƒ³</p><p>ç¡®åˆ‡çš„è¯´ï¼Œåˆ†ä»£ä¸ç®—æ˜¯ä¸€ç§ç®—æ³•ï¼Œå®ƒæ˜¯ä¸€ç§è§£å†³å›æ”¶é—®é¢˜çš„æ€è·¯ï¼šå…·ä½“æƒ…å†µå…·ä½“åˆ†æ</p><p>åœ¨å †å†…å­˜ä¸­ï¼Œæœ‰äº›å¯¹è±¡çŸ­æš‚å­˜æ´»æœ‰äº›åˆ™æ˜¯é•¿ä¹…å­˜æ´»ï¼Œæ‰€ä»¥éœ€è¦å°†å †å†…å­˜è¿›è¡Œåˆ†ä»£ï¼Œå°†çŸ­æš‚å­˜æ´»çš„å¯¹è±¡æ”¾åˆ°ä¸€èµ·ï¼Œè¿›è¡Œé«˜é¢‘ç‡çš„å›æ”¶ï¼Œé•¿ä¹…å­˜æ´»çš„å¯¹è±¡é›†ä¸­æ”¾åˆ°ä¸€èµ·ï¼Œè¿›è¡Œä½é¢‘ç‡çš„å›æ”¶</p><p>ç»†ç²’åº¦çš„æ§åˆ¶ä¸åŒåŒºåŸŸï¼Œè°ƒèŠ‚ä¸åŒçš„å›æ”¶é¢‘ç‡ï¼ŒèŠ‚çº¦ç³»ç»Ÿèµ„æºï¼ˆå›æ”¶æœŸé—´ç³»ç»Ÿè¦é¢å¤–å¹²æ´»çš„ï¼ï¼‰ã€‚</p><p>åˆ†ä»£ç®—æ³•å…¶å®å°±æ˜¯è¿™æ ·çš„ï¼Œæ ¹æ®å›æ”¶å¯¹è±¡çš„ç‰¹ç‚¹è¿›è¡Œé€‰æ‹©ï¼Œ<strong>åœ¨jvmä¸­ï¼Œå¹´è½»ä»£(å°‘é‡å¯¹è±¡å­˜æ´»)é€‚åˆä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£(å¤§é‡å¯¹è±¡å­˜æ´»)é€‚åˆä½¿ç”¨æ ‡è®°æ¸…é™¤æˆ–æ ‡è®°å‹ç¼©ç®—æ³•ã€‚</strong></p><p>2ï¼‰ç›¸å…³æ¦‚å¿µ</p><ul><li>éƒ¨åˆ†æ”¶é›†ï¼ˆPartial GCï¼‰ <ul><li>æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GC/Young GCï¼‰ï¼šæŒ‡ç›®æ ‡åªæ˜¯æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†ã€‚</li><li>è€å¹´ä»£æ”¶é›†ï¼ˆMajor GC/Old GCï¼‰ï¼šæŒ‡ç›®æ ‡åªæ˜¯è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚ï¼ˆCMSæ”¶é›†å™¨ï¼‰</li><li>æ··åˆæ”¶é›†ï¼ˆMixed GCï¼‰ï¼šæŒ‡ç›®æ ‡æ˜¯æ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£ä»¥åŠéƒ¨åˆ†è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚ï¼ˆG1æ”¶é›†å™¨ï¼‰</li></ul></li><li>æ•´å †æ”¶é›†ï¼ˆFull GCï¼‰ <ul><li>æ‰€æœ‰çš„å†…å­˜æ•´ç†ä¸€éï¼ŒåŒ…æ‹¬å †å’Œæ–¹æ³•åŒºã€‚è½»æ˜“ä¸è¦è§¦å‘</li></ul></li></ul><h2 id="_6-5-å›æ”¶å™¨-æ‰§è¡Œè€…" tabindex="-1"><a class="header-anchor" href="#_6-5-å›æ”¶å™¨-æ‰§è¡Œè€…"><span>6.5 å›æ”¶å™¨ï¼ˆæ‰§è¡Œè€…ï¼‰</span></a></h2><p>å‰é¢æˆ‘ä»¬è®²äº†åƒåœ¾å›æ”¶çš„ç®—æ³•ï¼Œè¿˜éœ€è¦æœ‰å…·ä½“çš„å®ç°ã€‚</p><p>ç­–ç•¥æœ‰äº†ï¼Œè°æ¥æ‰§è¡Œå‘¢ï¼Ÿè¿™äº‹å°±è½åˆ°ä»»åŠ³ä»»æ€¨çš„æ”¶é›†å™¨å¤´ä¸Šäº†</p><p>åœ¨jvmä¸­ï¼Œå®ç°äº†å¤šç§åƒåœ¾æ”¶é›†å™¨ï¼Œè¿™äº›æ”¶é›†å™¨ç§ç±»ç¹å¤šï¼Œçœ‹ä¼¼ä¹±ä¸ƒå…«ç³Ÿï¼Œå…¶å®ç†æ¸…æ¥šåå¾ˆç®€å•ã€‚</p><p>åŒ…æ‹¬ï¼šä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ã€å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨ã€CMSï¼ˆå¹¶å‘ï¼‰åƒåœ¾æ”¶é›†å™¨ã€G1åƒåœ¾æ”¶é›†å™¨ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªçš„äº†è§£å­¦ä¹ ã€‚</p><p>1ï¼‰å…ˆæ˜ç™½å‡ ä»¶äº‹æƒ…</p><ul><li><p>ç”¨æˆ·çº¿ç¨‹ï¼šjavaç¨‹åºè¿è¡Œåï¼Œç”¨æˆ·ä¸åœè¯·æ±‚æ“ä½œjvmå†…å­˜ï¼Œè¿™äº›ç§°ä¸ºç”¨æˆ·çº¿ç¨‹</p></li><li><p>GCçº¿ç¨‹ï¼šjvmç³»ç»Ÿè¿›è¡Œåƒåœ¾å›æ”¶å¯åŠ¨çš„çº¿ç¨‹</p></li><li><p>ä¸²è¡Œï¼šGCé‡‡ç”¨å•çº¿ç¨‹ï¼Œæ”¶é›†æ—¶åœæ‰ç”¨æˆ·çº¿ç¨‹</p></li><li><p>å¹¶è¡Œï¼šGCé‡‡ç”¨å¤šçº¿ç¨‹ï¼Œæ”¶é›†æ—¶åŒæ ·è¦åœæ‰ç”¨æˆ·çº¿ç¨‹</p></li><li><p>å¹¶å‘ï¼šç”¨æˆ·çº¿ç¨‹å’ŒGCçº¿ç¨‹åŒæ­¥è¿›è¡Œï¼Œè¿™æ„ä¹‰å°±ä¸ä¸€æ ·äº†</p></li><li><p>STWï¼šstop the world ï¼Œæš‚åœå“åº”ç”¨æˆ·çº¿ç¨‹ï¼Œåªæä¾›ç»™GCçº¿ç¨‹å·¥ä½œæ¥å›æ”¶åƒåœ¾ï¼ˆå¾ˆä¸çˆ½çš„äº‹æƒ…ï¼‰</p><ul><li>å±å®³ï¼šé•¿æ—¶é—´æœåŠ¡åœæ­¢ï¼Œæ²¡æœ‰å“åº”é‡åˆ°ã€‚HAç³»ç»Ÿï¼Œå¯èƒ½å¼•èµ·ä¸»å¤‡åˆ‡æ¢ï¼Œä¸¥é‡å±å®³ç”Ÿäº§ç¯å¢ƒã€‚</li></ul></li><li><p>åˆ†ä»£ï¼šåƒåœ¾æ”¶é›†å™¨æ˜¯è¦å·¥ä½œåœ¨æŸä¸ªä»£ä¸Šçš„ï¼Œå¯èƒ½æ˜¯å¹´è½»ä»£ï¼Œè€å¹´ä»£ï¼Œæœ‰çš„å¯èƒ½ä¸¤ä¸ªä»£éƒ½èƒ½å·¥ä½œ</p></li><li><p>ç»„åˆï¼šå› ä¸ºåˆ†ä»£ï¼Œæ‰€ä»¥å¾—æœ‰ç»„åˆï¼Œä½ æ‡‚å¾—â€¦â€¦</p></li></ul><p>2ï¼‰å‡†å¤‡æ¡ˆä¾‹</p><p>åœ¨å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€ä¸ªå†…å­˜å †ç§¯çš„æ¡ˆä¾‹ï¼Œä¸‹é¢å­¦ä¹ æ”¶é›†å™¨ï¼Œåªéœ€è¦åœ¨å¯åŠ¨æ—¶æŒ‡å®šä¸åŒçš„XXå‚æ•°å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> cn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itcast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">util</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ArrayList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">util</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">util</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Properties</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">util</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> TestGC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> throws</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Exception </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ArrayList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        //æ¨¡æ‹Ÿwebä¸­ä¸åœè¯·æ±‚ï¼Œä¸æ–­åœ° äº§ç”Ÿæ–°çš„æ•°æ®(å¯¹è±¡),éšæœºçš„åºŸå¼ƒå¯¹è±¡(åƒåœ¾)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">            int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nextInt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">currentTimeMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> %</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                //æ¨¡æ‹Ÿé‡Šæ”¾ï¼Œå¦‚æœæ°å¥½è¯·æ±‚æ—¶é—´æ˜¯å¶æ•°ï¼Œæ¸…ç©ºåˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">                list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">clear</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                //æ¨¡æ‹Ÿä¸šåŠ¡ï¼Œä»dbä¸­æŸ¥è¯¢äº†10000æ¡è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    Properties</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> properties</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Properties</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">                    properties</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key_</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">value_</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">currentTimeMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">                    list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">properties</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">listå¤§å°ä¸ºï¼š</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            //æ¨¡æ‹Ÿè¯·æ±‚é—´éš”ï¼Œ0-100mséšæœº</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-1-ä¸²è¡Œ" tabindex="-1"><a class="header-anchor" href="#_6-5-1-ä¸²è¡Œ"><span>6.5.1 ä¸²è¡Œ</span></a></h3><p>ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ï¼Œæ˜¯æŒ‡ä½¿ç”¨å•çº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œåƒåœ¾å›æ”¶æ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Œå¹¶ä¸”javaåº”ç”¨ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½è¦æš‚åœï¼Œç­‰å¾…åƒåœ¾å›æ”¶çš„å®Œæˆã€‚è¿™ç§ç°è±¡ç§°ä¹‹ä¸ºSTWï¼ˆStop-The-Worldï¼‰ã€‚</p><p>å¯¹äºäº¤äº’æ€§è¾ƒå¼ºçš„åº”ç”¨è€Œè¨€ï¼Œè¿™ç§åƒåœ¾æ”¶é›†å™¨æ˜¯ä¸èƒ½å¤Ÿæ¥å—çš„ã€‚</p><blockquote><p>ä¸€èˆ¬åœ¨Javawebåº”ç”¨ä¸­æ˜¯ä¸ä¼šé‡‡ç”¨è¯¥æ”¶é›†å™¨çš„</p></blockquote><p>1ï¼‰æ¦‚è¿°</p><p>å…¶å®æ˜¯ä¸¤ä¸ªæ”¶é›†å™¨ï¼Œå¹´è½»ä»£çš„å« Serial ï¼Œ è€å¹´ä»£çš„å« Serial Oldï¼Œå¾ˆå¥½è®°ï¼</p><p>è¿™æ˜¯æœ€åŸºç¡€çš„ï¼Œå†å²æœ€æ‚ ä¹…çš„æ”¶é›†å™¨ã€‚</p><p>å¬åå­—å°±çŸ¥é“ï¼Œè¿™ä¸ªå±äºä¸²è¡Œæ”¶é›†å™¨ï¼Œå³ï¼šGCæ—¶ï¼Œåœæ‰ç”¨æˆ·çº¿ç¨‹ï¼ŒåŒæ—¶ï¼ŒGCæœ¬èº«ä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è·‘</p><p>2ï¼‰åŸç†</p><p>å¾ˆç®€å•ï¼ŒGCæ—¶æš‚åœç”¨æˆ·è¿›ç¨‹ï¼Œæ–°ç”Ÿä»£ Serial é‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼ŒSerial Oldé‡‡ç”¨æ ‡è®°æ•´ç†ç®—æ³•ã€‚</p><p><img src="`+li+`" alt="image-20210406165830911"></p><p>3ï¼‰ä¼˜ç¼ºç‚¹</p><p>å•çº¿ç¨‹ + STWï¼Œé‚£ä¹ˆè¿™ä¸ªæ”¶é›†å™¨è¿˜æœ‰å­˜åœ¨çš„ä»·å€¼å—ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼šæœ‰ï¼æˆ‘ä»¬åœ¨åæ§½å•çº¿ç¨‹çš„åŒæ—¶ï¼Œä¸è¦å¿˜äº†ï¼Œå•çº¿ç¨‹å¸¦æ¥çš„ä¾¿æ·æ€§</p><p>å®é™…ä¸Šï¼ŒSerialæ”¶é›†å™¨ä¾ç„¶æ˜¯hotspotåœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹çš„é»˜è®¤æ”¶é›†å™¨ï¼Œå› ä¸ºå®ƒè¶³å¤Ÿç®€å•æœ‰æ•ˆï¼Œæ²¡æœ‰å¤šçº¿ç¨‹GCçš„åè°ƒå’Œé¢å¤–å¼€é”€ï¼Œåœ¨å•æ ¸æˆ–èµ„æºæœ‰é™çš„ç¯å¢ƒä¸‹ï¼Œå•çº¿ç¨‹ç”šè‡³æ¯”å¤šçº¿ç¨‹è¿˜è¦é«˜æ•ˆã€‚</p><p>è€ŒSerial Oldåˆ™ä½œä¸ºä¸‹é¢å‡ æ¬¾åƒåœ¾æ”¶é›†å™¨çš„å…œåº•æªæ–½ï¼Œæ¯”å¦‚CMSã€G1ç­‰å¤„ç†ä¸äº†è€å¹´ä»£æ—¶ï¼Œä»–ä»¬ä¼šè‡ªåŠ¨å¯ç”¨SOldæ¥åšFullGCè¿›è¡Œæ”¶é›†ã€‚</p><p>4ï¼‰é…ç½®å‚æ•°</p><p>åœ¨ç¨‹åºè¿è¡Œå‚æ•°ä¸­æ·»åŠ 2ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><ul><li><code>-XX:+UseSerialGC</code>ï¼šæŒ‡å®šå¹´è½»ä»£å’Œè€å¹´ä»£éƒ½ä½¿ç”¨ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ï¼Œ(æ–°ç”Ÿä»£å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£æ ‡è®°-å‹ç¼©)</li><li><code>-XX:+PrintGCDetails</code>ï¼šæ‰“å°åƒåœ¾å›æ”¶çš„è¯¦ç»†ä¿¡æ¯</li></ul><p>5ï¼‰æ“ä½œæ¡ˆä¾‹</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ä¸ºäº†æµ‹è¯•GCï¼Œå°†å †çš„åˆå§‹å’Œæœ€å¤§å†…å­˜éƒ½è®¾ç½®ä¸º16M</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># javaä»£ç ä½¿ç”¨æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+UseSerialGC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCDetails</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xms16m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xmx16m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+hi+`" alt="image-20210406170434507"></p><p>6ï¼‰å¯åŠ¨ç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢ä¿¡æ¯ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Allocation</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Failure</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">DefNew: 4416K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">512K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4928</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0046102</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 4416K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1973K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">15872</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0046533</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times: user</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0.00, real</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Full GC </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Allocation</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Failure</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Tenured: 10944K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3107K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10944</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0085637</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 15871K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3107K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">15872</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Metaspace: 3496K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3496K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1056768</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0085974</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times: user</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.02</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0.00, real</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.01</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>GCæ—¥å¿—ä¿¡æ¯è§£è¯»ï¼š</p><p>å¹´è½»ä»£çš„å†…å­˜GCå‰åçš„å¤§å°ï¼š</p><ul><li>DefNewï¼šè¡¨ç¤ºä½¿ç”¨çš„æ˜¯ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ã€‚</li><li>4416K-&gt;512K (4928K)ï¼šè¡¨ç¤ºï¼Œå¹´è½»ä»£GCå‰ï¼Œå æœ‰4416Kå†…å­˜ï¼ŒGCåï¼Œå æœ‰512Kå†…å­˜ï¼Œæ€»å¤§å°4928K</li><li>0.0046102 secsï¼šè¡¨ç¤ºï¼ŒGCæ‰€ç”¨çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚</li><li>4416K-&gt;1973K (15872K)ï¼šè¡¨ç¤ºï¼ŒGCå‰ï¼Œå †å†…å­˜å æœ‰4416Kï¼ŒGCåï¼Œå æœ‰1973Kï¼Œæ€»å¤§å°ä¸º15872K</li><li>Full GCï¼šè¡¨ç¤ºï¼Œå†…å­˜ç©ºé—´å…¨éƒ¨è¿›è¡ŒGCï¼Œè€å¹´ä»£ã€å…ƒç©ºé—´</li></ul><h3 id="_6-5-2-å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#_6-5-2-å¹¶è¡Œ"><span>6.5.2 å¹¶è¡Œ</span></a></h3><p>å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨åœ¨ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨çš„åŸºç¡€ä¹‹ä¸Šåšäº†æ”¹è¿›ï¼Œå°†å•çº¿ç¨‹æ”¹ä¸ºäº†å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿™æ ·å¯ä»¥ç¼©çŸ­åƒåœ¾å›æ”¶çš„æ—¶é—´ã€‚ï¼ˆè¿™é‡Œæ˜¯æŒ‡ï¼Œå¹¶è¡Œèƒ½åŠ›è¾ƒå¼ºçš„æœºå™¨ï¼‰</p><p>å½“ç„¶äº†ï¼Œå¹¶è¡Œåƒåœ¾æ”¶é›†å™¨åœ¨æ”¶é›†çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šæš‚åœåº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªå’Œä¸²è¡Œåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œé€Ÿåº¦æ›´å¿«äº›ï¼Œæš‚åœçš„æ—¶é—´æ›´çŸ­ä¸€äº›</p><p>1ï¼‰æ¦‚è¿°</p><ul><li><p>ParNewæ”¶é›†å™¨ï¼š</p><p>æ–°ç”Ÿä»£çš„ï¼Œ<strong>æ— éå°±æ˜¯å°†Serialçš„å•çº¿ç¨‹æ¢æˆå¤šçº¿ç¨‹</strong>ï¼Œå®ƒç°åœ¨å­˜åœ¨çš„å”¯ä¸€ä»·å€¼å°±æ˜¯<strong>ä½œä¸ºæ–°ç”Ÿä»£æ”¶é›†å™¨</strong>é…åˆè€å¹´ä»£çš„CMSæ”¶é›†å™¨ä¸€èµ·å·¥ä½œï¼Œå¹¶ä¸”åœ¨<strong>jdk9é‡Œä¹Ÿå·²ä¸å†æ¨èè¿™å¥—ç»„åˆï¼Œè€Œæ˜¯æ¨èG1</strong>ã€‚</p><p>é€šè¿‡<code>-XX:+UseParNewGC</code>å‚æ•°è®¾ç½®å¹´è½»ä»£ä½¿ç”¨ParNewå›æ”¶å™¨ï¼Œè€å¹´ä»£ä½¿ç”¨çš„ä¾ç„¶æ˜¯ä¸²è¡Œæ”¶é›†å™¨ã€‚</p></li></ul><p><img src="`+ei+`" alt="image-20220915204744944"></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å‚æ•° </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+UseParNewGC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCDetails</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xms16m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xmx16m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#æ‰“å°å‡ºçš„ä¿¡æ¯ </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Allocation</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Failure</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ParNew: 4416K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">512K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4928</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0032106</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 4416K- </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1988K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">15872</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0032697</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times: user</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0.00, real</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±ä»¥ä¸Šä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œ ParNew: ä½¿ç”¨çš„æ˜¯ParNewæ”¶é›†å™¨ã€‚å…¶ä»–ä¿¡æ¯å’Œä¸²è¡Œæ”¶é›†å™¨ä¸€è‡´ã€‚</p><blockquote><p>æˆ‘ä»¬åªéœ€è¦çŸ¥é“çš„æ˜¯ï¼šæ›¾ç»ï¼Œå®ƒå­˜åœ¨è¿‡ã€‚</p></blockquote><ul><li><p>å¦å¤–ä¸€å¯¹å¹¶è¡Œæ”¶é›†å™¨ï¼š</p><p>Parallel Scavenge ï¼ˆæ–°ç”Ÿä»£çš„ï¼‰ / Parallel Old ï¼ˆè€å¹´ä»£çš„ï¼‰</p></li></ul><p>å…³äºå¹¶è¡Œæ”¶é›†å™¨ï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹Parallelè¿™ä¸€å¯¹ï¼Œè¿™ä¸€å¯¹ä¹Ÿæ˜¯ä¸»æµçš„jdk8ä¸‹é»˜è®¤æ”¶é›†å™¨</p><p>2ï¼‰è¯¦è§£</p><p><img src="`+pi+`" alt="image-20210406173628609"></p><p>Parallelè¿™ä¸€å¯¹ï¼Œå®ƒæ‰€å…³æ³¨çš„æ˜¯ç³»ç»Ÿçš„ååé‡ã€‚æ‰€è°“ååé‡ï¼Œåæ˜ çš„æ˜¯ç”¨æˆ·çº¿ç¨‹åœ¨ç³»ç»Ÿæ•´ä½“æ—¶é—´é‡Œå¯ç”¨çš„æ¯”ä¾‹ï¼š</p><p>å³ï¼š ååé‡ = ç”¨æˆ·ä»£ç è¿è¡Œæ—¶é—´ / ( ç”¨æˆ·ä»£ç è¿è¡Œæ—¶é—´ + åƒåœ¾æ”¶é›†å™¨è¿è¡Œæ—¶é—´ )</p><p>è¿™ä¸€ç‚¹ï¼Œä»å®ƒçš„é…ç½®å‚æ•°ä¸Šç›´æ¥å°±èƒ½çœ‹å‡ºæ¥</p><p>3ï¼‰å‚æ•°</p><p>ParallelGCæ”¶é›†å™¨å·¥ä½œæœºåˆ¶å’ŒParNewGCæ”¶é›†å™¨ä¸€æ ·ï¼Œåªæ˜¯åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œæ–°å¢äº†ä¸¤ä¸ªå’Œç³»ç»Ÿååé‡ç›¸å…³çš„å‚æ•°ï¼Œä½¿å¾—å…¶ä½¿ç”¨èµ·æ¥æ›´åŠ çš„çµæ´»å’Œé«˜æ•ˆã€‚</p><ul><li><code>-XX:+UseParallelGC</code>: å¹´è½»ä»£ä½¿ç”¨ParallelGCåƒåœ¾å›æ”¶å™¨ï¼Œè€å¹´ä»£ä½¿ç”¨ä¸²è¡Œå›æ”¶å™¨ã€‚</li><li><code>-XX:+UseParallelOldGC</code>: å¹´è½»ä»£ä½¿ç”¨ParallelGC(å¹¶è¡Œ)åƒåœ¾å›æ”¶å™¨ï¼Œè€å¹´ä»£ä½¿ç”¨ParallelOldGC(å¹¶è¡Œ)åƒåœ¾å›æ”¶å™¨ã€‚</li><li><code>-XX:MaxGCPauseMillis</code><ul><li>è®¾ç½®æœ€å¤§çš„åƒåœ¾æ”¶é›†æ—¶çš„åœé¡¿æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’</li><li>éœ€è¦æ³¨æ„ï¼ŒParallelGCä¸ºäº†è¾¾åˆ°è®¾ç½®çš„åœé¡¿æ—¶é—´ï¼Œå¯èƒ½ä¼šè°ƒæ•´å †å¤§å°æˆ–å…¶ä»–çš„å‚æ•°ï¼Œå¦‚æœå †çš„å¤§å°è®¾ç½®çš„è¾ƒå°ï¼Œå°±ä¼šå¯¼è‡´GCå·¥ä½œå˜å¾—å¾ˆé¢‘ç¹ï¼Œåè€Œå¯èƒ½ä¼šå½±å“åˆ°æ€§èƒ½ã€‚</li><li>è¯¥å‚æ•°ä½¿ç”¨éœ€è°¨æ…ã€‚</li></ul></li><li><code>-XX:GCTimeRatio</code><ul><li>ç›´æ¥è®¾ç½®åƒåœ¾å›æ”¶æ—¶é—´å ç¨‹åºè¿è¡Œæ—¶é—´çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œå…¬å¼ä¸º1/(1+n)ã€‚</li><li>å®ƒçš„å€¼ä¸º0~100ä¹‹é—´çš„æ•°å­—ï¼Œé»˜è®¤å€¼ä¸º99ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾å›æ”¶æ—¶é—´ä¸èƒ½è¶…è¿‡1%</li><li>è¯¥å‚æ•°äº†è§£ï¼Œä¸€èˆ¬ä¸è®¾ç½®</li></ul></li><li><code>-XX:UseAdaptiveSizePolicy</code><ul><li>è‡ªé€‚åº”GCæ¨¡å¼ï¼Œåƒåœ¾å›æ”¶å™¨å°†è‡ªåŠ¨è°ƒæ•´å¹´è½»ä»£ã€è€å¹´ä»£ç­‰å‚æ•°ï¼Œè¾¾åˆ°ååé‡ã€å †å¤§å°ã€åœé¡¿æ—¶é—´ä¹‹é—´çš„å¹³è¡¡ã€‚</li><li>ä¸€èˆ¬ç”¨äºï¼Œæ‰‹åŠ¨è°ƒæ•´å‚æ•°æ¯”è¾ƒå›°éš¾çš„åœºæ™¯ï¼Œè®©æ”¶é›†å™¨è‡ªåŠ¨è¿›è¡Œè°ƒæ•´ã€‚</li><li>ä¹Ÿä¸å¸¸ç”¨</li></ul></li></ul><p>3ï¼‰è°ƒè¯•</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">UseParallelGC </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">UseParallelOldGC </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxGCPauseMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PrintGCDetails </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Xms16m </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Xmx16m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+ti+`" alt="image-20210406174157937"></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#æ‰“å°çš„ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">GC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Allocation Failure</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PSYoungGen</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 4096K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">480</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">4608K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 4096K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1840</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">15872K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0034307</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Full </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">GC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Ergonomics</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PSYoungGen</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 505K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">4608K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ParOldGen</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 10332K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10751</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">11264K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 10837K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10751</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">15872K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Metaspace</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 3491K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3491</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1056768K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)],</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0793622</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.13</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.08</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PSYoungGenï¼šå¹´è½»ä»£ï¼ŒParallel Scavenge</p><p>ParOldGenï¼šè€å¹´ä»£ï¼ŒParallel Old</p><p>æœ‰ä»¥ä¸Šä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œå¹´è½»ä»£å’Œè€å¹´ä»£éƒ½ä½¿ç”¨äº†ParallelGCåƒåœ¾å›æ”¶å™¨ã€‚</p><h3 id="_6-5-3-å¹¶å‘-cms" tabindex="-1"><a class="header-anchor" href="#_6-5-3-å¹¶å‘-cms"><span>6.5.3 å¹¶å‘ - CMS</span></a></h3><p>CMSå…¨ç§° Concurrent Mark Sweepï¼Œæ˜¯ä¸€æ¬¾å¹¶å‘çš„ã€ä½¿ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•çš„åƒåœ¾å›æ”¶å™¨ï¼Œè¯¥å›æ”¶å™¨æ˜¯é’ˆå¯¹è€å¹´ä»£åƒåœ¾å›æ”¶çš„ï¼Œé€šè¿‡å‚æ•°<code>-XX:+UseConcMarkSweepGC</code>è¿›è¡Œè®¾ç½®ã€‚</p><p>1ï¼‰ç®€ä»‹</p><p>CMSæ”¶é›†å™¨ï¼Œå·¥ä½œåœ¨è€å¹´ä»£ã€‚</p><p>å‰é¢çš„æ”¶é›†å™¨éƒ½æ˜¯è¦åœæ­¢ç”¨æˆ·çº¿ç¨‹çš„ï¼Œè€ŒCMSæ”¶é›†å™¨è¿™æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶è¡Œå¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çº¿ç¨‹å’ŒGCçº¿ç¨‹åœ¨åŒä¸€æ—¶é—´ä¸€èµ·å·¥ä½œã€‚</p><p>2ï¼‰CMSåƒåœ¾å›æ”¶å™¨çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="`+ki+'" alt="image-20210407085100468"></p><p><img src="'+di+`" alt="image-20220915205359020"></p><ul><li>åˆå§‹åŒ–æ ‡è®°(CMS-initial-mark) ï¼šæ ‡è®°rootç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œä¼šå¯¼è‡´stwï¼Œä½†æ˜¯è¿™ä¸ªæ²¡å¤šå°‘å¯¹è±¡ï¼Œæ—¶é—´çŸ­</li><li>å¹¶å‘æ ‡è®°(CMS-concurrent-mark)ï¼šæ²¿ç€ä¸Šä¸€æ­¥çš„rootï¼Œå¾€ä¸‹è¿½è¸ªï¼Œè¿™æ­¥è€—æ—¶æœ€é•¿ï¼Œä½†æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶è¿è¡Œ</li><li>é¢„æ¸…ç†ï¼ˆCMS-concurrent-precleanï¼‰ï¼Œä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶è¿è¡Œï¼›</li><li>é‡æ–°æ ‡è®°(CMS-remark) ï¼šå› ä¸ºä¸Šä¸€æ­¥æ˜¯å¹¶å‘è¿›è¡Œçš„ï¼Œæ‰€ä»¥å†å¢é‡è¿‡ä¸€éæœ‰å˜åŒ–çš„ï¼Œä¼šå¯¼è‡´stwï¼Œä½†æ¯”ä¸Šä¸€æ­¥å°‘å¾ˆå¤š</li><li>å¹¶å‘æ¸…é™¤(CMS-concurrent-sweep)ï¼šæ ‡è®°å®Œçš„å¹²æ‰ï¼Œå› ä¸ºæ˜¯æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼Œä¸éœ€è¦ç§»åŠ¨å­˜æ´»å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶è¿è¡Œ</li><li>è°ƒæ•´å †å¤§å°ï¼Œè®¾ç½®CMSåœ¨æ¸…ç†ä¹‹åè¿›è¡Œå†…å­˜å‹ç¼©ï¼Œç›®çš„æ˜¯æ¸…ç†å†…å­˜ä¸­çš„ç¢ç‰‡ï¼›</li><li>é‡ç½®çº¿ç¨‹ï¼šé‡ç½®çŠ¶æ€ç­‰å¾…ä¸‹æ¬¡CMSçš„è§¦å‘(CMS-concurrent-reset)ï¼Œä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶è¿è¡Œ</li></ul><p>3ï¼‰æµ‹è¯•</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#è®¾ç½®å¯åŠ¨å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+UseConcMarkSweepGC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCDetails</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xms16m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xmx16m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+ri+`" alt="image-20210407084211962"></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#è¿è¡Œæ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#æ³¨æ„ï¼Œcmsé»˜è®¤æ­é…çš„æ–°ç”Ÿä»£æ˜¯ parnew ï¼š</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">GC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Allocation Failure</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ParNew</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 4926K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">512</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">4928K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0041843</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 9424K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">6736</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">15872K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0042168</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#è€å¹´ä»£å¼€å§‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#ç¬¬ä¸€æ­¥ï¼Œåˆå§‹æ ‡è®°</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">GC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CMS Initial Mark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CMS</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">initial</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mark</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 6224</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10944K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 6824</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">15872K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0004209</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#ç¬¬äºŒæ­¥ï¼Œå¹¶å‘æ ‡è®°</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CMS</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">concurrent</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mark</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CMS</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">concurrent</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mark</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.002</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.002</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#ç¬¬ä¸‰æ­¥ï¼Œé¢„å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CMS</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">concurrent</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">preclean</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CMS</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">concurrent</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">preclean</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.000</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#ç¬¬å››æ­¥ï¼Œé‡æ–°æ ‡è®°</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">GC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">CMS Final Remark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">YG</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> occupancy</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1657</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4928</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)][</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Rescan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">parallel</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0005811</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">][</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">weak refs processing</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0000136</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">][</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> unloading</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, 0.0003671 secs][scrub symbol table, 0.0006813 secs][scrub string table, 0.0001216 secs][1 CMS-remark: 6224K(10944K)] 7881K(15872K), 0.0018324 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#ç¬¬äº”æ­¥ï¼Œå¹¶å‘æ¸…ç†</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[CMS-concurrent-sweep-start]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[CMS-concurrent-sweep: 0.004/0.004 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#ç¬¬å…­æ­¥ï¼Œé‡ç½®</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[CMS-concurrent-reset-start]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[CMS-concurrent-reset: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±ä»¥ä¸Šæ—¥å¿—ä¿¡æ¯ï¼Œå¯ä»¥çœ‹å‡ºCMSæ‰§è¡Œçš„è¿‡ç¨‹ã€‚</p><p>4ï¼‰ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä¸å¯å¦è®¤ï¼Œä¸€æ¬¾ä¼˜ç§€çš„æ”¶é›†å™¨ï¼Œå¹¶å‘æ”¶é›†ï¼Œä½åœé¡¿ã€‚</li><li>äº’è”ç½‘æœåŠ¡å™¨ä¸Šä½åœé¡¿çš„ç°å®è¦æ±‚å¾ˆå»åˆï¼Œä¸€ä¸ªç½‘ç«™æ€»ä¸èƒ½å‘Šè¯‰ç”¨æˆ·ä½ ç”¨10åˆ†é’Ÿï¼Œæ­‡ä¼šå†æ¥ç”¨ã€‚</li></ul><p>ä½†æ˜¯ï¼ŒCMSä¹Ÿä¸æ˜¯å®Œç¾çš„ï¼š</p><ul><li>å®ƒä¸èƒ½ç­‰åˆ°å†…å­˜åƒç´§äº†æ‰å¯åŠ¨æ”¶é›†ã€‚å› ä¸ºæ”¶é›†æœŸé—´ç”¨æˆ·çº¿ç¨‹è¿˜åœ¨è·‘ï¼Œå¾—é¢„ç•™ã€‚</li><li>æµ®åŠ¨åƒåœ¾å¹²ä¸æ‰ï¼Œåœ¨å¹¶å‘æ ‡è®°ã€å¹¶å‘æ¸…ç†æ—¶ï¼Œäº§ç”Ÿçš„æ–°åƒåœ¾å¿…é¡»åˆ°ä¸‹ä¸€æ¬¡æ”¶é›†æ—¶å¤„ç†ã€‚</li><li>æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼Œå…ä¸äº†äº§ç”Ÿç¢ç‰‡ï¼Œå¯ä»¥å¼€å¯å‹ç¼©ä½†è¿™äº›å‚æ•°åœ¨jdk9é‡Œä¹Ÿå·²åºŸå¼ƒæ‰</li><li>æœ€åï¼Œæ­é…CMSçš„å¹´è½»ä»£ç°åœ¨åªå‰©ä¸‹äº†ParNewï¼Œæ˜¯é‚£ä¹ˆçš„è‹ç™½æ— åŠ›ã€‚å®é™…ä¸Šï¼Œjdk9å¼€å§‹å·²ç»æŠŠå®ƒé€æ­¥æ·˜æ±°</li></ul><p>é‚£ä¹ˆæ›¿ä»£å®ƒçš„æ˜¯è°å‘¢ï¼ŸG1å‡ºåœºâ€¦â€¦</p><h3 id="_6-5-4-å¹¶å‘-g1" tabindex="-1"><a class="header-anchor" href="#_6-5-4-å¹¶å‘-g1"><span>6.5.4 å¹¶å‘ - G1</span></a></h3><h4 id="_1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_1-æ¦‚è¿°"><span>1ï¼‰æ¦‚è¿°</span></a></h4><p>ä¸ºè§£å†³CMSç®—æ³•äº§ç”Ÿç©ºé—´ç¢ç‰‡å’Œå…¶å®ƒä¸€ç³»åˆ—çš„é—®é¢˜ç¼ºé™·ï¼ŒG1ï¼ˆGarbage Firstï¼‰ç®—æ³•ï¼Œåœ¨JDK 7u4ç‰ˆæœ¬è¢«æ­£å¼æ¨å‡º</p><p>oracleå®˜æ–¹è®¡åˆ’åœ¨jdk9ä¸­å°†G1å˜æˆé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä»¥æ›¿ä»£CMSã€‚</p><p>JDK9é»˜è®¤G1ä¸ºåƒåœ¾æ”¶é›†å™¨çš„ææ¡ˆï¼šhttps://openjdk.java.net/jeps/248</p><p>å°†CMSæ ‡è®°ä¸ºä¸¢å¼ƒçš„ææ¡ˆï¼šhttps://openjdk.java.net/jeps/291</p><p>G1çš„è®¾è®¡åŸåˆ™å°±æ˜¯ç®€åŒ–JVMæ€§èƒ½è°ƒä¼˜ï¼Œå¼€å‘äººå‘˜åªéœ€è¦ç®€å•çš„ä¸‰æ­¥å³å¯å®Œæˆè°ƒä¼˜ï¼š</p><ol><li>ç¬¬ä¸€æ­¥ï¼Œå¼€å¯G1åƒåœ¾æ”¶é›†å™¨</li><li>ç¬¬äºŒæ­¥ï¼Œè®¾ç½®å †çš„æœ€å¤§å†…å­˜</li><li>ç¬¬ä¸‰æ­¥ï¼Œè®¾ç½®æœ€å¤§çš„åœé¡¿æ—¶é—´</li></ol><p>G1ä¸­æä¾›äº†ä¸‰ç§æ¨¡å¼åƒåœ¾å›æ”¶æ¨¡å¼ï¼ŒYoung GCã€Mixed GC å’Œ Full GCï¼Œåœ¨ä¸åŒçš„æ¡ä»¶ä¸‹è¢«è§¦å‘ã€‚</p><h4 id="_2-åŸç†" tabindex="-1"><a class="header-anchor" href="#_2-åŸç†"><span>2ï¼‰åŸç†</span></a></h4><p>G1åƒåœ¾æ”¶é›†å™¨ç›¸å¯¹æ¯”å…¶ä»–æ”¶é›†å™¨è€Œè¨€ï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºå®ƒå–æ¶ˆäº†å¹´è½»ä»£ã€è€å¹´ä»£çš„ç‰©ç†åˆ’åˆ†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å°†å †åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªåŒºåŸŸï¼ˆRegionï¼‰ï¼Œè¿™äº›åŒºåŸŸä¸­åŒ…å«äº†æœ‰é€»è¾‘ä¸Šçš„å¹´è½»ä»£ã€è€å¹´ä»£åŒºåŸŸã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼Œæˆ‘ä»¬å†ä¹Ÿä¸ç”¨å•ç‹¬çš„ç©ºé—´å¯¹æ¯ä¸ªä»£è¿›è¡Œè®¾ç½®äº†ï¼Œä¸ç”¨æ‹…å¿ƒæ¯ä¸ªä»£å†…å­˜æ˜¯å¦è¶³å¤Ÿã€‚</p><p><img src="`+gi+'" alt="image-20220915205958150"></p><p>åœ¨G1åˆ’åˆ†çš„åŒºåŸŸä¸­ï¼Œå¹´è½»ä»£çš„åƒåœ¾æ”¶é›†ä¾ç„¶é‡‡ç”¨æš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹çš„æ–¹å¼ï¼Œå°†å­˜æ´»å¯¹è±¡æ‹·è´åˆ°è€å¹´ä»£æˆ–è€…Survivorç©ºé—´ï¼ŒG1æ”¶é›†å™¨é€šè¿‡å°†å¯¹è±¡ä»ä¸€ä¸ªåŒºåŸŸå¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªåŒºåŸŸï¼Œå®Œæˆäº†æ¸…ç†å·¥ä½œã€‚</p><p>è¿™å°±æ„å‘³ç€ï¼Œåœ¨æ­£å¸¸çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼ŒG1å®Œæˆäº†å †çš„å‹ç¼©ï¼ˆè‡³å°‘æ˜¯éƒ¨åˆ†å †çš„å‹ç¼©ï¼‰ï¼Œè¿™æ ·ä¹Ÿå°±ä¸ä¼šæœ‰cmså†…å­˜ç¢ç‰‡é—®é¢˜çš„å­˜åœ¨äº†ã€‚</p><p><img src="'+ci+'" alt="image-20210402154906657"></p><p>G1æ‰“ç ´äº†ä¹‹å‰çš„ä¼ ç»Ÿè§‚å¿µï¼Œå®ƒä¾ç„¶æŠŠå†…å­˜åˆ’åˆ†ä¸ºedenã€survivorã€oldï¼ŒåŒæ—¶å¤šäº†ä¸€ä¸ªhumongousï¼ˆå·¨å¤§çš„ï¼‰åŒºæ¥å­˜å·¨å‹å¯¹è±¡ã€‚</p><ul><li>å¦‚æœä¸€ä¸ªå¯¹è±¡å ç”¨çš„ç©ºé—´è¶…è¿‡äº†åˆ†åŒºå®¹é‡50%ä»¥ä¸Šï¼ŒG1æ”¶é›†å™¨å°±è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå·¨å‹å¯¹è±¡ã€‚</li><li>è¿™äº›å·¨å‹å¯¹è±¡ï¼Œé»˜è®¤ç›´æ¥ä¼šè¢«åˆ†é…åœ¨è€å¹´ä»£ï¼Œä½†æ˜¯å¦‚æœå®ƒæ˜¯ä¸€ä¸ªçŸ­æœŸå­˜åœ¨çš„å·¨å‹å¯¹è±¡ï¼Œå°±ä¼šå¯¹åƒåœ¾æ”¶é›†å™¨é€ æˆè´Ÿé¢å½±å“ã€‚</li><li>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒG1åˆ’åˆ†äº†ä¸€ä¸ªHumongousåŒºï¼Œå®ƒç”¨æ¥ä¸“é—¨å­˜æ”¾å·¨å‹å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ªHåŒºè£…ä¸ä¸‹ä¸€ä¸ªå·¨å‹å¯¹è±¡ï¼Œé‚£ä¹ˆG1ä¼šå¯»æ‰¾è¿ç»­çš„Håˆ†åŒºæ¥å­˜å‚¨ã€‚ä¸ºäº†èƒ½æ‰¾åˆ°è¿ç»­çš„HåŒºï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸å¯åŠ¨Full GCã€‚</li></ul><p>ä½†æ˜¯ï¼Œè¿™äº›åŒºåœ¨ç‰©ç†åœ°å€ä¸Šä¸å†è¿ç»­ã€‚è€Œæ˜¯æŠŠæ•´ä¸ªç‰©ç†åœ°å€åˆ†æˆä¸€ä¸ªä¸ªå¤§å°ç›¸ç­‰çš„regionï¼Œæ¯ä¸€ä¸ªregionå¯ä»¥æ˜¯ä¸Šé¢è§’è‰²ä¸­çš„ä¸€ä¸ªï¼Œè¿˜å¯ä»¥åœ¨æŸä¸ªæ—¶åˆ»è½¬å˜è§’è‰²ï¼Œä»edenå˜æˆold ï¼ï¼ˆå°±æ˜¯ä¸ªæ ‡ç­¾ï¼‰</p><p>è¿™æ ·æ”¶é›†çš„æ—¶å€™ï¼Œå®ƒæ”¶é›†æŸäº›æ€§ä»·æ¯”é«˜çš„regionå›æ”¶å°±å¯ä»¥äº†ã€‚æ‰€ä»¥æŸä¸ªæ—¶åˆ»ï¼ŒG1å¯èƒ½è¿è€å¸¦å°‘ä¸€èµ·æ”¶æ‹¾ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªåˆ’æ—¶ä»£çš„æ”¹å˜ï¼</p><p><strong>é‚£å®ƒæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿæ”¶æ‹¾å“ªäº›åŒºå—å‘¢ï¼Ÿ</strong></p><p><img src="'+oi+'" alt="image-20210402160801656"></p><p>å…ˆçœ‹ä¸¤ä¸ªæ¦‚å¿µï¼Œå®¹æ˜“ææ··ï¼š</p><ul><li><p>Remembered Setï¼šè®°å¿†é›†ï¼Œç®€ç§°RSï¼Œæ¯ä¸ª Regionå…³è”ä¸€ä¸ªã€‚RS æ¯”è¾ƒå¤æ‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯è®°å½•Regionä¹‹é—´å¯¹è±¡çš„å¼•ç”¨å…³ç³»ã€‚</p></li><li><p>Collection Setï¼šç®€ç§°CSetï¼Œåœ¨ä¸€æ¬¡æ”¶é›†ä¸­ï¼Œé‚£äº›æ€§ä»·æ¯”é«˜çš„Regionæªå‡ºæ¥ç»„æˆä¸€ä¸ªå›æ”¶é›†ï¼Œå°†æ¥ä¸€å£æ°”å›æ”¶æ‰ã€‚è¿™ä¸ªé›†åˆé‡Œæ˜¯ç­›é€‰å‡ºæ¥çš„ä¸€äº›Region</p><p>è‡³äºRegioné‡Œé¢å‰©ä¸‹çš„å­˜æ´»çš„å¯¹è±¡ï¼Œå¤šä¸ªRegionå‹ç¼©åˆ°ä¸€ä¸ªç©ºé—²Regioné‡Œå»ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€æ¬¡æ”¶é›†ã€‚</p></li></ul><p><strong>Remembered Setï¼ˆå·²è®°å¿†é›†åˆï¼‰</strong></p><p>åœ¨GCå¹´è½»ä»£çš„å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°å¹´è½»ä»£ä¸­å¯¹è±¡çš„æ ¹å¯¹è±¡å‘¢ï¼Ÿ</p><p>æ ¹å¯¹è±¡å¯èƒ½æ˜¯åœ¨å¹´è½»ä»£ä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨è€å¹´ä»£ä¸­ï¼Œé‚£ä¹ˆè€å¹´ä»£ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯æ ¹ä¹ˆï¼Ÿ</p><p>å¦‚æœå…¨é‡æ‰«æè€å¹´ä»£ï¼Œé‚£ä¹ˆè¿™æ ·æ‰«æä¸‹æ¥ä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ã€‚</p><p>äºæ˜¯ï¼ŒG1å¼•è¿›äº†RSetçš„æ¦‚å¿µã€‚å®ƒçš„å…¨ç§°æ˜¯Remembered Setï¼Œå…¶ä½œç”¨æ˜¯è·Ÿè¸ªæŒ‡å‘æŸä¸ªå †å†…çš„å¯¹è±¡å¼•ç”¨ã€‚</p><p><img src="'+yi+`" alt="image-20220915210947125"></p><p>æ¯ä¸ªRegionåˆå§‹åŒ–æ—¶ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªRSetï¼Œè¯¥é›†åˆç”¨æ¥è®°å½•å¹¶è·Ÿè¸ªå…¶å®ƒRegionæŒ‡å‘è¯¥Regionä¸­å¯¹è±¡çš„å¼•ç”¨ï¼Œæ¯ä¸ªRegioné»˜è®¤æŒ‰ç…§512Kbåˆ’åˆ†æˆå¤šä¸ªCardï¼Œæ‰€ä»¥RSetéœ€è¦è®°å½•çš„ä¸œè¥¿åº”è¯¥æ˜¯ xx Regionçš„ xx Cardã€‚</p><p>è¿™æ ·å°±ä¸ç”¨å…¨éƒ¨æ‰«æï¼Œåœ¨Rsetå°±å¯ä»¥æ‰¾åˆ°è°å¼•ç”¨æ”¹äº†æˆ‘</p><p>3ï¼‰æ¨¡å¼</p><p>G1ä¸­æä¾›äº†ä¸‰ç§æ¨¡å¼åƒåœ¾å›æ”¶æ¨¡å¼ï¼ŒYoung GCã€Mixed GC å’Œ Full GCï¼Œåœ¨ä¸åŒçš„æ¡ä»¶ä¸‹è¢«è§¦å‘ã€‚</p><p>æ‰€è°“çš„æ¨¡å¼ï¼Œå…¶å®ä¹Ÿå°±æ˜¯G1æ”¶é›†çš„æ—¶å€™ï¼ŒRegioné€‰å“ªç§ï¼Œæ˜¯åªé€‰å¹´è½»ä»£çš„Regionï¼Ÿè¿˜æ˜¯ä¸¤ç§éƒ½ç­›é€‰ï¼Ÿ</p><h4 id="young-gc" tabindex="-1"><a class="header-anchor" href="#young-gc"><span>Young GC</span></a></h4><p>é€‰å®šæ‰€æœ‰å¹´è½»ä»£é‡Œçš„Regionã€‚é€šè¿‡æ§åˆ¶å¹´è½»ä»£çš„regionä¸ªæ•°ï¼Œå³å¹´è½»ä»£å†…å­˜å¤§å°ï¼Œæ¥æ§åˆ¶young GCçš„æ—¶é—´å¼€é”€ã€‚</p><table><thead><tr><th style="text-align:center;">å‚æ•°</th><th style="text-align:center;">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center;">-XX:MaxGCPauseMillis</td><td style="text-align:center;">è®¾ç½®G1æ”¶é›†è¿‡ç¨‹ç›®æ ‡æ—¶é—´ï¼Œé»˜è®¤å€¼200ms</td></tr><tr><td style="text-align:center;">-XX:G1NewSizePercent</td><td style="text-align:center;">æ–°ç”Ÿä»£æœ€å°å€¼ï¼Œé»˜è®¤å€¼5%</td></tr><tr><td style="text-align:center;">-XX:G1MaxNewSizePercent</td><td style="text-align:center;">æ–°ç”Ÿä»£æœ€å¤§å€¼ï¼Œé»˜è®¤å€¼60%</td></tr></tbody></table><blockquote><p><strong>Young GCä¸»è¦æ˜¯å¯¹EdenåŒºè¿›è¡ŒGCï¼Œå®ƒåœ¨Edenç©ºé—´è€—å°½æ—¶ä¼šè¢«è§¦å‘ã€‚</strong></p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Edenç©ºé—´çš„æ•°æ®ç§»åŠ¨åˆ°Survivorç©ºé—´ä¸­ï¼Œå¦‚æœSurvivorç©ºé—´ä¸å¤Ÿï¼ŒEdenç©ºé—´çš„éƒ¨åˆ†æ•°æ®ä¼šç›´æ¥æ™‹å‡åˆ°å¹´è€ä»£ç©ºé—´ã€‚</span></span>
<span class="line"><span>SurvivoråŒºçš„æ•°æ®ç§»åŠ¨åˆ°æ–°çš„SurvivoråŒºä¸­ï¼Œä¹Ÿæœ‰éƒ¨åˆ†æ•°æ®æ™‹å‡åˆ°è€å¹´ä»£ç©ºé—´ä¸­ã€‚</span></span>
<span class="line"><span>æœ€ç»ˆEdenç©ºé—´çš„æ•°æ®ä¸ºç©ºï¼ŒGCåœæ­¢å·¥ä½œï¼Œåº”ç”¨çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="mixed-gc" tabindex="-1"><a class="header-anchor" href="#mixed-gc"><span>Mixed GC</span></a></h4><p>é€‰å®šæ‰€æœ‰å¹´è½»ä»£é‡Œçš„Regionï¼Œå¤–åŠ ç»Ÿè®¡çš„åœ¨ç”¨æˆ·æŒ‡å®šçš„å¼€é”€ç›®æ ‡èŒƒå›´å†…é€‰æ‹©æ”¶ç›Šé«˜çš„è€å¹´ä»£Regionã€‚</p><table><thead><tr><th style="text-align:center;">å‚æ•°</th><th style="text-align:center;">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center;">-XX:InitiatingHeapOccupancyPercent</td><td style="text-align:center;">å½“è€å¹´ä»£å¤§å°å æ•´ä¸ªå †å¤§å°ç™¾åˆ†æ¯”è¾¾åˆ°è¯¥é˜ˆå€¼æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡mixed gc.</td></tr></tbody></table><p>å½“è¶Šæ¥è¶Šå¤šçš„å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£old regionæ—¶ï¼Œä¸ºäº†é¿å…å †å†…å­˜è¢«è€—å°½ï¼Œè™šæ‹Ÿæœºä¼šè§¦å‘ä¸€ä¸ªæ··åˆçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå³Mixed GCï¼Œè¯¥ç®—æ³•å¹¶ä¸æ˜¯ä¸€ä¸ªOld GCï¼Œé™¤äº†å›æ”¶æ•´ä¸ªYoung Regionï¼Œè¿˜ä¼šå›æ”¶ä¸€éƒ¨åˆ†çš„Old Regionï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼šæ˜¯ä¸€éƒ¨åˆ†è€å¹´ä»£ï¼Œè€Œä¸æ˜¯å…¨éƒ¨è€å¹´ä»£ï¼Œå¯ä»¥é€‰æ‹©å“ªäº›old regionè¿›è¡Œæ”¶é›†ï¼Œä»è€Œå¯ä»¥å¯¹åƒåœ¾å›æ”¶çš„è€—æ—¶æ—¶é—´è¿›è¡Œæ§åˆ¶ã€‚ä¹Ÿè¦æ³¨æ„çš„æ˜¯Mixed GC å¹¶ä¸æ˜¯ Full GCã€‚</p><blockquote><p>MixedGCä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Ÿ ç”±å‚æ•° -XX:InitiatingHeapOccupancyPercent=n å†³å®šã€‚é»˜è®¤ï¼š45%ï¼Œè¯¥å‚æ•°çš„æ„æ€æ˜¯ï¼šå½“è€å¹´ä»£å¤§å°å æ•´ä¸ªå †å¤§å°ç™¾åˆ†æ¯”è¾¾åˆ°è¯¥é˜€å€¼æ—¶è§¦å‘ã€‚</p></blockquote><p>å®ƒçš„GCæ­¥éª¤åˆ†2æ­¥ï¼š</p><ol><li>å…¨å±€å¹¶å‘æ ‡è®°ï¼ˆglobal concurrent markingï¼‰</li></ol><ul><li>åˆå§‹æ ‡è®°ï¼ˆinitial markï¼ŒSTWï¼‰ï¼šæ ‡è®°ä»æ ¹èŠ‚ç‚¹ç›´æ¥å¯è¾¾çš„å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µä¼šæ‰§è¡Œä¸€æ¬¡å¹´è½»ä»£GCï¼Œä¼šäº§ç”Ÿå…¨å±€åœé¡¿ã€‚</li><li>æ ¹åŒºåŸŸæ‰«æï¼ˆroot region scanï¼‰ï¼š <ul><li>G1 GC åœ¨åˆå§‹æ ‡è®°çš„å­˜æ´»åŒºæ‰«æå¯¹è€å¹´ä»£çš„å¼•ç”¨ï¼Œå¹¶æ ‡è®°è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>è¯¥é˜¶æ®µä¸åº”ç”¨ç¨‹åºï¼ˆé STWï¼‰åŒæ—¶è¿è¡Œï¼Œå¹¶ä¸”åªæœ‰å®Œæˆè¯¥é˜¶æ®µåï¼Œæ‰èƒ½å¼€å§‹ä¸‹ä¸€æ¬¡ STW å¹´è½»ä»£åƒåœ¾å›æ”¶ã€‚</li></ul></li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markingï¼‰ï¼šG1 GC åœ¨æ•´ä¸ªå †ä¸­æŸ¥æ‰¾å¯è®¿é—®çš„ï¼ˆå­˜æ´»çš„ï¼‰å¯¹è±¡ã€‚è¯¥é˜¶æ®µä¸åº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œï¼Œå¯ä»¥è¢« STW å¹´è½»ä»£åƒåœ¾å›æ”¶ä¸­æ–­ã€‚</li><li>é‡æ–°æ ‡è®°ï¼ˆRemarkï¼ŒSTWï¼‰ï¼šè¯¥é˜¶æ®µæ˜¯ STW å›æ”¶ï¼Œå› ä¸ºç¨‹åºåœ¨è¿è¡Œï¼Œé’ˆå¯¹ä¸Šä¸€æ¬¡çš„æ ‡è®°è¿›è¡Œä¿®æ­£ã€‚</li><li>æ¸…é™¤åƒåœ¾ï¼ˆCleanupï¼ŒSTWï¼‰ï¼šæ¸…ç‚¹å’Œé‡ç½®æ ‡è®°çŠ¶æ€ï¼Œè¯¥é˜¶æ®µä¼šSTWï¼Œè¿™ä¸ªé˜¶æ®µå¹¶ä¸ä¼šå®é™…ä¸Šå»åšåƒåœ¾çš„æ”¶é›†ï¼Œç­‰å¾…evacuationé˜¶æ®µæ¥å›æ”¶ã€‚</li></ul><ol start="2"><li>æ‹·è´å­˜æ´»å¯¹è±¡ï¼ˆevacuationï¼‰ï¼šEvacuationé˜¶æ®µæ˜¯å…¨æš‚åœçš„ã€‚è¯¥é˜¶æ®µæŠŠä¸€éƒ¨åˆ†Regioné‡Œçš„æ´»å¯¹è±¡æ‹·è´åˆ°å¦ä¸€éƒ¨åˆ†Regionä¸­ï¼Œä»è€Œå®ç°åƒåœ¾çš„å›æ”¶æ¸…ç†ã€‚</li></ol><h4 id="full-gc" tabindex="-1"><a class="header-anchor" href="#full-gc"><span>full GC</span></a></h4><p>ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œè¿™ä¸å±äºG1çš„æ¨¡å¼ã€‚ä½†æ˜¯ä½¿ç”¨G1æ—¶æ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ã€‚</p><p>å½“mixed GCå®åœ¨æ— æ³•è·Ÿä¸Šç¨‹åºåˆ†é…å†…å­˜çš„é€Ÿåº¦ï¼Œå¯¼è‡´è€å¹´ä»£å¡«æ»¡æ— æ³•ç»§ç»­è¿›è¡ŒMixed GCï¼Œå°±ä¼šæ”¹ä¸ºä½¿ç”¨serial old GCï¼ˆfull GCï¼‰æ¥æ”¶é›†æ•´ä¸ªå †ã€‚</p><h4 id="_4-è¿è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_4-è¿è¡Œè¿‡ç¨‹"><span>4ï¼‰è¿è¡Œè¿‡ç¨‹</span></a></h4><p><img src="`+mi+`" alt="image-20230928164203175"></p><ul><li><p>åˆå§‹æ ‡è®°ï¼šæ ‡è®°å‡º GC Roots ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µé€Ÿåº¦è¾ƒå¿«ï¼ŒSTWï¼Œå•çº¿ç¨‹æ‰§è¡Œã€‚</p></li><li><p>å¹¶å‘æ ‡è®°ï¼šä» GC Root å¼€å§‹å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œå¯è¾¾æ–°åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä»¥å’Œç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</p></li><li><p>é‡æ–°æ ‡è®°ï¼šä¿®æ­£åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µå› ç”¨æˆ·ç¨‹åºæ‰§è¡Œè€Œäº§ç”Ÿå˜åŠ¨çš„æ ‡è®°è®°å½•ã€‚STWï¼Œå¹¶å‘æ‰§è¡Œã€‚</p></li><li><p>ç­›é€‰å›æ”¶ï¼šç­›é€‰å›æ”¶é˜¶æ®µä¼šå¯¹å„ä¸ª Region çš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„ GC åœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œç­›å‡ºCSetåç§»åŠ¨åˆå¹¶å­˜æ´»å¯¹è±¡åˆ°ç©ºRegionï¼Œæ¸…é™¤æ—§çš„ï¼Œå®Œå·¥ã€‚å› ä¸ºè¿™ä¸ªé˜¶æ®µéœ€è¦ç§»åŠ¨å¯¹è±¡å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¿…é¡»STWã€‚</p><p>æ€è€ƒä¸€ä¸‹ï¼Œè¿™å±äºä»€ä¹ˆç®—æ³•å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>ç­”ï¼šä»Regionçš„åŠ¨ä½œæ¥çœ‹G1ä½¿ç”¨çš„æ˜¯æ ‡è®°-å¤åˆ¶ç®—æ³•ã€‚è€Œåœ¨å…¨å±€è§†è§’ä¸Šï¼Œç±»ä¼¼æ ‡è®° - æ•´ç†</p></li></ul><p>æ€»ç»“ï¼š</p><p>G1å‰é¢çš„å‡ æ­¥å’ŒCMSå·®ä¸å¤šï¼Œåªæœ‰åœ¨æœ€åä¸€æ­¥ï¼ŒCMSæ˜¯æ ‡è®°æ¸…é™¤ï¼ŒG1éœ€è¦åˆå¹¶Regionå±äºæ ‡è®°æ•´ç†</p><h4 id="_5-ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_5-ä¼˜ç¼ºç‚¹"><span>5ï¼‰ä¼˜ç¼ºç‚¹</span></a></h4><ul><li>å¹¶å‘æ€§ï¼šç»§æ‰¿äº†CMSçš„ä¼˜ç‚¹ï¼Œå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚å½“ç„¶åªæ˜¯åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µã€‚å…¶ä»–è¿˜æ˜¯éœ€è¦STW</li><li>åˆ†ä»£GCï¼šG1ä¾ç„¶æ˜¯ä¸€ä¸ªåˆ†ä»£å›æ”¶å™¨ï¼Œä½†æ˜¯å’Œä¹‹å‰çš„å„ç±»å›æ”¶å™¨ä¸åŒï¼Œå®ƒåŒæ—¶å…¼é¡¾å¹´è½»ä»£å’Œè€å¹´ä»£ã€‚è€Œå…¶ä»–å›æ”¶å™¨ï¼Œæˆ–è€…å·¥ä½œåœ¨å¹´è½»ä»£ï¼Œæˆ–è€…å·¥ä½œåœ¨è€å¹´ä»£ï¼›</li><li>ç©ºé—´æ•´ç†ï¼šG1åœ¨å›æ”¶è¿‡ç¨‹ä¸­ï¼Œä¼šè¿›è¡Œé€‚å½“çš„å¯¹è±¡ç§»åŠ¨ï¼Œä¸åƒCMSåªæ˜¯ç®€å•åœ°æ ‡è®°æ¸…ç†å¯¹è±¡ã€‚åœ¨è‹¥å¹²æ¬¡GCåï¼ŒCMSå¿…é¡»è¿›è¡Œä¸€æ¬¡ç¢ç‰‡æ•´ç†ã€‚è€ŒG1ä¸åŒï¼Œå®ƒæ¯æ¬¡å›æ”¶éƒ½ä¼šæœ‰æ•ˆåœ°å¤åˆ¶å¯¹è±¡ï¼Œå‡å°‘ç©ºé—´ç¢ç‰‡ï¼Œè¿›è€Œæå‡å†…éƒ¨å¾ªç¯é€Ÿåº¦ã€‚</li><li>å¯é¢„è§æ€§ï¼šä¸ºäº†ç¼©çŸ­åœé¡¿æ—¶é—´ï¼ŒG1å»ºç«‹å¯é¢„å­˜åœé¡¿çš„æ¨¡å‹ï¼Œè¿™æ ·åœ¨ç”¨æˆ·è®¾ç½®çš„åœé¡¿æ—¶é—´èŒƒå›´å†…ï¼ŒG1ä¼šé€‰æ‹©é€‚å½“çš„åŒºåŸŸè¿›è¡Œæ”¶é›†ï¼Œç¡®ä¿åœé¡¿æ—¶é—´ä¸è¶…è¿‡ç”¨æˆ·æŒ‡å®šæ—¶é—´ã€‚</li></ul><h4 id="_6-å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_6-å»ºè®®"><span>6ï¼‰å»ºè®®</span></a></h4><ul><li>å¦‚æœåº”ç”¨ç¨‹åºè¿½æ±‚ä½åœé¡¿ï¼Œå¯ä»¥å°è¯•é€‰æ‹©G1ï¼›</li><li>ç»éªŒå€¼ä¸Šï¼Œå°å†…å­˜6Gä»¥å†…ï¼ŒCMSä¼˜äºG1ï¼Œè¶…è¿‡8Gï¼Œå°½é‡é€‰æ‹©G1</li><li>æ˜¯å¦ä»£æ›¿CMSåªæœ‰éœ€è¦å®é™…åœºæ™¯æµ‹è¯•æ‰çŸ¥é“ã€‚ï¼ˆå¦‚æœä½¿ç”¨G1åå‘ç°æ€§èƒ½è¿˜ä¸å¦‚CMSï¼Œé‚£ä¹ˆè¿˜æ˜¯é€‰æ‹©CMSï¼‰</li></ul><h4 id="_7-é™„-é…ç½®å‚æ•°æ¸…å•" tabindex="-1"><a class="header-anchor" href="#_7-é™„-é…ç½®å‚æ•°æ¸…å•"><span>7ï¼‰é™„ï¼šé…ç½®å‚æ•°æ¸…å•</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=======G1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> è®©åƒåœ¾å›æ”¶é…ç½®ç®€å•å¾ˆå¤šï¼Œåªéœ€è¦æ‰“å¼€å¹¶æŒ‡å®šä½ é¢„è®¡çš„æ—¶é—´è¦æ±‚å³å¯=======</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">æŒ‡å®šä½¿ç”¨G1æ”¶é›†å™¨ï¼š</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:+UseG1GC&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ä¸ºG1è®¾ç½®æš‚åœæ—¶é—´ç›®æ ‡ï¼ˆJVMä¼šå°½åŠ›å®ç°ï¼Œä½†ä¸ä¿è¯è¾¾åˆ°ï¼‰ï¼Œé»˜è®¤å€¼ä¸º200æ¯«ç§’ï¼›è¿™ä¸ªå€¼ä¸æ˜¯è¶Šå°è¶Šå¥½ã€‚</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">å¤ªå°çš„è¯ä¼šé€ æˆå¯ä¾›æ”¶é›†çš„Regionæ•°é‡åå°‘ï¼Œè·Ÿä¸ä¸Šå¯¹è±¡äº§ç”Ÿçš„é€Ÿåº¦ï¼Œåè€Œä¼šé¢‘ç¹è§¦å‘GCé™ä½ååé‡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">G1ä¼šæ ¹æ®è¿™ä¸ªç›®æ ‡å†³å®šæ”¶é›†è¡Œä¸ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:MaxGCPauseMillis&quot;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=======é™„ï¼šå…¶ä»–å‚æ•°ï¼Œä¸€èˆ¬é‡‡ç”¨é»˜è®¤å³å¯=======</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">è®¾ç½®æ¯ä¸ªRegionå¤§å°ï¼Œå€¼æ˜¯</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> çš„å¹‚ï¼ŒèŒƒå›´1MBåˆ°32MBï¼›ç›®æ ‡æ˜¯åœ¨æœ€å°Javaå †æ—¶å¯ä»¥æ‹¥æœ‰çº¦2048ä¸ªRegion,é»˜è®¤æ˜¯å †å†…å­˜çš„1/2000ã€‚</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:G1HeapRegionSize&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">æ–°ç”Ÿä»£æœ€å°å€¼ï¼Œé»˜è®¤å€¼5%:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:G1NewSizePercent&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">æ–°ç”Ÿä»£æœ€å¤§å€¼ï¼Œé»˜è®¤å€¼60%:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:G1MaxNewSizePercent&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">è®¾ç½®STWæœŸé—´ï¼Œå¹¶è¡ŒGCçº¿ç¨‹æ•°n,å°†</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> çš„å€¼è®¾ç½®ä¸ºé€»è¾‘å¤„ç†å™¨çš„æ•°é‡ã€‚n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> çš„å€¼ä¸é€»è¾‘å¤„ç†å™¨çš„æ•°é‡ç›¸åŒï¼Œæœ€å¤šä¸º</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:ParallelGCThreads&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">è®¾ç½®å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œå¹¶è¡Œæ‰§è¡Œçš„çº¿ç¨‹æ•°n,å°†</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> è®¾ç½®ä¸ºå¹¶è¡Œåƒåœ¾å›æ”¶çº¿ç¨‹æ•°</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ParallelGCThreads) çš„ 1/4 å·¦å³ã€‚</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:ConcGCThreads&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">å½“æ•´ä¸ªJavaå †çš„å ç”¨ç‡è¾¾åˆ°å‚æ•°å€¼æ—¶ï¼Œå¼€å§‹è§¦å‘mix</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gcï¼›é»˜è®¤ä¸º45ï¼š</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;-XX:InitiatingHeapOccupancyPercent&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-æ“ä½œæ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_8-æ“ä½œæ¡ˆä¾‹"><span>8ï¼‰æ“ä½œæ¡ˆä¾‹</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+UseG1GC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:MaxGCPauseMillis=100</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCDetails</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xmx256m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#G1çš„æ—¥å¿—ä¸åƒCMSæ˜¯ä¸¥æ ¼æŒ‰ç…§äº‹ä»¶é¡ºåºæ¥çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å±äºåˆ†ç±»ç»Ÿè®¡ï¼ŒåŒ…å«å­æ“ä½œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#æ€»åœé¡¿æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC pause </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">G1</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Evacuation</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Pause</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">young</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0044882</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     #å¹¶å‘å¤„ç†è€—æ—¶ï¼Œçº¿ç¨‹æ•°</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Parallel Time: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3.7</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms, GC Workers: 3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        #å„ä¸ªå­é¡¹è€—æ—¶æƒ…å†µâ€¦â€¦</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC Worker Start </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 14763.7, Avg: 14763.8, Max: 14763.8, Diff: 0.1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #æ‰«ææ ¹èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Ext Root Scanning </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 0.2, Avg: 0.3, Max: 0.3, Diff: 0.1, Sum: 0.8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #æ›´æ–°RSåŒºåŸŸæ‰€æ¶ˆè€—çš„æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Update RS </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 1.8, Avg: 1.9, Max: 1.9, Diff: 0.2, Sum: 5.6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">         [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Processed Buffers: Min: 1, Avg: 1.7, Max: 3, Diff: 2, Sum: 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Scan RS </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Code Root Scanning </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #å¯¹è±¡æ‹·è´</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Object Copy </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 1.1, Avg: 1.2, Max: 1.3, Diff: 0.2, Sum: 3.6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Termination </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 0.0, Avg: 0.1, Max: 0.2, Diff: 0.2, Sum: 0.2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">         [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC Worker Other </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC Worker Total </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 3.4, Avg: 3.4, Max: 3.5, Diff: 0.1, Sum: 10.3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">GC Worker End </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: Min: 14767.2, Avg: 14767.2, Max: 14767.3, Diff: 0.1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Code Root Fixup: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Code Root Purge: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Clear CT: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #æ¸…ç©ºCardTable</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Other: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.7</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Choose CSet: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #é€‰å–CSet</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Ref Proc: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.5</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #å¼±å¼•ç”¨ã€è½¯å¼•ç”¨çš„å¤„ç†è€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Ref Enq: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #å¼±å¼•ç”¨ã€è½¯å¼•ç”¨çš„å…¥é˜Ÿè€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Redirty Cards: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Humongous Register: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #å¤§å¯¹è±¡åŒºåŸŸæ³¨å†Œè€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Humongous Reclaim: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #å¤§å¯¹è±¡åŒºåŸŸå›æ”¶è€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Free CSet: </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   #é‡ç‚¹ï¼šæ€»çš„å„ä¸ªåŒºçš„æ”¶é›†æƒ…å†µ  æ”¶é›†å‰ä½¿ç”¨ç©ºé—´ï¼ˆæ€»ç©ºé—´ï¼‰ -&gt; æ”¶é›†åä½¿ç”¨ç©ºé—´ï¼ˆæ€»ç©ºé—´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Eden: 7168.0K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">7168</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0.0B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">13</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Survivors: 2048.0K-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2048.0K Heap: 55.5M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">192</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">48.5M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">192</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #å¹´è½»ä»£çš„å¤§å°ç»Ÿè®¡</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Times: user</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0.00, real</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-ä¼˜åŒ–å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_9-ä¼˜åŒ–å»ºè®®"><span>9ï¼‰ä¼˜åŒ–å»ºè®®</span></a></h4><p><strong>å¯¹äºGåƒåœ¾æ”¶é›†å™¨ä¼˜åŒ–å»ºè®®</strong></p><ul><li><p>å¹´è½»ä»£å¤§å°</p><ul><li><p>é¿å…ä½¿ç”¨ -Xmn é€‰é¡¹æˆ– -XX:NewRatio ç­‰å…¶ä»–ç›¸å…³é€‰é¡¹æ˜¾å¼è®¾ç½®å¹´è½»ä»£å¤§å°ã€‚</p></li><li><p>å›ºå®šå¹´è½»ä»£çš„å¤§å°ä¼šè¦†ç›–æš‚åœæ—¶é—´ç›®æ ‡ã€‚</p></li></ul></li><li><p>æš‚åœæ—¶é—´ç›®æ ‡ä¸è¦å¤ªè¿‡ä¸¥è‹›</p><ul><li><p>G1 GC çš„ååé‡ç›®æ ‡æ˜¯ 90% çš„åº”ç”¨ç¨‹åºæ—¶é—´å’Œ 10%çš„åƒåœ¾å›æ”¶æ—¶é—´ã€‚</p></li><li><p>è¯„ä¼° G1 GC çš„ååé‡æ—¶ï¼Œæš‚åœæ—¶é—´ç›®æ ‡ä¸è¦å¤ªä¸¥è‹›ã€‚ç›®æ ‡å¤ªè¿‡ä¸¥è‹›è¡¨ç¤ºæ‚¨æ„¿æ„æ‰¿å—æ›´å¤šçš„åƒåœ¾å›æ”¶å¼€é”€ï¼Œè€Œè¿™ä¼šç›´æ¥å½±å“åˆ°ååé‡ã€‚</p></li></ul></li></ul><h3 id="_6-5-5-å¹¶å‘-zgc-äº†è§£" tabindex="-1"><a class="header-anchor" href="#_6-5-5-å¹¶å‘-zgc-äº†è§£"><span>6.5.5 å¹¶å‘ - ZGCï¼ˆäº†è§£ï¼‰</span></a></h3><p>1ï¼‰æ¦‚è¿°</p><p>ZGCæ˜¯ä¸€æ¬¾åœ¨JDK 11ä¸­æ–°åŠ å…¥çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼Œæ˜¯ç”±Oracleå…¬å¸ç ”å‘çš„ã€‚ï¼ˆæ³¨æ„ï¼è¿˜åœ¨è¯•éªŒé˜¶æ®µï¼‰</p><p>ZGCçš„ç›®æ ‡æ˜¯å¸Œæœ›åœ¨å°½å¯èƒ½å¯¹ååé‡å½±å“ä¸å¤ªå¤§çš„å‰æä¸‹ï¼Œå®ç°åœ¨ä»»æ„å †å†…å­˜å¤§å°ä¸‹éƒ½å¯ä»¥æŠŠåƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´é™åˆ¶åœ¨10æ¯«ç§’ä»¥å†…çš„ä½å»¶è¿Ÿã€‚</p><p>è¿˜åœ¨è¯•éªŒé˜¶æ®µï¼Œäº†è§£åŸç†å³å¯ï¼ŒæŠ•äº§çš„è¯è¿˜éœ€ç­‰å¾…è§‚å¯Ÿã€‚</p><p>2ï¼‰è®¾è®¡</p><p><img src="`+Ai+'" alt="image-20230928164148445"></p><p>ZGCçš„å†…å­˜å¸ƒå±€ä¸G1ä¸€æ ·ï¼Œä¹Ÿé‡‡ç”¨åŸºäºRegionçš„å †å†…å­˜å¸ƒå±€ï¼Œä½†ä¸åŒçš„æ˜¯ï¼ŒZGCçš„Pageï¼ˆZGCä¸­ç§°ä¹‹ä¸ºé¡µé¢ï¼Œé“ç†å’ŒRegionä¸€æ ·ï¼‰å…·æœ‰åŠ¨æ€æ€§â€”â€”åŠ¨æ€åˆ›å»ºå’Œé”€æ¯ï¼Œä»¥åŠåŠ¨æ€çš„åŒºåŸŸå®¹é‡å¤§å°ã€‚åœ¨x64ç¡¬ä»¶å¹³å°ä¸‹ï¼ŒZGCçš„Pageå¯ä»¥å…·æœ‰å¤§ã€ä¸­ã€å°ä¸‰ç±»å®¹é‡ï¼š</p><ul><li>å°å‹é¡µé¢ï¼ˆSmall Pageï¼‰ï¼šå®¹é‡å›ºå®šä¸º2MBï¼Œç”¨äºæ”¾ç½®å°äº256KBçš„å°å¯¹è±¡ã€‚</li><li>ä¸­å‹é¡µé¢ï¼ˆMedium Pageï¼‰ï¼šå®¹é‡å›ºå®šä¸º32MBï¼Œç”¨äºæ”¾ç½®å¤§äºç­‰äº256KBä½†å°äº4MBçš„å¯¹è±¡ã€‚</li><li>å¤§å‹é¡µé¢ï¼ˆLarge Pageï¼‰ï¼šå®¹é‡ä¸å›ºå®šï¼Œå¯ä»¥åŠ¨æ€å˜åŒ–ï¼Œä½†å¿…é¡»ä¸º2MBçš„æ•´æ•°å€ï¼Œç”¨äºæ”¾ç½®4MBæˆ–ä»¥ä¸Šçš„å¤§å¯¹è±¡ã€‚ <ul><li>æ¯ä¸ªå¤§é¡µé¢ä¸­åªä¼šå­˜æ”¾ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œè¿™ä¹Ÿé¢„ç¤ºç€è™½ç„¶åå­—å«ä½œâ€œå¤§å‹Pageâ€ï¼Œä½†å®ƒçš„å®é™…å®¹é‡å®Œå…¨æœ‰å¯èƒ½å°äºä¸­å‹Pageï¼Œæœ€å°å®¹é‡å¯ä½è‡³4MBã€‚</li><li>å¤§å‹Pageåœ¨ZGCçš„å®ç°ä¸­æ˜¯ä¸ä¼šè¢«é‡åˆ†é…ï¼ˆé‡åˆ†é…æ˜¯ZGCçš„ä¸€ç§å¤„ç†åŠ¨ä½œï¼‰çš„ï¼Œå› ä¸ºå¤åˆ¶ä¸€ä¸ªå¤§å¯¹è±¡çš„ä»£ä»·éå¸¸é«˜æ˜‚ã€‚</li></ul></li></ul><p>3ï¼‰æŸ“è‰²æŒ‡é’ˆ</p><p>ZGCæ‰“ä¸Šäº†å†…å­˜æŒ‡é’ˆçš„ä¸»æ„ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒåœ¨æŒ‡é’ˆä¸Šåšäº†ä»€ä¹ˆ</p><ul><li>åœ¨64ä½ç³»ç»Ÿä¸­ï¼Œç†è®ºå¯ä»¥è®¿é—®çš„å†…å­˜é«˜è¾¾16EBï¼ˆ2çš„64æ¬¡å¹‚ï¼‰å­—èŠ‚ã€‚</li><li>å®é™…ä¸Šç”¨ä¸äº†è¿™ä¹ˆå¤šï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¸è®©ä½ ç”¨å…¨éƒ¨çš„ã€‚</li><li>64ä½çš„Linuxå¯ç”¨46ä½ï¼ˆ64TBï¼‰çš„ç‰©ç†åœ°å€ç©ºé—´ï¼Œ64ä½çš„Windowsç³»ç»Ÿåªæ”¯æŒ44ä½ï¼ˆ16TBï¼‰çš„ç‰©ç†åœ°å€ç©ºé—´ã€‚</li></ul><p>æˆ‘ä»¬ä»¥linuxä¸ºä¾‹ï¼Œå³ä¾¿æ˜¯è¿™64TBå†…å­˜ï¼Œç°å®ä¸­ä¾ç„¶ç”¨ä¸äº†è¿™ä¹ˆå¤šã€‚ZGCå°±ç›¯ä¸Šäº†è¿™å—ã€‚</p><p><img src="'+Di+'" alt="image-20210407153159222"></p><p>å®ƒæŠŠç³»ç»Ÿå…è®¸å®ƒä½¿ç”¨çš„46ä½ï¼Œæ‹¿å‡ºæ¥4ä½ï¼Œæ¥è®°å½•è¿™ä¸ªå†…å­˜åœ°å€çš„ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œå‰©ä¸‹çš„42ä½ç”¨äºçœŸæ­£çš„å¯»å€æ“ä½œã€‚</p><p>è¿™ä¹Ÿé€ æˆäº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ZGCå¯ä»¥ç®¡ç†çš„å†…å­˜ç©ºé—´ä¸å¯ä»¥è¶…è¿‡4TBï¼ˆ2çš„42æ¬¡å¹‚ï¼‰ï¼Œä½†æ˜¯ï¼è¿™ä¾ç„¶æ˜¯å¤Ÿç”¨çš„</p><p>é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå®ƒæ‹¿èµ°4ä½ï¼Œéƒ½åšäº†ä»€ä¹ˆï¼Ÿ</p><ul><li>ç®€å•æ¥è¯´ï¼Œæ‰€è°“æŸ“è‰²å°±æ˜¯ç”¨è¿™4ä½æ¥æ ‡è®°å½“å‰å¯¹è±¡æœ‰æ²¡æœ‰è¢«ç§»åŠ¨è¿‡ã€‚</li><li>å¦‚æœå¯¹è±¡ä»ä¸€ä¸ªPageç§»åŠ¨åˆ°äº†å¦ä¸€ä¸ªï¼Œå¦‚æœæ²¡æœ‰æŸ“è‰²æ ‡è®°ï¼Œæ¯”å¦‚G1åšåƒåœ¾æ”¶é›†æ—¶ï¼Œé‚£å°±å¿…é¡»åœæ‰ç”¨æˆ·è¿›ç¨‹ï¼Œä¿®æ”¹æ‰€æœ‰æŒ‡å‘è‡ªå·±çš„å¼•ç”¨ã€‚</li><li>è€Œæœ‰äº†æŸ“è‰²æ ‡è®°ï¼Œåªéœ€è¦åœ¨æŒ‡å‘è‡ªå·±çš„å¼•ç”¨ä¸Šæ ‡æ³¨ä¸€ä¸‹ï¼Œç§»åŠ¨å°±å¯ä»¥äº†ã€‚åŒæ—¶ï¼Œå°†æ–°æ—§åœ°å€è®°å½•åˆ°ä¸€å¼ è¡¨ä¸­ï¼Œå«è½¬å‘è¡¨</li><li>é‚£ä¹ˆå†æœ‰ç”¨æˆ·ç¨‹åºè®¿é—®åˆ°è¿™ä¸ªå¼•ç”¨æ—¶ï¼Œå‘ç°å·²æ”¹åŠ¨ï¼Œåˆ°è½¬å‘è¡¨æŸ¥æ–°çš„åœ°å€ï¼Œå»æ–°åœ°å€è®¿é—®å³å¯ã€‚</li></ul><p>è¿™ä¹ˆæ“ä½œæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p><ul><li>ä»–æŠŠå¯¹è±¡è¿ç§»ï¼Œå’Œä¸ä»–å…³è”çš„åœ°å€ä¿®æ”¹åšäº†è§£è€¦ã€‚</li><li>è¿™å°±çœå»äº†å¤§é‡åŒæ­¥ä¿®æ”¹åœ°å€å€¼çš„æ“ä½œï¼ˆè¿™ä¸ªæ“ä½œéœ€è¦STWï¼‰ã€‚</li><li>ä¸€ä¸ªPageé‡Œå¦‚æœå¯¹è±¡éƒ½è¢«è¿ç§»è¿‡ï¼Œé‚£ä¹ˆæ— éœ€æŒ¨ä¸ªä¿®æ”¹æ‰€æœ‰çš„æŒ‡é’ˆå€¼å°±å¯ä»¥å›æ”¶æ‰è¿™ä¸ªPageã€‚</li></ul><p>å…³äºZGCçš„è¯¦ç»†å†…å®¹éå¸¸å¤šï¼Œè¶³å¤Ÿè®²å®Œä¸€æœ¬ä¹¦ï¼Œæƒ³æ·±å…¥äº†è§£çš„åŒå­¦å‚è€ƒä»¥ä¸‹æ‹“å±•èµ„æ–™ï¼š</p><ul><li>èµ„æ–™æ–‡ä»¶å¤¹ï¼š ZGC-æŸ“è‰²æŒ‡é’ˆ.pdf ï¼ˆOracleå®˜ç½‘ï¼‰</li><li>ä¸€æœ¬å‚è€ƒä¹¦ï¼šã€Šæ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCè®¾è®¡ä¸å®ç°ã€‹</li></ul><p>4ï¼‰å·¥ä½œè¿‡ç¨‹</p><p><img src="'+ui+'" alt="image-20200506191455510"></p><p>ZGCçš„è¿ä½œè¿‡ç¨‹å¤§è‡´å¯åˆ’åˆ†ä¸ºå››ä¸ªå¤§çš„é˜¶æ®µï¼Œè¿™å››ä¸ªé˜¶æ®µéƒ½æ˜¯å¯ä»¥å¹¶å‘æ‰§è¡Œçš„ã€‚ä»…åœ¨Mark Startã€Initial Mark é˜¶æ®µä¸­ä¼šå­˜åœ¨çŸ­æš‚çš„STWã€‚</p><ul><li><strong>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰</strong><ul><li>ä¸G1ä¸€æ ·ï¼Œå¹¶å‘æ ‡è®°æ˜¯éå†å¯¹è±¡å›¾åšå¯è¾¾æ€§åˆ†æçš„é˜¶æ®µï¼Œå‰åä¹Ÿè¦ç»è¿‡åˆå§‹æ ‡è®°ã€æœ€ç»ˆæ ‡è®°çš„çŸ­æš‚åœé¡¿ã€‚</li><li>ZGCçš„æ ‡è®°æ˜¯åœ¨æŒ‡é’ˆä¸Šè€Œä¸æ˜¯åœ¨å¯¹è±¡ä¸Šè¿›è¡Œçš„ï¼Œæ ‡è®°é˜¶æ®µä¼šæ›´æ–°æŸ“è‰²æŒ‡é’ˆä¸­çš„Marked 0ã€Marked 1æ ‡å¿—ä½ã€‚</li></ul></li><li><strong>å¹¶å‘é¢„å¤‡é‡åˆ†é…ï¼ˆConcurrent Prepare for Relocateï¼‰</strong><ul><li>è¿™ä¸ªé˜¶æ®µéœ€è¦æ ¹æ®ç‰¹å®šçš„æŸ¥è¯¢æ¡ä»¶ç»Ÿè®¡å¾—å‡ºæœ¬æ¬¡æ”¶é›†è¿‡ç¨‹è¦æ¸…ç†å“ªäº›Regionï¼Œå°†è¿™äº›Regionç»„æˆï¼šé‡åˆ†é…é›†ï¼ˆRelocation Setï¼‰ã€‚</li><li>ZGCæ¯æ¬¡å›æ”¶éƒ½ä¼šæ‰«ææ‰€æœ‰çš„Regionï¼Œç”¨èŒƒå›´æ›´å¤§çš„æ‰«ææˆæœ¬æ¢å–çœå»G1ä¸­è®°å¿†é›†çš„ç»´æŠ¤æˆæœ¬ã€‚</li><li>ZGCçš„é‡åˆ†é…é›†åªæ˜¯å†³å®šäº†é‡Œé¢çš„å­˜æ´»å¯¹è±¡ä¼šè¢«é‡æ–°å¤åˆ¶åˆ°å…¶ä»–çš„Regionä¸­ï¼Œé‡Œé¢çš„Regionä¼šè¢«é‡Šæ”¾ã€‚</li></ul></li><li><strong>å¹¶å‘é‡åˆ†é…ï¼ˆConcurrent Relocateï¼‰</strong><ul><li>é‡åˆ†é…æ˜¯ZGCæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ ¸å¿ƒé˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹è¦æŠŠé‡åˆ†é…é›†ä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°æ–°çš„Regionä¸Šï¼Œå¹¶ä¸ºé‡åˆ†é…é›†ä¸­çš„æ¯ä¸ªRegionç»´æŠ¤ä¸€ä¸ªè½¬å‘è¡¨ï¼ˆForward Tableï¼‰ï¼Œè®°å½•ä»æ—§å¯¹è±¡åˆ°æ–°å¯¹è±¡çš„è½¬å‘å…³ç³»ã€‚</li><li>ç”±äºä½¿ç”¨äº†æŸ“è‰²æŒ‡é’ˆçš„æ”¯æŒï¼ŒZGCæ”¶é›†å™¨èƒ½ä»…ä»å¼•ç”¨ä¸Šå°±æ˜ç¡®å¾—çŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¤„äºé‡åˆ†é…é›†ä¹‹ä¸­ï¼Œå¦‚æœç”¨æˆ·çº¿ç¨‹æ­¤æ—¶å¹¶å‘è®¿é—®äº†ä½äºé‡åˆ†é…é›†ä¸­çš„å¯¹è±¡ï¼Œè¿™æ¬¡è®¿é—®å°†ä¼šè¢«é¢„ç½®çš„å†…å­˜å±éšœæ‰€æˆªè·ï¼Œç„¶åç«‹å³æ ¹æ®Regionä¸Šçš„è½¬å‘è¡¨è®°å½•å°†è®¿é—®è½¬å‘åˆ°æ–°å¤åˆ¶çš„å¯¹è±¡ä¸Šï¼Œå¹¶åŒæ—¶ä¿®æ­£æ›´æ–°è¯¥å¼•ç”¨çš„å€¼ï¼Œä½¿å…¶ç›´æ¥æŒ‡å‘æ–°å¯¹è±¡ï¼ŒZGCå°†è¿™ç§è¡Œä¸ºç§°ä¸ºæŒ‡é’ˆçš„â€œè‡ªæ„ˆâ€ï¼ˆSelf-Healingï¼‰èƒ½åŠ›ã€‚</li></ul></li><li><strong>å¹¶å‘é‡æ˜ å°„ï¼ˆConcurrent Remapï¼‰</strong><ul><li>é‡æ˜ å°„æ‰€åšçš„å°±æ˜¯ä¿®æ­£æ•´ä¸ªå †ä¸­æŒ‡å‘é‡åˆ†é…é›†ä¸­æ—§å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ã€‚</li><li>å¹¶å‘é‡æ˜ å°„å¹¶ä¸æ˜¯ä¸€ä¸ªå¿…é¡»è¦â€œè¿«åˆ‡â€å»å®Œæˆçš„ä»»åŠ¡ï¼Œä½†æ˜¯å½“æ‰€æœ‰æŒ‡é’ˆéƒ½è¢«ä¿®æ­£ä¹‹åï¼ŒåŸæ¥è®°å½•æ–°æ—§å¯¹è±¡å…³ç³»çš„è½¬å‘è¡¨å°±å¯ä»¥é‡Šæ”¾æ‰äº†ã€‚</li></ul></li></ul><p>5ï¼‰è°ƒè¯•</p><p>æ³¨æ„ï¼šZGCä½ç‰ˆæœ¬jdkæ˜¯æ— æ³•å¼€å¯å’Œä½¿ç”¨çš„ï¼š</p><p>linux64 ï¼š jdk11 +</p><p>windows &amp; mac ï¼šjdk 14+</p><p>é…ç½®å¯åŠ¨å‚æ•°</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-XX:+UnlockExperimentalVMOptions -XX:+UseZGC -Xmx256m -Xlog:gc*=info</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+vi+`" alt="image-20210407180815914"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#æ‰§è¡Œæ—¥å¿—</span></span>
<span class="line"><span>[1.141s][info][gc,start    ] GC(2) Garbage Collection (Warmup)</span></span>
<span class="line"><span>[1.141s][info][gc,phases   ] GC(2) Pause Mark Start 0.190ms</span></span>
<span class="line"><span>[1.143s][info][gc,phases   ] GC(2) Concurrent Mark 1.837ms #å¹¶å‘æ ‡è®°</span></span>
<span class="line"><span>[1.143s][info][gc,phases   ] GC(2) Pause Mark End 0.136ms</span></span>
<span class="line"><span>[1.144s][info][gc,phases   ] GC(2) Concurrent Process Non-Strong References 0.308ms</span></span>
<span class="line"><span>[1.144s][info][gc,phases   ] GC(2) Concurrent Reset Relocation Set 0.001ms</span></span>
<span class="line"><span>[1.144s][info][gc,phases   ] GC(2) Concurrent Destroy Detached Pages 0.000ms</span></span>
<span class="line"><span>[1.145s][info][gc,phases   ] GC(2) Concurrent Select Relocation Set 1.219ms  #é‡åˆ†é…é›†</span></span>
<span class="line"><span>[1.145s][info][gc,phases   ] GC(2) Concurrent Prepare Relocation Set 0.009ms #é¢„å¤‡é‡åˆ†é…</span></span>
<span class="line"><span>[1.145s][info][gc,phases   ] GC(2) Pause Relocate Start 0.230ms</span></span>
<span class="line"><span>[1.146s][info][gc,phases   ] GC(2) Concurrent Relocate 0.853ms  #å¹¶å‘é‡åˆ†é…</span></span>
<span class="line"><span>[1.146s][info][gc,load     ] GC(2) Load: 0.00/0.02/0.05</span></span>
<span class="line"><span>[1.146s][info][gc,mmu      ] GC(2) MMU: 2ms/78.1%, 5ms/88.9%, 10ms/93.4%, 20ms/96.7%, 50ms/98.7%, 100ms/99.0%</span></span>
<span class="line"><span>[1.146s][info][gc,marking  ] GC(2) Mark: 1 stripe(s), 1 proactive flush(es), 1 terminate flush(es), 0 completion(s), 0 continuation(s)</span></span>
<span class="line"><span>[1.146s][info][gc,reloc    ] GC(2) Relocation: Successful, 1M relocated   #é‡åˆ†é…å®Œæˆ</span></span>
<span class="line"><span>[1.146s][info][gc,nmethod  ] GC(2) NMethods: 59 registered, 0 unregistered</span></span>
<span class="line"><span>#é‡Šæ”¾æƒ…å†µï¼Œå…ƒç©ºé—´ã€å„ç§å¼•ç”¨ã€å †â€¦â€¦</span></span>
<span class="line"><span>[1.146s][info][gc,metaspace] GC(2) Metaspace: 4M used, 4M capacity, 5M committed, 8M reserved</span></span>
<span class="line"><span>[1.146s][info][gc,ref      ] GC(2) Soft: 131 encountered, 0 discovered, 0 enqueued</span></span>
<span class="line"><span>[1.146s][info][gc,ref      ] GC(2) Weak: 222 encountered, 215 discovered, 0 enqueued</span></span>
<span class="line"><span>[1.146s][info][gc,ref      ] GC(2) Final: 0 encountered, 0 discovered, 0 enqueued</span></span>
<span class="line"><span>[1.146s][info][gc,ref      ] GC(2) Phantom: 1 encountered, 1 discovered, 0 enqueued</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)                Mark Start          Mark End        Relocate Start      Relocate End           High               Low</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)  Capacity:      114M (45%)         114M (45%)         114M (45%)         114M (45%)         114M (45%)         114M (45%)</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)   Reserve:       36M (14%)          36M (14%)          36M (14%)          36M (14%)          36M (14%)          36M (14%)</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)      Free:      142M (55%)         142M (55%)         184M (72%)         184M (72%)         184M (72%)         142M (55%)</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)      Used:       78M (30%)          78M (30%)          36M (14%)          36M (14%)          78M (30%)          36M (14%)</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)      Live:         -                 1M (1%)            1M (1%)            1M (1%)             -                  -</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2) Allocated:         -                 0M (0%)            0M (0%)            4M (2%)             -                  -</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2)   Garbage:         -                76M (30%)          34M (14%)          34M (14%)            -                  -</span></span>
<span class="line"><span>[1.146s][info][gc,heap     ] GC(2) Reclaimed:         -                  -                42M (16%)          42M (16%)            -                  -</span></span>
<span class="line"><span>[1.146s][info][gc          ] GC(2) Garbage Collection (Warmup) 78M(30%)-&gt;36M(14%)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-6-å½’çº³æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_6-5-6-å½’çº³æ€»ç»“"><span>6.5.6 å½’çº³æ€»ç»“</span></a></h3><p>1ï¼‰æˆ‘ä»¬å…ˆæŠŠæ‰€å­¦çš„æ”¶é›†å™¨åšä¸ªæ±‡æ€»ï¼š</p><table><thead><tr><th>åç§°</th><th>ç®—æ³•</th><th>å·¥ä½œåŒºåŸŸ</th><th>çº¿ç¨‹</th><th>æ¨¡å¼</th><th>é€‚ç”¨åœºåˆ</th><th>ä¼˜ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Serial</td><td>å¤åˆ¶</td><td>æ–°ç”Ÿ</td><td>å•</td><td>ä¸²è¡Œ</td><td>å•CPUï¼›Clientæ¨¡å¼ä¸‹</td><td>ç¼ºï¼šstop the worldï¼›ä¼˜ï¼šç®€å•é«˜æ•ˆ,æ²¡æœ‰çº¿ç¨‹äº¤äº’å¼€é”€,ä¸“æ³¨äºGC;</td></tr><tr><td>ParNew</td><td>å¤åˆ¶</td><td>æ–°ç”Ÿ</td><td>å¤š</td><td>å¹¶è¡Œ</td><td>å¤šCPUï¼›Serveræ¨¡å¼ä¸‹</td><td>ç¼ºï¼šstop the worldï¼›ä¼˜ï¼šå¹¶è¡Œå¹¶å‘GC</td></tr><tr><td>Parallel Scavenge</td><td>å¤åˆ¶</td><td>æ–°ç”Ÿ</td><td>å¤š</td><td>å¹¶è¡Œ</td><td>ååé‡æ§åˆ¶ï¼ŒClientï¼Œserverå‡å¯ä»¥</td><td>ä¸»è¦å…³æ³¨ååé‡,é€šè¿‡ååé‡çš„è®¾ç½®æ§åˆ¶åœé¡¿æ—¶é—´,é€‚åº”ä¸åŒçš„åœºæ™¯</td></tr><tr><td>Serial Old</td><td>æ•´ç†</td><td>è€å¹´</td><td>å•</td><td>ä¸²è¡Œ</td><td>ä¸»è¦Clientæ¨¡å¼ä¸‹</td><td>ç¼ºï¼šstop the worldï¼›å…¶ä»–æ”¶é›†å™¨æä¸å®šæ—¶çš„ä¿åº•é€‰æ‹©</td></tr><tr><td>Parallel Old</td><td>æ•´ç†</td><td>è€å¹´</td><td>å¤š</td><td>å¹¶è¡Œ</td><td>ååé‡æ§åˆ¶ï¼ŒClientï¼Œserverå‡å¯ä»¥</td><td>ä¸»è¦å…³æ³¨ååé‡ï¼Œé€šè¿‡ååé‡çš„è®¾ç½®æ§åˆ¶åœé¡¿æ—¶é—´ï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯</td></tr><tr><td>CMS</td><td>æ¸…é™¤</td><td>è€å¹´</td><td>å¤š</td><td>å¹¶å‘</td><td>äº’è”ç½‘ç«™ï¼›B/Sç³»ç»ŸæœåŠ¡ç«¯</td><td>ç¼ºï¼šCPUèµ„æºæ•æ„Ÿ,æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ï¼›ä¼˜ï¼šå¹¶å‘æ”¶é›†,ä½åœé¡¿</td></tr><tr><td>G1</td><td>æ•´ç†</td><td>å‡å¯</td><td>å¤š</td><td>å¹¶å‘</td><td>é¢å‘æœåŠ¡ç«¯åº”ç”¨</td><td>ä¼˜ï¼šå¹¶è¡Œä¸å¹¶å‘,åˆ†ä»£æ”¶é›†,ç©ºé—´æ•´åˆ(æ ‡è®°æ•´ç†ç®—æ³•),å¯é¢„æµ‹åœé¡¿</td></tr></tbody></table><p>2ï¼‰ä¸€äº›è§„å¾‹</p><ul><li>æ–°ç”Ÿä»£éƒ½æ˜¯æ ‡è®° - å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£é‡‡ç”¨æ ‡è®° - æ•´ç†ï¼Œæˆ–æ¸…é™¤ï¼ˆCMSï¼‰</li><li>å†å²æ€§çš„æ”¶é›†å™¨å¤§å¤šé’ˆå¯¹æŸä¸ªä»£ï¼Œä½†æ˜¯G1ï¼Œä»¥åŠæœªæ¥çš„ZGCéƒ½æ˜¯å…¨ä»£å¯ç”¨</li><li>æ²¡æœ‰ç»å¯¹å¥½ç”¨çš„æ”¶é›†å™¨ï¼Œéœ€è¦åœ¨ ååé‡ã€å»¶è¿Ÿæ€§ã€å†…å­˜å ç”¨é‡ä¸Šåšæƒè¡¡ <ul><li>æ•°æ®åˆ†æã€ç§‘å­¦è®¡ç®—ç­‰åœºåˆï¼Œåé‡ååé‡</li><li>äº’è”ç½‘æœåŠ¡å™¨ã€webç½‘ç«™ï¼Œåé‡æœåŠ¡çš„å»¶è¿Ÿåº¦ï¼Œä¸èƒ½å‡ºç°ä¸¥é‡é¡¿æŒ«</li><li>å®¢æˆ·ç«¯ã€å¾®å‹ç»ˆç«¯ã€åµŒå…¥å¼åº”ç”¨ï¼Œå†…å­˜å ç”¨ä½æ˜¯å…³é”®</li></ul></li></ul><p>3ï¼‰æ­é…ç»„åˆ</p><p>é™¤äº†G1å’ŒZGCè¿™äº›å…¨èƒ½é€‰æ‰‹ï¼Œå…¶ä»–åƒåœ¾æ”¶é›†å™¨éœ€è¦æ­é…å·¥ä½œ</p><p>ä½†æ˜¯ç»„åˆä¸æ˜¯æƒ³æ€ä¹ˆæ¥å°±æ€ä¹ˆæ¥çš„ï¼Œä¸‹å›¾å±•ç¤ºå¯ç”¨ç»„åˆï¼Œä»¥åŠåœ¨æŸäº›ç‰ˆæœ¬ä¸­åºŸå¼ƒæ‰çš„ç»„åˆï¼š</p><p><img src="`+Bi+`" alt="image-20210402114507424"></p><p>4ï¼‰å¦‚ä½•æŸ¥çœ‹å½“å‰jdkçš„åƒåœ¾å›æ”¶å™¨å‘¢ï¼Ÿ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>java -XX:+PrintCommandLineFlags -version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#jdk8ï¼Œé»˜è®¤Parallel</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -XX:+PrintCommandLineFlags -version</span></span>
<span class="line"><span>-XX:InitialHeapSize=134217728 -XX:MaxHeapSize=2147483648 -XX:+PrintCommandLineFlags -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC</span></span>
<span class="line"><span>java version &quot;1.8.0_181&quot;</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment (build 1.8.0_181-b13)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#jdk11ï¼Œé»˜è®¤æ¢æˆäº†G1</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -XX:+PrintCommandLineFlags -version</span></span>
<span class="line"><span>-XX:G1ConcRefinementThreads=4 -XX:GCDrainStackTargetSize=64 -XX:InitialHeapSize=134217728 -XX:MaxHeapSize=2147483648 -XX:+PrintCommandLineFlags -XX:ReservedCodeCacheSize=251658240 -XX:+SegmentedCodeCache -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC</span></span>
<span class="line"><span>java version &quot;11.0.2&quot; 2019-01-15 LTS</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment 18.9 (build 11.0.2+9-LTS)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.2+9-LTS, mixed mode)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#jdk14ï¼Œé»˜è®¤è¿˜æ˜¯G1ï¼Œä½†æ˜¯å·²ç»æ”¯æŒZGCäº†ï¼Œéœ€è¦æ‰“å¼€å®éªŒæ€§å‚æ•°å¼€å…³</span></span>
<span class="line"><span>shawn@macpro:~ &gt; java -XX:+PrintCommandLineFlags -version</span></span>
<span class="line"><span>-XX:G1ConcRefinementThreads=4 -XX:GCDrainStackTargetSize=64 -XX:InitialHeapSize=134217728 -XX:MaxHeapSize=2147483648 -XX:MinHeapSize=6815736 -XX:+PrintCommandLineFlags -XX:ReservedCodeCacheSize=251658240 -XX:+SegmentedCodeCache -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC</span></span>
<span class="line"><span>java version &quot;14.0.2&quot; 2020-07-14</span></span>
<span class="line"><span>Java(TM) SE Runtime Environment (build 14.0.2+12-46)</span></span>
<span class="line"><span>Java HotSpot(TM) 64-Bit Server VM (build 14.0.2+12-46, mixed mode, sharing)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¯è§†åŒ–gcæ—¥å¿—åˆ†æå·¥å…·" tabindex="-1"><a class="header-anchor" href="#å¯è§†åŒ–gcæ—¥å¿—åˆ†æå·¥å…·"><span>å¯è§†åŒ–GCæ—¥å¿—åˆ†æå·¥å…·</span></a></h2><h3 id="gcæ—¥å¿—è¾“å‡ºå‚æ•°" tabindex="-1"><a class="header-anchor" href="#gcæ—¥å¿—è¾“å‡ºå‚æ•°"><span><strong>GCæ—¥å¿—è¾“å‡ºå‚æ•°</strong></span></a></h3><p>å‰é¢é€šè¿‡<code>-XX:+PrintGCDetails</code>å¯ä»¥å¯¹GCæ—¥å¿—è¿›è¡Œæ‰“å°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ§åˆ¶å°æŸ¥çœ‹ï¼Œè¿™æ ·è™½ç„¶å¯ä»¥æŸ¥çœ‹GCçš„ä¿¡æ¯ï¼Œ</p><p>ä½†æ˜¯å¹¶ä¸ç›´è§‚ï¼Œå¯ä»¥å€ŸåŠ©äºç¬¬ä¸‰æ–¹çš„GCæ—¥å¿—åˆ†æå·¥å…·è¿›è¡ŒæŸ¥çœ‹ã€‚</p><p>åœ¨æ—¥å¿—æ‰“å°è¾“å‡ºæ¶‰åŠåˆ°çš„å‚æ•°å¦‚ä¸‹ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+PrintGC</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> è¾“å‡ºGCæ—¥å¿—</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+PrintGCDetails</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> è¾“å‡ºGCçš„è¯¦ç»†æ—¥å¿—</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+PrintGCTimeStamps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+PrintGCDateStamps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2013-05-04T21:53:59.234+0800ï¼‰</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+PrintHeapAtGC</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> åœ¨è¿›è¡ŒGCçš„å‰åæ‰“å°å‡ºå †çš„ä¿¡æ¯</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-Xloggc:../logs/gc.log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-XX:+UseG1GC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:MaxGCPauseMillis=100</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xmx256m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCDetails</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCTimeStamps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintGCDateStamps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -XX:+PrintHeapAtGC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Xloggc:F://test//gc.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿è¡Œåå°±å¯ä»¥åœ¨Eç›˜ä¸‹ç”Ÿæˆgc.logæ–‡ä»¶ã€‚</p><p>å¦‚ä¸‹ï¼š</p><p><img src="`+bi+'" alt="image-20220915212651198"></p><h3 id="gc-easy-å¯è§†åŒ–å·¥å…·" tabindex="-1"><a class="header-anchor" href="#gc-easy-å¯è§†åŒ–å·¥å…·"><span><strong>GC Easy å¯è§†åŒ–å·¥å…·</strong></span></a></h3><p>GC Easyæ˜¯ä¸€æ¬¾åœ¨çº¿çš„å¯è§†åŒ–å·¥å…·ï¼Œæ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§ï¼Œç½‘ç«™ï¼š</p><p>http://gceasy.io/</p><p><img src="'+Ci+'" alt="image-20220915212341529"></p><p>ä¸Šä¼ åï¼Œç‚¹å‡»â€œAnalyzeâ€æŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹æŠ¥å‘Š</p><p><img src="'+Ei+'" alt="image-20220915212353523"></p><p><img src="'+fi+'" alt="image-20220915212359521"></p><p><img src="'+_i+`" alt="image-20220915212403718"></p><h1 id="_7ã€è°ƒä¼˜å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_7ã€è°ƒä¼˜å®æˆ˜"><span>7ã€è°ƒä¼˜å®æˆ˜</span></a></h1><h2 id="_7-1-ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_7-1-ç¯å¢ƒ"><span>7.1 ç¯å¢ƒ</span></a></h2><ul><li>æˆ‘ä»¬ä¾ç„¶ä½¿ç”¨ä¸Šé¢æ”¶é›†å™¨ç« èŠ‚ç›¸åŒçš„æ¡ˆä¾‹ï¼Œè¿™æ¬¡é’ˆå¯¹å†…å­˜æ¥åšè¯¦ç»†åˆ†æã€‚</li><li>ä½¿ç”¨ä¼ä¸šé‡Œä¸»æµçš„jdk8è¿è¡Œï¼Œå…¶ä»–jdkç‰ˆæœ¬å‚æ•°å¯èƒ½ç•¥æœ‰ä¸åŒã€‚</li><li>jdkè‡ªå¸¦çš„åˆ†æå‘½ä»¤å’Œå·¥å…·ç»™å¤§å®¶å‡†å¤‡äº†æ‰©å±•èµ„æ–™</li><li>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åœ¨çº¿ã€ç®€æ´ã€é«˜æ•ˆçš„å›¾å½¢åŒ–åˆ†æå·¥å…·ï¼š http://gceasy.io</li><li>gcæ—¥å¿—å‚æ•°ï¼š</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-XX:+PrintGC è¾“å‡ºGCæ—¥å¿—</span></span>
<span class="line"><span>-XX:+PrintGCDetails è¾“å‡ºGCçš„è¯¦ç»†æ—¥å¿—</span></span>
<span class="line"><span>-XX:+PrintGCTimeStamps è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰</span></span>
<span class="line"><span>-XX:+PrintGCDateStamps è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚ 2013-05-04T21:53:59.234+0800ï¼‰</span></span>
<span class="line"><span>-XX:+PrintHeapAtGC åœ¨è¿›è¡ŒGCçš„å‰åæ‰“å°å‡ºå †çš„ä¿¡æ¯</span></span>
<span class="line"><span>-Xloggc:gc.log   jdk8æ—¥å¿—æ–‡ä»¶çš„è¾“å‡º</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-Xlog:gc*:gc.log  jdk11æ—¥å¿—è¾“å‡ºæ–¹å¼ç•¥æœ‰ä¸åŒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>-XX:+printGC</code>æˆ–<code>-verbose:gc</code>å¯ä»¥æ‰“å°GCçš„ç®€è¦ä¿¡æ¯</p><p><img src="`+xi+'" alt="image-20220605090010628"></p><p><code>-XX:+PrintGCTimeStamps</code>æ‰“å°CGå‘ç”Ÿçš„æ—¶é—´æˆ³</p><p><img src="'+Fi+'" alt="image-20220605085953282"></p><p><code>-XX:+PrintGCDetails</code>çš„è¾“å‡º</p><p><img src="'+ji+'" alt="image-20220605085929352"></p><p><code>-Xloggc</code>æŒ‡å®šGC logçš„ä½ç½®ï¼Œä»¥æ–‡ä»¶è¾“å‡ºï¼Œå¸®åŠ©å¼€å‘äººå‘˜åˆ†æé—®é¢˜</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-Xloggc:log/gc.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+Si+'" alt="image-20220605085843642"></p><p><code>-XX:+PrintHeapAtGC</code>æ¯æ¬¡ä¸€æ¬¡GCåï¼Œéƒ½æ‰“å°å †ä¿¡æ¯</p><p><img src="'+Xi+'" alt="image-20220605085816651"></p><h2 id="_7-2-åˆå§‹çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_7-2-åˆå§‹çŠ¶æ€"><span>7.2 åˆå§‹çŠ¶æ€</span></a></h2><h3 id="_7-2-1-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_7-2-1-å‚æ•°"><span>7.2.1 å‚æ•°</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-Xmx32m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC -Xloggc:gc.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+Mi+'" alt="image-20210408162538333"></p><h3 id="_7-2-2-æ‰§è¡Œæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_7-2-2-æ‰§è¡Œæ—¥å¿—"><span>7.2.2 æ‰§è¡Œæ—¥å¿—</span></a></h3><p>è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œåœ¨é¡¹ç›®çš„ç›®å½•ä¸‹ä¼šçœ‹åˆ°gc.log</p><p><img src="'+Gi+'" alt="image-20210408163439858"></p><h3 id="_7-2-3-æ—¥å¿—åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_7-2-3-æ—¥å¿—åˆ†æ"><span>7.2.3 æ—¥å¿—åˆ†æ</span></a></h3><p>æ‰“å¼€ gceasy çš„ä¸»é¡µï¼Œä¸Šä¼ åç‚¹å‡» Analyze å³å¯çœ‹åˆ°åˆ†æç»“æœ</p><p><img src="'+zi+'" alt="image-20210408163653183"></p><p>1ï¼‰æ•´ä½“å†…å­˜æ¦‚å†µ</p><p>youngä¸oldå…¨éƒ¨åƒæ»¡ï¼Œå‡æ˜æ˜¾ä¸è¶³ï¼Œéœ€è¦è°ƒå¤§ï¼Œmetaé—²ç½®ï¼Œå¯ä»¥ç¼©å‡</p><p><img src="'+qi+'" alt="image-20210408163949306"></p><p>2ï¼‰æ•´ä½“æ—¶é—´æƒ…å†µ</p><p>æ”¶é›†æ—¶é—´ç»å¤§å¤šæ•°åœ¨10msä»¥å†…ï¼Œè¯´æ˜æ”¶é›†çš„é€Ÿåº¦è¿˜å¯ä»¥ï¼Œä½†æ˜¯å›æ”¶æ¬¡æ•°æ˜æ˜¾åå¤šï¼Œæ•´ä½“ååé‡94</p><p><img src="'+Ji+'" alt="image-20210408164152924"></p><p>3ï¼‰å›æ”¶å‰åçš„heapæ˜æ˜¾æŠ–åŠ¨é¢‘ç¹ï¼Œæ•´ä½“åé«˜</p><p><img src="'+Ti+'" alt="image-20210408172308650"></p><p>4ï¼‰GCé—´éš”æ—¶é—´é•¿çš„ç‚¹ï¼Œå‘ç”Ÿå¤§é‡FullGC</p><p><img src="'+Pi+'" alt="image-20210408172408015"></p><p>5ï¼‰å¤§æ‰¹é‡ç©ºé—´çš„æœ‰æ•ˆé‡Šæ”¾åœ¨FullGCä¸Š</p><p><img src="'+Oi+'" alt="image-20210408172501063"></p><p>6ï¼‰å›æ”¶é‡Šæ”¾æƒ…å†µ</p><p>å¹´è½»ä»£å’Œå¹´è€ä»£å›æ”¶æ•ˆæœä¸€èˆ¬ï¼Œå›æ”¶å‰åçš„ä¸¤æ¡çº¿ç”šè‡³å‘ç”Ÿäº¤å‰ï¼Œåº”è¯¥åç¦»è¾ƒè¿œæ‰è¯´æ˜æœ‰æ˜æ˜¾å†…å­˜ä¸‹é™</p><p>Metaspaceæ¯”è¾ƒç¨³å®š</p><p><img src="'+wi+'" alt="image-20210408172628499"></p><p>7ï¼‰A&amp;Pï¼šå¯¹è±¡ä»å¹´è½»ä»£æ™‹å‡åˆ°è€å¹´ä»£çš„æƒ…å†µ</p><p>é¢‘ç¹æ™‹å‡ï¼Œè·¨ä»£ç§»åŠ¨ï¼Œè¯´æ˜å¹´è½»ä»£ä¸å¤Ÿç”¨ï¼Œè€å¹´ä»£ä¸€æ—¦å †ç§¯ï¼Œæå®¹æ˜“å¼•å‘fullGC</p><p><img src="'+Ki+'" alt="image-20210408173001294"></p><p>8ï¼‰GCæ¬¡æ•°åŠæ—¶é—´ç»Ÿè®¡</p><p>å‘ç”Ÿ591æ¬¡GCï¼Œé‡Œé¢ç«Ÿç„¶æœ‰45æ˜¯FullGCï¼Œä¸å¯å®¹å¿ï¼</p><p>æ€»GCè€—æ—¶ï¼Œ2.820sï¼ŒFullGCå äº†å°†è¿‘ä¸€åŠ</p><p><img src="'+Ri+'" alt="image-20210408173408882"></p><p>9ï¼‰GCåœé¡¿æƒ…å†µ</p><p>æ€»è€—æ—¶ã€å¹³å‡æ¯æ¬¡GCè€—æ—¶ 4.77ms</p><p><img src="'+Li+'" alt="image-20210408173756291"></p><p>10ï¼‰GCè¢«è§¦å‘çš„åŸå› </p><p>å¸¸è§„è¾¾åˆ°é˜ˆå€¼åƒåœ¾å›æ”¶45æ¬¡ã€‚</p><p>å†…å­˜åˆ†é…å¤±è´¥å¼•å‘å›æ”¶ï¼Œè¿™ä¸ªä¼šå½±å“æ­£å¸¸ä¸šåŠ¡æ‰§è¡Œã€‚</p><p><img src="'+Vi+'" alt="image-20210408173912968"></p><h2 id="_7-3-åˆæ­¥è°ƒä¼˜" tabindex="-1"><a class="header-anchor" href="#_7-3-åˆæ­¥è°ƒä¼˜"><span>7.3 åˆæ­¥è°ƒä¼˜</span></a></h2><h3 id="_7-3-1-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_7-3-1-å‚æ•°"><span>7.3.1 å‚æ•°</span></a></h3><p>åˆ†æä¸Šé¢çš„æƒ…å†µï¼Œæ˜æ˜¾å¹´è½»ä»£è€å¹´ä»£å†…å­˜å‡ä¸¥é‡ä¸è¶³ï¼Œé‚£ä¹ˆæœ€ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œæˆ‘ä»¬åŠ å¤§å†…å­˜</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-Xms256m -Xmx256m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC -Xloggc:gc.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-3-2-äºŒæ¬¡åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_7-3-2-äºŒæ¬¡åˆ†æ"><span>7.3.2 äºŒæ¬¡åˆ†æ</span></a></h3><p>é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œæ–°å¼€ä¸€ä¸ªæµè§ˆå™¨é¡µç­¾ï¼Œæ–¹ä¾¿å¯¹æ¯”åˆ†ææ—¥å¿—ï¼Œé‡ç‚¹å…³æ³¨å‡ ä¸ªç‚¹ï¼š</p><p>1ï¼‰æ€»å†…å­˜å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å¹´è½»ä»£ä¾ç„¶è¢«åƒçˆ†ã€‚å¹´è€ä»£é—²ç½®ã€‚</p><p><img src="'+Ii+'" alt="image-20210408180257479"></p><p>2ï¼‰ååé‡ä¸Šå‡ï¼Œè€—æ—¶ç‰¹åˆ«é•¿çš„gcåˆ†éƒ¨åŒºé—´æ˜æ˜¾å‡å°‘ï¼Œç”šè‡³æ¶ˆå¤±</p><p><img src="'+Ni+'" alt="image-20210408180340673"></p><p>3ï¼‰gcå‰åçš„ç©ºé—´æ›²çº¿å¯¹æ¯”æ˜æ˜¾</p><p><img src="'+Hi+'" alt="image-20210408180429177"></p><p>4ï¼‰FullGCæ¶ˆå¤±ï¼</p><p><img src="'+Ui+'" alt="image-20210408180505228"></p><p>5ï¼‰GCå¤§æ‰¹é‡çš„å†…å­˜é‡Šæ”¾å‘ç”Ÿåœ¨äº†å¹´è½»ä»£</p><p><img src="'+Wi+'" alt="image-20210408180546815"></p><p>6ï¼‰å¹´è½»ä»£çš„å›æ”¶å‰åä¸¤æ¡æ›²çº¿ä¸å†äº¤å‰ï¼Œè¢«æ˜æ˜¾å‰¥ç¦»</p><p><img src="'+Zi+'" alt="image-20210408180621878"></p><p>7ï¼‰å¹´è€ä»£è¡¨ç¤ºæƒ…ç»ªç¨³å®š</p><p><img src="'+Yi+'" alt="image-20210408180647712"></p><p>8ï¼‰å¹´è½»åˆ°è€å¹´ä»£çš„æ™‹å‡æ˜æ˜¾å‡å°‘</p><p><img src="'+$i+'" alt="image-20210408180717968"></p><p>9ï¼‰FullGCå®Œå…¨æ¶ˆå¤±ï¼Œæ€»GCæ¬¡æ•°æ˜æ˜¾å‡å°‘åˆ°49ï¼Œæ€»åœé¡¿æ—¶é—´ä»ä¸Šæ¬¡çš„2.8sé™ä½åˆ°0.3s</p><p><img src="'+Qi+'" alt="image-20210408180822553"></p><p>10ï¼‰æ™‹å‡çš„å¯¹è±¡æ˜æ˜¾å‡å°‘ï¼Œåˆ›å»ºé€Ÿåº¦æå‡</p><p><img src="'+sa+'" alt="image-20210408181044095"></p><p>11ï¼‰ä¸å†å‘ç”Ÿå†…å­˜åˆ†é…å¤±è´¥é€ æˆgcçš„ç°è±¡</p><p><img src="'+ia+'" alt="image-20210408181203637"></p><h2 id="_7-4-äºŒæ¬¡è°ƒä¼˜" tabindex="-1"><a class="header-anchor" href="#_7-4-äºŒæ¬¡è°ƒä¼˜"><span>7.4 äºŒæ¬¡è°ƒä¼˜</span></a></h2><h3 id="_7-4-1-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_7-4-1-å‚æ•°"><span>7.4.1 å‚æ•°</span></a></h3><p>ç»“åˆä¸Šæ¬¡è°ƒä¼˜ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¹´è½»ä»£ä¾ç„¶ä¸å¤Ÿç”¨ï¼Œå¹´è€ä»£é—²ç½®ï¼Œå¯¹è±¡è¿˜æ˜¯ä¼šé¢‘ç¹ä»å¹´è½»ä»£æ™‹å‡åˆ°å¹´è€ä»£ã€‚</p><p>ç»“åˆæˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¤§æ‰¹é‡å¯¹è±¡åœ¨è¯·æ±‚åä¼šè¢«é‡Šæ”¾ï¼Œå±äºçŸ­ç”Ÿå‘½å‘¨æœŸã€‚åŒ…æ‹¬æˆ‘ä»¬ç°å®ä¸­ä»æ•°æ®åº“è¯·æ±‚å‘é€åˆ°ç½‘é¡µåå¯¹è±¡å°±å®Œæˆäº†å®åï¼Œå±äºåŒç±»åœºæ™¯ã€‚</p><p>æ‰€ä»¥ï¼ŒåŠ å¤§å¹´è½»ä»£æ¯”ä¾‹ï¼</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>-Xms256m -Xmx256m -XX:NewSize=250m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC -Xloggc:gc.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-4-2-æ—¥å¿—åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_7-4-2-æ—¥å¿—åˆ†æ"><span>7.4.2 æ—¥å¿—åˆ†æ</span></a></h3><p>åŒæ ·æ˜¯256çš„å†…å­˜ï¼Œæˆ‘ä»¬å†æ¬¡è·‘å‡ºæ—¥å¿—åˆ†æçœ‹çœ‹å·®å¼‚</p><p>1ï¼‰å¹´è½»ä»£å·²åŸºæœ¬å¤Ÿç”¨ï¼Œå¾ˆå°‘æœ‰å¯¹è±¡å†è·‘åˆ°è€å¹´ä»£</p><p><img src="'+aa+'" alt="image-20210408182302407"></p><p>2ï¼‰ååé‡è¿›ä¸€æ­¥ä¸Šå‡</p><p><img src="'+na+'" alt="image-20210408182416738"></p><p>æ€è€ƒä¸€ä¸‹ï¼Œé‚£ä¸ºä»€ä¹ˆpauseçš„å¹³å‡æ—¶é—´è¿˜å˜é•¿äº†å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>ç­”ï¼šæ¬¡æ•°å˜å°‘äº†ï¼Œå•æ¬¡éœ€è¦æ”¶é›†çš„å¯¹è±¡å¤šäº†ï¼Œæ‰€ä»¥è‚¯å®šè¦å æ—¶é—´ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹æ€»è€—æ—¶ï¼</p><p>3ï¼‰å †å›æ”¶ç©ºé—´å˜åŒ–æ˜æ˜¾</p><p><img src="'+la+'" alt="image-20210408185109798"></p><p>4ï¼‰gcæ¬¡æ•°æ˜æ˜¾ä¸‹é™åˆ°8æ¬¡ï¼Œæ€»æ—¶é—´è¿›ä¸€æ­¥é™ä½åˆ°80ms</p><p><img src="'+ha+'" alt="image-20210408185136455"></p><h2 id="_7-5-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_7-5-å°ç»“"><span>7.5 å°ç»“</span></a></h2><ul><li>æœºå™¨ä¸»è¦ç”¨æ¥è·‘javaæœåŠ¡çš„è¯ï¼Œä¸€èˆ¬æ˜¯éœ€è¦è°ƒä¼˜çš„ã€‚å› ä¸ºé»˜è®¤å †æœ€å¤§åªå ç‰©ç†å†…å­˜çš„1/4</li><li>jvmçš„è°ƒä¼˜æ²¡æœ‰æ ‡å‡†å¯è¨€ï¼Œä¸åŒä¸šåŠ¡åœºæ™¯çš„å†…å­˜å ç”¨å’Œå¢é•¿æƒ…å†µä¸åŒã€‚è°ƒæ•´éœ€è¦æ ¹æ®ç»“æœä¸€æ­¥æ­¥æ¥ï¼Œç›´åˆ°æœ€ä¼˜ã€‚</li><li>è°ƒä¼˜å·¥å…·å¾ˆå¤šï¼Œgceasyå±äºç®€å•ç›´è§‚çš„uiæ“ä½œï¼Œjvmè‡ªå¸¦å·¥å…·å¤§å¤šæ˜¯å‘½ä»¤è¡Œä¸”åŠŸèƒ½è¾ƒå°‘ï¼Œåœ¨æ‰©å±•èµ„æ–™é‡Œã€‚</li><li>parallelæ˜¯jdk8ä¸‹çš„é»˜è®¤æ”¶é›†å™¨ï¼Œåˆ‡æ¢ä¸åŒæ”¶é›†å™¨åçš„è°ƒè¯•ä¸ä¸Šé¢è¿‡ç¨‹ä¸€è‡´ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥é€ä¸ªå°è¯•ã€‚</li></ul><h1 id="_8ã€æ€§èƒ½ç›‘æ§å·¥å…·" tabindex="-1"><a class="header-anchor" href="#_8ã€æ€§èƒ½ç›‘æ§å·¥å…·"><span>8ã€æ€§èƒ½ç›‘æ§å·¥å…·</span></a></h1><h2 id="ç³»ç»Ÿæ€§èƒ½ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿæ€§èƒ½ç›‘æ§"><span>ç³»ç»Ÿæ€§èƒ½ç›‘æ§</span></a></h2><p>ç¡®å®šç³»ç»Ÿè¿è¡Œçš„æ•´ä½“çŠ¶æ€ï¼ŒåŸºæœ¬å®šä½é—®é¢˜æ‰€åœ¨</p><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h3><h4 id="uptime" tabindex="-1"><a class="header-anchor" href="#uptime"><span>uptime</span></a></h4><p><img src="'+ea+'" alt="image-20220606080320531"></p><ul><li>ç³»ç»Ÿæ—¶é—´ <ul><li>ä¾‹å­ä¸­å½“å‰ç³»ç»Ÿæ—¶é—´ä¸º 17:03:20</li></ul></li><li>è¿è¡Œæ—¶é—´ <ul><li>ä¾‹å­ä¸­ä¸º7åˆ†é’Ÿ</li></ul></li><li>è¿æ¥æ•° <ul><li>æ¯ä¸€ä¸ªç»ˆç«¯ç®—ä¸€ä¸ªè¿æ¥ï¼Œä¾‹å­ä¸­ä¸º3users</li></ul></li><li>1,5,15åˆ†é’Ÿå†…çš„ç³»ç»Ÿå¹³å‡è´Ÿè½½ <ul><li>è¿è¡Œé˜Ÿåˆ—ä¸­çš„å¹³å‡è¿›ç¨‹æ•°ï¼Œä¾‹å­ä¸­ä¸ºload average: 0.80,0.93,0.50ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºç³»ç»Ÿè´Ÿè½½è¶Šé‡</li></ul></li></ul><h4 id="top" tabindex="-1"><a class="header-anchor" href="#top"><span>top</span></a></h4><p><img src="'+pa+'" alt="image-20220606080750238"></p><h4 id="vmstat" tabindex="-1"><a class="header-anchor" href="#vmstat"><span>vmstat</span></a></h4><ul><li>å¯ä»¥ç»Ÿè®¡ç³»ç»Ÿçš„CPUï¼Œå†…å­˜ï¼Œswapï¼Œioç­‰æƒ…å†µ</li><li>CPUå ç”¨ç‡å¾ˆé«˜ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹ï¼Œè¯´æ˜ç³»ç»Ÿæœ‰çº¿ç¨‹æ­£åœ¨é¢‘ç¹åˆ‡æ¢</li></ul><p><img src="'+ta+'" alt="image-20220606080928760"></p><blockquote><p>é‡‡æ ·é¢‘ç‡å’Œé‡‡æ ·æ¬¡æ•°,ä¾‹å­ä¸­è¡¨ç¤º1sä¸€æ¬¡,é‡‡æ ·4æ¡è®°å½•</p></blockquote><h4 id="pidstat" tabindex="-1"><a class="header-anchor" href="#pidstat"><span>pidstat</span></a></h4><p>å¯ä»¥ç»†è‡´è§‚å¯Ÿè¿›ç¨‹ï¼Œéœ€è¦å®‰è£…ï¼Œç›‘æ§CPUï¼Œç›‘æ§IOï¼Œç›‘æ§å†…å­˜</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sysstat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+ka+'" alt="image-20220606081229638"></p><p><img src="'+da+'" alt="image-20220606081256030"></p><p>è·å–åˆ°å“ªä¸ªçº¿ç¨‹æœ‰é—®é¢˜ï¼Œåˆ°æ—¶å€™å°±å¯ä»¥åœ¨javaä¸­æŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹æœ‰é—®é¢˜äº†</p><p><code>-d</code>æ˜¾ç¤ºç£ç›˜IOçš„æƒ…å†µ</p><p><img src="'+ra+'" alt="image-20220606081431416"></p><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>windows</span></a></h3><h4 id="ä»»åŠ¡ç®¡ç†å™¨" tabindex="-1"><a class="header-anchor" href="#ä»»åŠ¡ç®¡ç†å™¨"><span>ä»»åŠ¡ç®¡ç†å™¨</span></a></h4><p><img src="'+ga+'" alt="image-20220606081544716"></p><p>å¯ä»¥é€‰æ‹©åˆ—å±•ç¤º</p><p><img src="'+ca+'" alt="image-20220606081555781"></p><h4 id="perfmon" tabindex="-1"><a class="header-anchor" href="#perfmon"><span>Perfmon</span></a></h4><p>Windowsè‡ªå¸¦å¤šåŠŸèƒ½æ€§èƒ½ç›‘æ§å·¥å…·,cmdå‘½ä»¤è¡Œå¯ä»¥æ‰“å¼€</p><p><img src="'+oa+'" alt="image-20220606081613952"></p><p><img src="'+ya+'" alt="image-20220606081625438"></p><p><img src="'+ma+'" alt="image-20220606081630749"></p><p><img src="'+Aa+'" alt="image-20220606081638015"></p><p>å®šä½åˆ°äº†2368çš„çº¿ç¨‹å ç”¨äº†å¤§é‡çš„ç³»ç»Ÿèµ„æº</p><h4 id="process-explorer" tabindex="-1"><a class="header-anchor" href="#process-explorer"><span>Process Explorer</span></a></h4><p><img src="'+Da+'" alt="image-20220606081654137"></p><blockquote><p>æ€ä¹ˆæ‰¾åˆ°ç³»ç»Ÿå†…æœ€æ¶ˆè€—CPUçš„çº¿ç¨‹?</p></blockquote><h4 id="pslist" tabindex="-1"><a class="header-anchor" href="#pslist"><span>pslist</span></a></h4><p>å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ç”¨äºè‡ªåŠ¨åŒ–æ•°æ®æ”¶é›†ï¼Œæ˜¾ç¤ºjavaç¨‹åºçš„è¿è¡Œæƒ…å†µ</p><p><img src="'+ua+'" alt="image-20220606082300923"></p><p>è¿™é‡Œcpuæ˜¯å¤šæ ¸ï¼Œæ‰€ä»¥cpuæ—¶é—´å¤§äºæµé€æ—¶é—´</p><p><img src="'+va+'" alt="image-20220606082334018"></p><h2 id="javaè‡ªå¸¦çš„å·¥å…·" tabindex="-1"><a class="header-anchor" href="#javaè‡ªå¸¦çš„å·¥å…·"><span>Javaè‡ªå¸¦çš„å·¥å…·</span></a></h2><p>æŸ¥çœ‹Javaç¨‹åºè¿è¡Œç»†èŠ‚ï¼Œè¿›ä¸€æ­¥å®šä½é—®é¢˜</p><p><img src="'+Ba+'" alt="image-20220606082346125"></p><h3 id="jps" tabindex="-1"><a class="header-anchor" href="#jps"><span>jps</span></a></h3><p>åˆ—å‡ºjavaè¿›ç¨‹ï¼Œç±»ä¼¼äºpså‘½ä»¤</p><ul><li>å‚æ•°-qå¯ä»¥æŒ‡å®šjpsåªè¾“å‡ºè¿›ç¨‹ID ï¼Œä¸è¾“å‡ºç±»çš„çŸ­åç§°</li><li>å‚æ•°-må¯ä»¥ç”¨äºè¾“å‡ºä¼ é€’ç»™Javaè¿›ç¨‹ï¼ˆä¸»å‡½æ•°ï¼‰çš„å‚æ•°</li><li>å‚æ•°-lå¯ä»¥ç”¨äºè¾“å‡ºä¸»å‡½æ•°çš„å®Œæ•´è·¯å¾„</li><li>å‚æ•°-vå¯ä»¥æ˜¾ç¤ºä¼ é€’ç»™JVMçš„å‚æ•°</li></ul><p><img src="'+ba+'" alt="image-20220606082620699"></p><p><img src="'+Ca+`" alt="image-20220606082633311"></p><h3 id="jinfo" tabindex="-1"><a class="header-anchor" href="#jinfo"><span>jinfo</span></a></h3><p>å¯ä»¥ç”¨æ¥æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„Javaåº”ç”¨ç¨‹åºçš„æ‰©å±•å‚æ•°ï¼Œç”šè‡³æ”¯æŒåœ¨è¿è¡Œæ—¶ï¼Œä¿®æ”¹éƒ¨åˆ†å‚æ•°</p><ul><li><code>-flag &lt;name&gt;</code>ï¼šæ‰“å°æŒ‡å®šJVMçš„å‚æ•°å€¼</li><li><code>-flag [+|-]&lt;name&gt;</code>ï¼šè®¾ç½®æŒ‡å®šJVMå‚æ•°çš„å¸ƒå°”å€¼</li><li><code>-flag &lt;name&gt;=&lt;value&gt;</code>ï¼šè®¾ç½®æŒ‡å®šJVMå‚æ•°çš„å€¼</li></ul><p>æ˜¾ç¤ºäº†æ–°ç”Ÿä»£å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£å¯¹è±¡çš„æœ€å¤§å¹´é¾„</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag MaxTenuringThreshold </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2972</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">MaxTenuringThreshold</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">15</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ˜¾ç¤ºæ˜¯å¦æ‰“å°GCè¯¦ç»†ä¿¡æ¯</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag PrintGCDetails  </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2972</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PrintGCDetails</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿è¡Œæ—¶ä¿®æ”¹å‚æ•°ï¼Œæ§åˆ¶æ˜¯å¦è¾“å‡ºGCæ—¥å¿—</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag PrintGCDetails  </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2972</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PrintGCDetails</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PrintGCDetails  </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2972</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jinfo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">flag PrintGCDetails  </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2972</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">XX</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PrintGCDetails</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jmap" tabindex="-1"><a class="header-anchor" href="#jmap"><span>jmap</span></a></h3><blockquote><p>å‰æ–‡æœ‰ç”¨åˆ°jstatå¯¹jvmå †å†…å­˜åšç»Ÿè®¡åˆ†æï¼Œè€Œjmapå¯ä»¥è·å–æ›´è¯¦ç»†çš„å†…å­˜ï¼Œæ¯”å¦‚ï¼šå†…å­˜ä½¿ç”¨æƒ…å†µçš„æ±‡æ€»ã€å¯¹å†…å­˜æº¢å‡ºçš„å®šä½ä¸åˆ†æç­‰ã€‚</p></blockquote><h4 id="æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ"><span>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</span></a></h4><p><code>jmap -heap è¿›ç¨‹ID</code></p><p><img src="`+Ea+`" alt="image-20220830190141761"></p><h4 id="æŸ¥çœ‹å†…å­˜ä¸­å¯¹è±¡æ•°é‡åŠå¤§å°" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹å†…å­˜ä¸­å¯¹è±¡æ•°é‡åŠå¤§å°"><span>æŸ¥çœ‹å†…å­˜ä¸­å¯¹è±¡æ•°é‡åŠå¤§å°</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># æŸ¥çœ‹æ‰€æœ‰å¯¹è±¡ï¼ŒåŒ…æ‹¬æ´»è·ƒå’Œéæ´»è·ƒçš„</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jmap </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">histo </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pid</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> more</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># æŸ¥çœ‹æ´»è·ƒå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jmap </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">histo</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">live </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pid</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> more</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+fa+`" alt="image-20220830190632245"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#å¯¹è±¡è¯´æ˜ </span></span>
<span class="line"><span>B byte </span></span>
<span class="line"><span>C char </span></span>
<span class="line"><span>D double</span></span>
<span class="line"><span>F float </span></span>
<span class="line"><span>I int </span></span>
<span class="line"><span>J long </span></span>
<span class="line"><span>Z boolean </span></span>
<span class="line"><span>[ æ•°ç»„ï¼Œå¦‚[Iè¡¨ç¤ºint[] </span></span>
<span class="line"><span>[L+ç±»å å…¶ä»–å¯¹è±¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”ŸæˆJavaåº”ç”¨ç¨‹åºçš„å †å¿«ç…§å’Œå¯¹è±¡çš„ç»Ÿè®¡ä¿¡æ¯</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jmap </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">histo </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2972</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">\\</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+_a+`" alt="image-20220606083423253"></p><h4 id="å°†å†…å­˜ä½¿ç”¨æƒ…å†µdumpåˆ°æ–‡ä»¶ä¸­" tabindex="-1"><a class="header-anchor" href="#å°†å†…å­˜ä½¿ç”¨æƒ…å†µdumpåˆ°æ–‡ä»¶ä¸­"><span>å°†å†…å­˜ä½¿ç”¨æƒ…å†µDumpåˆ°æ–‡ä»¶ä¸­</span></a></h4><p><code>jmap -dump:format=b,file=c:\\heap.hprof 2972</code>,åç»­å¯ä»¥æ ¹æ®è¿™ä¸ªæ–‡ä»¶åšè¿›ä¸€æ­¥çš„åˆ†æã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jmap </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dump</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">\\</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">heap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">hprof</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2972</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Dumping</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> heap to </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">C</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">\\</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">heap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">hprof</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ...</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Heap dump file created</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›¾ç‰‡æ•ˆæœï¼š</p><p><img src="`+xa+'" alt="image-20220830191111078"></p><p><img src="'+Fa+'" alt="image-20220606083516498"></p><p>å¯¹dumpæ–‡ä»¶åˆ†æçš„æ–¹æ³•å¾ˆå¤š</p><h4 id="_1-é€šè¿‡jhatå¯¹dumpæ–‡ä»¶è¿›è¡Œåˆ†æ" tabindex="-1"><a class="header-anchor" href="#_1-é€šè¿‡jhatå¯¹dumpæ–‡ä»¶è¿›è¡Œåˆ†æ"><span>1.é€šè¿‡jhatå¯¹dumpæ–‡ä»¶è¿›è¡Œåˆ†æ</span></a></h4><p>dumpæ–‡ä»¶æ—¶äºŒè¿›åˆ¶çš„ï¼Œä¸æ–¹ä¾¿æŸ¥çœ‹ï¼Œç”¨jhatå°±å¯ä»¥ï¼š <code>jhat -port &lt;port&gt; &lt;file&gt;</code></p><p><img src="'+ja+'" alt="image-20220830191437756"></p><p>è®¿é—®ï¼šhttp://localhost:9999/</p><p><img src="'+Sa+'" alt="image-20220830191504682"></p><blockquote><p>æ¯”å¦‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡OQLæŸ¥çœ‹ï¼Œç”Ÿäº§ç¯å¢ƒä¸­çš„dumpæ–‡ä»¶æ˜¯å¦æœ‰é•¿åº¦å¾ˆå¤§çš„ã€‚å°±å¯ä»¥å»åˆ†ææ˜¯å¦åˆç†ä¹‹ç±»çš„</p></blockquote><p><img src="'+Xa+`" alt="image-20220830192028935"></p><h4 id="_2-é€šè¿‡matåˆ†ædumpæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-é€šè¿‡matåˆ†ædumpæ–‡ä»¶"><span>2.é€šè¿‡MATåˆ†ædumpæ–‡ä»¶</span></a></h4><blockquote><p>è§ä¸‹æ–‡JAVAå †åˆ†æ#MATä½¿ç”¨åŸºç¡€</p></blockquote><h3 id="jstack" tabindex="-1"><a class="header-anchor" href="#jstack"><span>jstack</span></a></h3><blockquote><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥çœ‹ä¸‹jvmä¸­çš„çº¿ç¨‹æ‰§è¡Œæƒ…å†µï¼Œæ¯”å¦‚ï¼Œå‘ç°æœåŠ¡çš„CPUçš„è´Ÿè½½çªç„¶å¢é«˜äº†ï¼Œå‡ºç°äº†æ­»é”ï¼Œæ­»å¾ªç¯ç­‰ã€‚æˆ‘ä»¬è¯¥æ€ä¹ˆåˆ†æ?</p><p>ç”±äºç¨‹åºæ—¶æ­£å¸¸è¿è¡Œçš„ï¼Œæ²¡æœ‰ä»»ä½•çš„è¾“å‡ºï¼Œä»æ—¥å¿—æ–¹é¢ä¹Ÿçœ‹ä¸å‡ºä»€ä¹ˆé—®é¢˜ï¼Œæ‰€ä»¥å°±éœ€è¦çœ‹ä¸‹jvmçš„å†…éƒ¨çº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µï¼Œç„¶ååœ¨è¿›è¡Œåˆ†ææŸ¥æ‰¾å‡ºåŸå› ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦å€ŸåŠ©äºjstackå‘½ä»¤äº†ï¼Œjstackçš„ä½œç”¨æ˜¯å°†æ­£åœ¨è¿è¡Œçš„jvmçš„çº¿ç¨‹æƒ…å†µè¿›è¡Œå¿«ç…§ï¼Œå¹¶ä¸”æ‰“å°å‡ºæ¥ã€‚</p></blockquote><p>æ‰“å°çº¿ç¨‹dump</p><ul><li><p>-l æ‰“å°é”ä¿¡æ¯</p></li><li><p>-m æ‰“å°javaå’Œnativeçš„å¸§ä¿¡æ¯</p></li><li><p>-F å¼ºåˆ¶dumpï¼Œå½“jstackæ²¡æœ‰å“åº”æ—¶ä½¿ç”¨</p></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jstack </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">120</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">C</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">\\</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> #</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> prio</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> os_prio</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> tid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x0831c400</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> nid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0xecc</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> runnable </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x0018f000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">   java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">State</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> RUNNABLE</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">swt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">win32</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">WaitMessage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Native Method</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">swt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">widgets</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Display</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Display</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4657</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">application</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">WorkbenchAdvisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eventLoopIdle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">WorkbenchAdvisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">364</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ide</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">application</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">IDEWorkbenchAdvisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eventLoopIdle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">IDEWorkbenchAdvisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">917</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Workbench$3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eventLoopIdle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">487</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">swt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PartRenderingEngine$9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PartRenderingEngine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1117</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">core</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">databinding</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">observable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Realm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">runWithDefault</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Realm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">332</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">swt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PartRenderingEngine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PartRenderingEngine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">997</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">E4Workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createAndRunUI</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">E4Workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">140</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Workbench$5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">611</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">core</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">databinding</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">observable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Realm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">runWithDefault</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Realm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">332</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createAndRunWorkbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Workbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">567</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PlatformUI</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createAndRunWorkbench</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PlatformUI</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">150</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ui</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ide</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">application</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">IDEApplication</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">IDEApplication</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">124</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">equinox</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseAppHandle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseAppHandle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">196</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">core</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">adaptor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseAppLauncher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">runApplication</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseAppLauncher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">110</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">core</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">adaptor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseAppLauncher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseAppLauncher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">79</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">core</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">adaptor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseStarter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseStarter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">354</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">core</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">runtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">adaptor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseStarter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">EclipseStarter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">181</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sun</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reflect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">NativeMethodAccessorImpl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invoke0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Native Method</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sun</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reflect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">NativeMethodAccessorImpl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invoke</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Unknown Source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sun</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reflect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DelegatingMethodAccessorImpl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invoke</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Unknown Source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">reflect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Method</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invoke</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Unknown Source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">equinox</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">launcher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">invokeFramework</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">636</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">equinox</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">launcher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">basicRun</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">591</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">org</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">eclipse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">equinox</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">launcher</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1450</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jconsole" tabindex="-1"><a class="header-anchor" href="#jconsole"><span>JConsole</span></a></h3><p>å›¾å½¢åŒ–ç›‘æ§å·¥å…·</p><p>å¯ä»¥æŸ¥çœ‹Javaåº”ç”¨ç¨‹åºçš„è¿è¡Œæ¦‚å†µï¼Œç›‘æ§å †ä¿¡æ¯ã€æ°¸ä¹…åŒºä½¿ç”¨æƒ…å†µã€ç±»åŠ è½½æƒ…å†µç­‰</p><p><img src="`+Ma+'" alt="image-20220606083624401"></p><p><img src="'+Ga+'" alt="image-20220606083630876"></p><p><img src="'+za+'" alt="image-20220606083638583"></p><p><img src="'+qa+'" alt="image-20220606083649037"></p><h3 id="visual-vmvisual" tabindex="-1"><a class="header-anchor" href="#visual-vmvisual"><span>Visual VMVisual</span></a></h3><p>VMæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¤šåˆä¸€æ•…éšœè¯Šæ–­å’Œæ€§èƒ½ç›‘æ§çš„å¯è§†åŒ–å·¥å…·</p><p>VisualVMï¼Œèƒ½å¤Ÿç›‘æ§çº¿ç¨‹ï¼Œå†…å­˜æƒ…å†µï¼ŒæŸ¥çœ‹æ–¹æ³•çš„CPUæ—¶é—´å’Œå†…å­˜ä¸­çš„å¯¹ è±¡ï¼Œå·²è¢«GCçš„å¯¹è±¡ï¼Œåå‘æŸ¥çœ‹åˆ†é…çš„å †æ ˆ(å¦‚100ä¸ªStringå¯¹è±¡åˆ†åˆ«ç”±å“ªå‡ ä¸ªå¯¹è±¡åˆ†é…å‡ºæ¥çš„)ã€‚</p><p>VisualVMä½¿ç”¨ç®€å•ï¼Œå‡ ä¹0é…ç½®ï¼ŒåŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒä¸°å¯Œçš„ï¼Œå‡ ä¹å›Šæ‹¬äº†å…¶å®ƒJDKè‡ªå¸¦å‘½ä»¤çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p><ul><li>å†…å­˜ä¿¡æ¯</li><li>çº¿ç¨‹ä¿¡æ¯</li><li>Dumpå †ï¼ˆæœ¬åœ°è¿›ç¨‹ï¼‰</li><li>Dumpçº¿ç¨‹ï¼ˆæœ¬åœ°è¿›ç¨‹ï¼‰</li><li>æ‰“å¼€å †Dumpã€‚å †Dumpå¯ä»¥ç”¨jmapæ¥ç”Ÿæˆã€‚</li><li>æ‰“å¼€çº¿ç¨‹Dump</li><li>ç”Ÿæˆåº”ç”¨å¿«ç…§ï¼ˆåŒ…å«å†…å­˜ä¿¡æ¯ã€çº¿ç¨‹ä¿¡æ¯ç­‰ç­‰ï¼‰</li><li>æ€§èƒ½åˆ†æã€‚CPUåˆ†æï¼ˆå„ä¸ªæ–¹æ³•è°ƒç”¨æ—¶é—´ï¼Œæ£€æŸ¥å“ªäº›æ–¹æ³•è€—æ—¶å¤šï¼‰ï¼Œå†…å­˜åˆ†æï¼ˆå„ç±»å¯¹è±¡å ç”¨çš„å†…å­˜ï¼Œæ£€æŸ¥</li><li>å“ªäº›ç±»å ç”¨å†…å­˜å¤šï¼‰</li><li>â€¦â€¦</li></ul><h4 id="å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨"><span><strong>å¯åŠ¨</strong></span></a></h4><p>åœ¨jdkçš„å®‰è£…ç›®å½•çš„binç›®å½•ä¸‹ï¼Œæ‰¾åˆ°jvisualvm.exeï¼ŒåŒå‡»æ‰“å¼€å³å¯ã€‚</p><p><img src="'+Ja+'" alt="image-20220915195851918"></p><p><img src="'+Ta+'" alt="image-20220915195903417"></p><h4 id="æŸ¥çœ‹æœ¬åœ°è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹æœ¬åœ°è¿›ç¨‹"><span><strong>æŸ¥çœ‹æœ¬åœ°è¿›ç¨‹</strong></span></a></h4><p><img src="'+Pa+'" alt="image-20220915195919563"></p><h4 id="æŸ¥çœ‹cpuã€å†…å­˜ã€ç±»ã€çº¿ç¨‹è¿è¡Œä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹cpuã€å†…å­˜ã€ç±»ã€çº¿ç¨‹è¿è¡Œä¿¡æ¯"><span><strong>æŸ¥çœ‹CPUã€å†…å­˜ã€ç±»ã€çº¿ç¨‹è¿è¡Œä¿¡æ¯</strong></span></a></h4><p><img src="'+Oa+'" alt="image-20220915195953453"></p><h4 id="æŸ¥çœ‹çº¿ç¨‹è¯¦æƒ…" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹çº¿ç¨‹è¯¦æƒ…"><span><strong>æŸ¥çœ‹çº¿ç¨‹è¯¦æƒ…</strong></span></a></h4><p><img src="'+wa+'" alt="image-20220915200019581"></p><p>ä¹Ÿå¯ä»¥ç‚¹å‡»å³ä¸Šè§’DumpæŒ‰é’®ï¼Œå°†çº¿ç¨‹çš„ä¿¡æ¯å¯¼å‡ºï¼Œå…¶å®å°±æ˜¯æ‰§è¡Œçš„jstackå‘½ä»¤ã€‚</p><p><img src="'+Ka+'" alt="image-20220915200032331"></p><p>å‘ç°ï¼Œæ˜¾ç¤ºçš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚</p><h4 id="æŠ½æ ·å™¨" tabindex="-1"><a class="header-anchor" href="#æŠ½æ ·å™¨"><span><strong>æŠ½æ ·å™¨</strong></span></a></h4><p>æŠ½æ ·å™¨å¯ä»¥å¯¹CPUã€å†…å­˜åœ¨ä¸€æ®µæ—¶é—´å†…è¿›è¡ŒæŠ½æ ·ï¼Œä»¥ä¾›åˆ†æã€‚</p><p><img src="'+Ra+'" alt="image-20220915200052275"></p><p><img src="'+La+'" alt="image-20220606083726599"></p><p><img src="'+Va+'" alt="image-20220606084526922"></p><p><img src="'+Ia+'" alt="image-20220606084502784"></p><blockquote><p>æ€§èƒ½ç›‘æ§ï¼šæ‰¾åˆ°å ç”¨CPUæ—¶é—´æœ€é•¿çš„æ–¹æ³•</p></blockquote><p><img src="'+Na+'" alt="image-20220606083837307"></p><blockquote><p>åˆ†æå †Dump</p></blockquote><p><img src="'+Ha+`" alt="image-20220606083856748"></p><blockquote><p>æ€ä¹ˆè§‚å¯ŸJavaçº¿ç¨‹æ‰“å°ï¼Ÿ</p></blockquote><h4 id="ç›‘æ§è¿œç¨‹çš„jvm" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§è¿œç¨‹çš„jvm"><span><strong>ç›‘æ§è¿œç¨‹çš„jvm</strong></span></a></h4><p>VisualJVMä¸ä»…æ˜¯å¯ä»¥ç›‘æ§æœ¬åœ°jvmè¿›ç¨‹ï¼Œè¿˜å¯ä»¥ç›‘æ§è¿œç¨‹çš„jvmè¿›ç¨‹ï¼Œéœ€è¦å€ŸåŠ©äºJMXæŠ€æœ¯å®ç°ã€‚</p><p><strong>ä»€ä¹ˆæ˜¯JMXï¼Ÿ</strong></p><p>JMXï¼ˆJava Management Extensionsï¼Œå³Javaç®¡ç†æ‰©å±•ï¼‰æ˜¯ä¸€ä¸ªä¸ºåº”ç”¨ç¨‹åºã€è®¾å¤‡ã€ç³»ç»Ÿç­‰æ¤å…¥ç®¡ç†åŠŸèƒ½çš„æ¡†æ¶ã€‚</p><p>JMXå¯ä»¥è·¨è¶Šä¸€ç³»åˆ—å¼‚æ„æ“ä½œç³»ç»Ÿå¹³å°ã€ç³»ç»Ÿä½“ç³»ç»“æ„å’Œç½‘ç»œä¼ è¾“åè®®ï¼Œçµæ´»çš„å¼€å‘æ— ç¼é›†æˆçš„ç³»ç»Ÿã€ç½‘ç»œå’ŒæœåŠ¡ç®¡ç†åº”ç”¨ã€‚</p><p><strong>ç›‘æ§è¿œç¨‹çš„tomcat</strong></p><p>æƒ³è¦ç›‘æ§è¿œç¨‹çš„tomcatï¼Œå°±éœ€è¦åœ¨è¿œç¨‹çš„tomcatè¿›è¡Œå¯¹JMXé…ç½®ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#åœ¨tomcatçš„binç›®å½•ä¸‹ï¼Œä¿®æ”¹catalina.shï¼Œæ·»åŠ å¦‚ä¸‹çš„å‚æ•° </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">JAVA_OPTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9999 - </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Dcom.sun.management.jmxremote.authenticate=false - </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Dcom.sun.management.jmxremote.ssl=false</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#è¿™å‡ ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼š </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#-Dcom.sun.management.jmxremote ï¼šå…è®¸ä½¿ç”¨JMXè¿œç¨‹ç®¡ç† </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#-Dcom.sun.management.jmxremote.port=9999 ï¼šJMXè¿œç¨‹è¿æ¥ç«¯å£ </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#-Dcom.sun.management.jmxremote.authenticate=false ï¼šä¸è¿›è¡Œèº«ä»½è®¤è¯ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è¿æ¥ </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#-Dcom.sun.management.jmxremote.ssl=false ï¼šä¸ä½¿ç”¨ssl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿å­˜é€€å‡ºï¼Œé‡å¯tomcatã€‚</p><p><strong>ä½¿ç”¨VisualJVMè¿æ¥è¿œç¨‹tomcat</strong></p><p>æ·»åŠ è¿œç¨‹ä¸»æœºï¼š</p><p><img src="`+Ua+'" alt="image-20220915200227524"></p><p>åœ¨ä¸€ä¸ªä¸»æœºä¸‹å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„jvméœ€è¦ç›‘æ§ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è¦åœ¨è¯¥ä¸»æœºä¸Šæ·»åŠ éœ€è¦ç›‘æ§çš„jvmï¼š</p><p><img src="'+Wa+'" alt="image-20220915200243057"></p><p><img src="'+Za+'" alt="image-20220915200254116"></p><p>è¿æ¥æˆåŠŸã€‚ä½¿ç”¨æ–¹æ³•å’Œå‰é¢å°±ä¸€æ ·äº†ï¼Œå°±å¯ä»¥å’Œç›‘æ§æœ¬åœ°jvmè¿›ç¨‹ä¸€æ ·ï¼Œç›‘æ§è¿œç¨‹çš„tomcatè¿›ç¨‹ã€‚</p><h2 id="å®æˆ˜åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å®æˆ˜åˆ†æ"><span>å®æˆ˜åˆ†æ</span></a></h2><p>æ¡ˆä¾‹é—®é¢˜</p><h3 id="æ™®é€šåˆ†æ" tabindex="-1"><a class="header-anchor" href="#æ™®é€šåˆ†æ"><span>æ™®é€šåˆ†æ</span></a></h3><p>è¿è¡Œä¸€ç¨‹åºThreadBlockMainï¼ŒæœŸæœ›è¾“å‡ºHello,World ï¼Œç»“æœåœ¨ç¨‹åºè¿è¡Œåï¼Œç¨‹åºå¡æ­»ï¼Œæ²¡æœ‰é¢„æœŸè¾“å‡º</p><p><img src="'+Ya+'" alt="image-20220606084817434"></p><p>Javaç¨‹åºHoldCPUMainè¿è¡Œåï¼Œå‘ç°å ç”¨CPUå¾ˆé«˜ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°åŸå› ã€‚</p><p><img src="'+$a+'" alt="image-20220606083946248"></p><p><img src="'+Qa+'" alt="image-20220606083952669"></p><blockquote><p>3467å ç”¨èµ„æºæ¯”è¾ƒå¤šï¼Œè¦è½¬æˆ16è¿›åˆ¶,åˆ°jstacké‡Œé¢æ‰¾ã€‚çº¿ç¨‹çš„IDå·åœ¨jstackä¸­æ˜¯ä½¿ç”¨16è¿›åˆ¶è¡¨ç¤ºçš„ã€‚å³0xd8b</p></blockquote><p><img src="'+sn+'" alt="image-20220606084000260"></p><blockquote><p>å®šä½åˆ°ä»£ç äº†,å»HoldxxxTask.run ç¬¬8è¡Œå»çœ‹å®ƒä»£ç åšçš„æ“ä½œæ˜¯ä»€ä¹ˆ,å¯¼è‡´CPUé«˜</p></blockquote><h3 id="æ­»é”åˆ†æ" tabindex="-1"><a class="header-anchor" href="#æ­»é”åˆ†æ"><span>æ­»é”åˆ†æ</span></a></h3><p><img src="'+an+'" alt="image-20220606084037591"></p><p>å¦‚ä½•ä»jstackçš„è¾“å‡ºä¸­æ‰¾å‡ºæ­»é”</p><p><img src="'+nn+'" alt="image-20220606084732456"></p><p><img src="'+ln+`" alt="image-20220606084714400"></p><h1 id="_9ã€javaå †åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_9ã€javaå †åˆ†æ"><span>9ã€Javaå †åˆ†æ</span></a></h1><h2 id="å†…å­˜æº¢å‡º-oom-çš„åŸå› " tabindex="-1"><a class="header-anchor" href="#å†…å­˜æº¢å‡º-oom-çš„åŸå› "><span>å†…å­˜æº¢å‡º(OOM)çš„åŸå› </span></a></h2><p>åœ¨JVMä¸­ï¼Œæœ‰å“ªäº›å†…å­˜åŒºé—´ï¼Ÿå †ã€æ°¸ä¹…åŒºã€çº¿ç¨‹æ ˆã€ç›´æ¥å†…å­˜</p><h3 id="å †æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#å †æº¢å‡º"><span>å †æº¢å‡º</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]){</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    ArrayList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ArrayList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]&gt;();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> byte</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å ç”¨å¤§é‡å †ç©ºé—´ï¼Œç›´æ¥æº¢å‡º</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception in thread </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OutOfMemoryError</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Java heap space</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">at </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">geym</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ch8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">oom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SimpleHeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SimpleHeapOOM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">java</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">14</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è§£å†³æ–¹æ³•ï¼šå¢å¤§å †ç©ºé—´(xmx)ï¼ŒåŠæ—¶é‡Šæ”¾å†…å­˜</p></blockquote><h3 id="æ°¸ä¹…åŒº" tabindex="-1"><a class="header-anchor" href="#æ°¸ä¹…åŒº"><span>æ°¸ä¹…åŒº</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ç”Ÿæˆå¤§é‡çš„ç±»</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        CglibBean</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> bean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> CglibBean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">geym.jvm.ch3.perm.bean</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> HashMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Caused</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> by</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OutOfMemoryError</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PermGen space</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Full</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> GC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">Tenured</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> 2523K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">2523</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">10944K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0125610</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> 2523K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">2523</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">15936K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">Perm </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> 4095K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">4095</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">4096K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)],</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0125868</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> secs] </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">Times</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.02</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> sys</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> real</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.01</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> secs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Heap</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> def </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> generation   total 4992K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used 89K </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x28280000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x287e0000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x2d7d0000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  eden space 4480K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x28280000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x282966d0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x286e0000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  from space 512K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x286e0000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x286e0000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x28760000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  to   space 512K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x28760000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x28760000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x287e0000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> tenured generation   total 10944K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used 2523K </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x2d7d0000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x2e280000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38280000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">   the space 10944K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  23</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x2d7d0000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x2da46cf0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x2da46e00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x2e280000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> compacting perm gen  total 4096K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used 4095K </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x38280000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38680000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38680000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">   the space 4096K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  99</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x38280000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x3867fff0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38680000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38680000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">) </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// æ°¸ä¹…åŒºæ»¡äº†</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ro space 10240K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  44</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x38680000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38af73f0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x38af7400</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x39080000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    rw space 12288K</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  52</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> used </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0x39080000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x396cdd28</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x396cde00</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x39c80000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è§£å†³æ–¹æ³•ï¼šå¢å¤§PermåŒº,å…è®¸Classå›æ”¶</p></blockquote><h3 id="javaæ ˆæº¢å‡º" tabindex="-1"><a class="header-anchor" href="#javaæ ˆæº¢å‡º"><span>Javaæ ˆæº¢å‡º</span></a></h3><p>è¿™é‡Œçš„æ ˆæº¢å‡ºæŒ‡ï¼Œåœ¨åˆ›å»ºçº¿ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦ä¸ºçº¿ç¨‹åˆ†é…æ ˆç©ºé—´ï¼Œè¿™ä¸ªæ ˆç©ºé—´æ˜¯å‘æ“ä½œç³»ç»Ÿè¯·æ±‚çš„ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿæ— æ³•ç»™å‡ºè¶³å¤Ÿçš„ç©ºé—´ï¼Œå°±ä¼šæŠ›å‡ºOOM</p><p><img src="`+hn+`" alt="image-20220606163743486"></p><p>æ¯”å¦‚è¿™é‡Œ<code>-Xmx1g -Xss1m</code>ï¼Œå †è®¾ç½®1G,æ ˆè®¾ç½®1M</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> SleepThread</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> implements</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Runnable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10000000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">InterruptedException </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">printStackTrace</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]){</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Thread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> SleepThread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Thread</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Thread</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> created</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception in thread </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> java</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OutOfMemoryError</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">unable to create </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> native thread</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è§£å†³æ–¹æ³•ï¼šå‡å°‘å †å†…å­˜,å‡å°‘çº¿ç¨‹æ ˆå¤§å°</p></blockquote><h3 id="ç›´æ¥å†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#ç›´æ¥å†…å­˜æº¢å‡º"><span>ç›´æ¥å†…å­˜æº¢å‡º</span></a></h3><p>ByteBuffer.allocateDirect()æ— æ³•ä»æ“ä½œç³»ç»Ÿè·å¾—è¶³å¤Ÿçš„ç©ºé—´</p><p><img src="`+en+'" alt="image-20220606165142149"></p><p><img src="'+pn+'" alt="image-20220606165212147"></p><blockquote><p>é‡åˆ°å†…å­˜æº¢å‡ºåï¼Œåº”è¯¥å¦‚ä½•æ€è€ƒå’Œå¤„ç†é—®é¢˜ï¼Ÿ</p></blockquote><h2 id="matä½¿ç”¨åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#matä½¿ç”¨åŸºç¡€"><span>MATä½¿ç”¨åŸºç¡€</span></a></h2><p>åŸºäºEclipseçš„è½¯ä»¶: http://www.eclipse.org/mat/</p><p>ä¸‹è½½åœ°å€ï¼šhttps://www.eclipse.org/mat/downloads.php</p><p><img src="'+tn+'" alt="image-20230928164211501"></p><p><strong>è§£å‹åæ‰“å¼€ä½¿ç”¨</strong></p><p><img src="'+kn+'" alt="SouthEast"></p><h3 id="æŸ±çŠ¶å›¾æ˜¾ç¤º" tabindex="-1"><a class="header-anchor" href="#æŸ±çŠ¶å›¾æ˜¾ç¤º"><span>æŸ±çŠ¶å›¾æ˜¾ç¤º</span></a></h3><p>æ˜¾ç¤ºæ¯ä¸ªç±»çš„ä½¿ç”¨æƒ…å†µï¼Œæ¯”å¦‚ç±»çš„æ•°é‡ï¼Œæ‰€å ç©ºé—´ç­‰</p><p><img src="'+dn+'" alt="image-20220606170033631"></p><h3 id="æ˜¾ç¤ºæ”¯é…æ ‘" tabindex="-1"><a class="header-anchor" href="#æ˜¾ç¤ºæ”¯é…æ ‘"><span>æ˜¾ç¤ºæ”¯é…æ ‘</span></a></h3><p><img src="'+rn+'" alt="image-20220606170053073"></p><h3 id="æ”¯é…æ ‘çš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ”¯é…æ ‘çš„æ¦‚å¿µ"><span>æ”¯é…æ ‘çš„æ¦‚å¿µ</span></a></h3><ul><li>åœ¨å¯¹è±¡å¼•ç”¨å›¾ä¸­ï¼Œæ‰€æœ‰æŒ‡å‘å¯¹è±¡Bçš„è·¯å¾„éƒ½ç»è¿‡å¯¹è±¡Aï¼Œåˆ™è®¤ä¸ºå¯¹è±¡Aæ”¯é…å¯¹è±¡B</li><li>å¦‚æœå¯¹è±¡Aæ˜¯ç¦»å¯¹è±¡Bæœ€è¿‘çš„ä¸€ä¸ªæ”¯é…å¯¹è±¡ï¼Œåˆ™è®¤ä¸ºå¯¹è±¡Aä¸ºå¯¹è±¡Bçš„ç›´æ¥æ”¯é…è€…</li></ul><p>å¯¹è±¡å¼•ç”¨å›¾è½¬ä¸ºæ”¯é…æ ‘çš„å›¾ï¼š</p><p><img src="'+gn+'" alt="image-20220606170126633"></p><blockquote><p>æ”¯é…è€…è¢«å›æ”¶ï¼Œè¢«æ”¯é…å¯¹è±¡ä¹Ÿè¢«å›æ”¶</p></blockquote><h3 id="æ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯"><span>æ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯</span></a></h3><p><img src="'+cn+'" alt="image-20220606170259604"></p><h3 id="æ˜¾ç¤ºå †æ€»ä½“ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æ˜¾ç¤ºå †æ€»ä½“ä¿¡æ¯"><span>æ˜¾ç¤ºå †æ€»ä½“ä¿¡æ¯</span></a></h3><p>æ¯”å¦‚æ¶ˆè€—æœ€å¤§çš„ä¸€äº›å¯¹è±¡ç­‰</p><p><img src="'+on+'" alt="image-20220606170318998"></p><p><img src="'+yn+'" alt="image-20220606170342853"></p><h3 id="æµ…å †-shallow-heap-ä¸æ·±å †-retained-heap" tabindex="-1"><a class="header-anchor" href="#æµ…å †-shallow-heap-ä¸æ·±å †-retained-heap"><span>æµ…å †(Shallow Heap)ä¸æ·±å †(Retained Heap)</span></a></h3><p><img src="'+mn+'" alt="image-20220606170405414"></p><p>æµ…å †:</p><ul><li>ä¸€ä¸ªå¯¹è±¡ç»“æ„æ‰€å ç”¨çš„å†…å­˜å¤§å°</li></ul><p><img src="'+An+'" alt="image-20220606170506060"></p><blockquote><p>JDK7åï¼ŒStringç»“æ„å‘ç”Ÿå˜åŒ–</p></blockquote><ul><li>3ä¸ªintç±»å‹ä»¥åŠä¸€ä¸ªå¼•ç”¨ç±»å‹åˆè®¡å ç”¨å†…å­˜3*4+4=16ä¸ªå­—èŠ‚ã€‚å†åŠ ä¸Šå¯¹è±¡å¤´çš„8ä¸ªå­—èŠ‚ï¼Œå› æ­¤Stringå¯¹è±¡å ç”¨çš„ç©ºé—´ï¼Œå³æµ…å †çš„å¤§å°æ˜¯16+8=24å­—èŠ‚</li><li>å¯¹è±¡å¤§å°æŒ‰ç…§8å­—èŠ‚å¯¹é½</li><li>æµ…å †å¤§å°å’Œå¯¹è±¡çš„å†…å®¹æ— å…³ï¼Œåªå’Œå¯¹è±¡çš„ç»“æ„æœ‰å…³</li></ul><p>æ·±å †</p><ul><li>ä¸€ä¸ªå¯¹è±¡è¢«GCå›æ”¶åï¼Œå¯ä»¥çœŸå®é‡Šæ”¾çš„å†…å­˜å¤§å°</li><li>åªèƒ½é€šè¿‡å¯¹è±¡è®¿é—®åˆ°çš„ï¼ˆç›´æ¥æˆ–è€…é—´æ¥ï¼‰æ‰€æœ‰å¯¹è±¡çš„æµ…å †ä¹‹å’Œ ï¼ˆæ”¯é…æ ‘ï¼‰</li></ul><p><img src="'+Dn+'" alt="image-20220606170644174"></p><p><img src="'+un+'" alt="image-20220606170655137"></p><p><img src="'+vn+'" alt="image-20220606170705947"></p><h2 id="ä½¿ç”¨visual-vmåˆ†æå †" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨visual-vmåˆ†æå †"><span>ä½¿ç”¨Visual VMåˆ†æå †</span></a></h2><p>javaè‡ªå¸¦çš„å¤šåŠŸèƒ½åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥åˆ†æå †Dump</p><p><img src="'+Bn+'" alt="image-20220606170738109"></p><p><img src="'+bn+'" alt="image-20220606170751054"></p><p><img src="'+Cn+'" alt="image-20220606170801125"></p><p>ä½¿ç”¨OOLæŸ¥è¯¢</p><p><img src="'+En+'" alt="image-20220606170822629"></p><p>è¿”å›å¼•ç”¨äº†(0,0)è¿™ä¸ªç‚¹çš„æ‰€æœ‰å¯¹è±¡</p><p><img src="'+fn+`" alt="image-20220606170838535"></p><h2 id="tomcat-oomåˆ†ææ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#tomcat-oomåˆ†ææ¡ˆä¾‹"><span>Tomcat OOMåˆ†ææ¡ˆä¾‹</span></a></h2><h3 id="æ¨¡æ‹Ÿoomæ¡ˆä¾‹ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ‹Ÿoomæ¡ˆä¾‹ä¾‹å­"><span>æ¨¡æ‹ŸOOMæ¡ˆä¾‹ä¾‹å­</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>æµ‹è§†æ¡ˆä¾‹å¯ä»¥è®¾ç½®å‚æ•°: -Xms8m -Xmx8m -XX:+HeapDumpOnOutOfMemoryError </span></span>
<span class="line"><span>8Mæ—¶ä¸ºäº†æµ‹è¯•æ¡ˆä¾‹å¿«é€Ÿå¡«æ»¡å†…å­˜,è¿™æ ·å†…å­˜æº¢å‡ºæ—¶ä¼šè¾“å‡ºåˆ°dumpæ–‡ä»¶</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+_n+'" alt="image-20220915193819177"></p><h3 id="tomcat-oom" tabindex="-1"><a class="header-anchor" href="#tomcat-oom"><span>Tomcat OOM</span></a></h3><p>â€‹ Tomcat åœ¨æ¥æ”¶å¤§é‡è¯·æ±‚æ—¶å‘ç”ŸOOMï¼Œè·å–å †Dumpæ–‡ä»¶ï¼Œè¿›è¡Œåˆ†æã€‚åˆ†æç›®çš„ï¼š</p><ul><li>æ‰¾å‡ºOOMçš„åŸå› </li><li>æ¨æµ‹ç³»ç»ŸOOMæ—¶çš„çŠ¶æ€</li><li>ç»™å‡ºè§£å†³è¿™ä¸ªOOMçš„æ–¹æ³•</li></ul><h3 id="ä½¿ç”¨matæ‰“å¼€å †" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨matæ‰“å¼€å †"><span>ä½¿ç”¨MATæ‰“å¼€å †</span></a></h3><p><img src="'+xn+'" alt="image-20220606170913027"></p><blockquote><p>å¯ä»¥çœ‹åˆ°StandardManagerå ç”¨äº†å¤§é‡çš„ç©ºé—´</p></blockquote><p>æˆ‘ä»¬è¿™é‡Œå…³å¿ƒå®ƒå¼•ç”¨äº†å“ªäº›å¯¹è±¡,outgoing references</p><p><img src="'+Fn+'" alt="image-20220606171003239"></p><p><img src="'+jn+'" alt="image-20220606171016873"></p><blockquote><p>å¯ä»¥çœ‹åˆ°ConcurrentHashMapå ç”¨äº†å¤§é‡ç©ºé—´</p></blockquote><p><img src="'+Sn+'" alt="image-20220606171030117"></p><p>æ‰“å¼€sessionsæŸ¥çœ‹å†…å®¹</p><p><img src="'+Xn+'" alt="image-20220606171038705"></p><p>ç¡®è®¤æ˜¯å¦æœ‰å¤§é‡session</p><p><img src="'+Mn+'" alt="image-20220606171049525"></p><blockquote><p>å¯ä»¥çœ‹åˆ°æœ‰9963ä¸ªå¯¹è±¡,æ¯ä¸ªå¯¹è±¡1.5kå·¦å³</p></blockquote><p>é€‰ä¸­ä»»æ„sessionæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p><p><img src="'+Gn+'" alt="image-20220606171109911"></p><blockquote><p>è¿™é‡Œ20åˆ†é’Ÿsessionå¯¹è±¡æ‰è¿‡æœŸ</p></blockquote><p><img src="'+zn+'" alt="image-20220606171123052"></p><blockquote><p>è¿™é‡Œæœ€åä¸€ä¸ªsession-ç¬¬ä¸€ä¸ªsessionçš„åˆ›å»ºæ—¶é—´,å°±æ˜¯æŒç»­çš„æ—¶é—´ã€‚åˆ›å»ºçš„é¢‘ç‡ä¸ºï¼š320æ¬¡/s</p></blockquote><p>è§£å†³æ–¹æ³•ï¼š</p><ol><li>OOMç”±äºä¿å­˜sessionè¿‡å¤šå¼•èµ·ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ å †å¤§å°</li><li>å¦‚æœåº”ç”¨å…è®¸ï¼Œç¼©çŸ­sessionçš„è¿‡æœŸæ—¶é—´ï¼Œä½¿å¾—sessionå¯ä»¥åŠæ—¶è¿‡æœŸï¼Œå¹¶å›æ”¶</li></ol><h1 id="_10ã€tomcat8ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_10ã€tomcat8ä¼˜åŒ–"><span>10ã€tomcat8ä¼˜åŒ–</span></a></h1><p>tomcatæœåŠ¡å™¨åœ¨JavaEEé¡¹ç›®ä¸­ä½¿ç”¨ç‡éå¸¸é«˜ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒå¯¹tomcatçš„ä¼˜åŒ–ä¹Ÿå˜å¾—éå¸¸é‡è¦äº†ã€‚</p><p>å¯¹äºtomcatçš„ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯ä»2ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œä¸€æ˜¯ï¼Œtomcatè‡ªèº«çš„é…ç½®ï¼Œå¦ä¸€ä¸ªæ˜¯tomcatæ‰€è¿è¡Œçš„jvmè™šæ‹Ÿæœºçš„è°ƒä¼˜ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°†ä»è¿™2ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚</p><h2 id="tomcaté…ç½®ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#tomcaté…ç½®ä¼˜åŒ–"><span>tomcaté…ç½®ä¼˜åŒ–</span></a></h2><h3 id="éƒ¨ç½²å®‰è£…tomcat8" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²å®‰è£…tomcat8"><span>éƒ¨ç½²å®‰è£…tomcat8</span></a></h3><p>ä¸‹è½½å¹¶å®‰è£…ï¼š</p><p>https://tomcat.apache.or/download-80.cgi</p><p><img src="'+qn+`" alt="image-20220915214032806"></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-8/v8.5.34/bin/apache-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tomcat-8.5.34.tar.gz</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -xvf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apache-tomcat-8.5.34.tar.gz</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apache-tomcat-8.5.34/conf</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œé…ç½®tomcatçš„ç®¡ç†ç”¨æˆ· </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tomcat-users.xml</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">role </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rolename</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">manager</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">role </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rolename</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">manager-gui</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">role </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rolename</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">admin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">role </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">rolename</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">admin-gui</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">user </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcat</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcat</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> roles</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">admin-gui,admin,manager-gui,manager</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#ä¿å­˜é€€å‡º </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å¦‚æœæ˜¯tomcat7ï¼Œé…ç½®äº†tomcatç”¨æˆ·å°±å¯ä»¥ç™»å½•ç³»ç»Ÿäº†ï¼Œä½†æ˜¯tomcat8ä¸­ä¸è¡Œï¼Œè¿˜éœ€è¦ä¿®æ”¹å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¦åˆ™è®¿ é—®ä¸äº†ï¼Œæç¤º403 </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> webapps/manager/META-INF/context.xml</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å°†&lt;Valveçš„å†…å®¹æ³¨é‡Šæ‰ </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Context </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">antiResourceLocking</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> privileged</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> &gt; </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">--</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Valve</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> className=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">org.apache.catalina.valves.RemoteAddrValve</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">			allow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> /</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">			&lt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Manager</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sessionAttributeValueClassNameFilter=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">java\\.lang\\. (?:Boolean|Integer|Long|Number|String)|org\\.apache\\.catalina\\.filters\\.CsrfPreventionFilter</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">LruCache(?:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1)?|java\\.util\\.(?:Linked)?HashMap</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/Context</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#ä¿å­˜é€€å‡ºå³å¯ </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å¯åŠ¨tomcat </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/apache-tomcat-8.5.34/bin/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./startup.sh</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ../logs/catalina.out</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#æ‰“å¼€æµè§ˆå™¨è¿›è¡Œæµ‹è¯•è®¿é—® </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">http://192.168.40.133:8080/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Jn+'" alt="image-20220915214236019"></p><p>ç‚¹å‡»â€œServer Statusâ€ï¼Œè¾“å…¥ç”¨æˆ·åã€å¯†ç è¿›è¡Œç™»å½•ï¼Œtomcat/tomcat</p><p><img src="'+Tn+'" alt="image-20220915214252993"></p><p><img src="'+Pn+'" alt="image-20220915214302866"></p><p>è¿›å…¥ä¹‹åå³å¯çœ‹åˆ°æœåŠ¡çš„ä¿¡æ¯ã€‚</p><h3 id="ç¦ç”¨ajpè¿æ¥" tabindex="-1"><a class="header-anchor" href="#ç¦ç”¨ajpè¿æ¥"><span><strong>ç¦ç”¨AJPè¿æ¥</strong></span></a></h3><p>åœ¨æœåŠ¡çŠ¶æ€é¡µé¢ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çŠ¶æ€ä¸‹ä¼šå¯ç”¨AJPæœåŠ¡ï¼Œå¹¶ä¸”å ç”¨8009ç«¯å£ã€‚</p><p><img src="'+On+'" alt="image-20220915214333870"></p><p>ä»€ä¹ˆæ˜¯AJPå‘¢ï¼Ÿ</p><p>AJPï¼ˆApache JServer Protocolï¼‰ AJPv13åè®®æ˜¯é¢å‘åŒ…çš„ã€‚WEBæœåŠ¡å™¨å’ŒServletå®¹å™¨é€šè¿‡TCPè¿æ¥æ¥äº¤äº’ï¼›ä¸ºäº†èŠ‚çœSOCKETåˆ›å»ºçš„æ˜‚è´µä»£ä»·ï¼ŒWEBæœåŠ¡å™¨ä¼šå°è¯•ç»´æŠ¤ä¸€ä¸ªæ°¸ä¹…TCPè¿æ¥åˆ°servletå®¹å™¨ï¼Œå¹¶ä¸”åœ¨å¤šä¸ªè¯·æ±‚å’Œå“åº”å‘¨æœŸè¿‡ç¨‹ä¼šé‡ç”¨è¿æ¥ã€‚</p><p><img src="'+wn+'" alt="image-20220915214346775"></p><p>æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä½¿ç”¨Nginx+tomcatçš„æ¶æ„ï¼Œæ‰€ä»¥ç”¨ä¸ç€AJPåè®®(apacheçš„æ‰èƒ½ç”¨)ï¼Œæ‰€ä»¥æŠŠAJPè¿æ¥å™¨ç¦ç”¨ã€‚</p><p>ä¿®æ”¹confä¸‹çš„server.xmlæ–‡ä»¶ï¼Œå°†AJPæœåŠ¡ç¦ç”¨æ‰å³å¯ã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Connector </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8009</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AJP/1.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> redirectPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> /</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+Kn+'" alt="image-20220915214405866"></p><p>é‡å¯tomcatï¼ŒæŸ¥çœ‹æ•ˆæœã€‚</p><p><img src="'+Rn+`" alt="image-20220915214453339"></p><p>å¯ä»¥çœ‹åˆ°AJPæœåŠ¡ä»¥åŠä¸å­˜åœ¨äº†ã€‚</p><h3 id="æ‰§è¡Œå™¨-çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œå™¨-çº¿ç¨‹æ± "><span><strong>æ‰§è¡Œå™¨ï¼ˆçº¿ç¨‹æ± ï¼‰</strong></span></a></h3><p>åœ¨tomcatä¸­æ¯ä¸€ä¸ªç”¨æˆ·è¯·æ±‚éƒ½æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± æé«˜æ€§èƒ½ã€‚</p><p>ä¿®æ”¹server.xmlæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!--å°†æ³¨é‡Šæ‰“å¼€--&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Executor</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namePrefix</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">catalina-exec-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">		maxThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">500</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> minSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">50</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> prestartminSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">		maxQueueSize</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">100</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">å‚æ•°è¯´æ˜ï¼š </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">maxThreadsï¼šæœ€å¤§å¹¶å‘æ•°ï¼Œé»˜è®¤è®¾ç½® 200ï¼Œä¸€èˆ¬å»ºè®®åœ¨ 500 ~ 1000ï¼Œæ ¹æ®ç¡¬ä»¶è®¾æ–½å’Œä¸šåŠ¡æ¥åˆ¤æ–­ </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">minSpareThreadsï¼šTomcat åˆå§‹åŒ–æ—¶åˆ›å»ºçš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤è®¾ç½® 25 </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">prestartminSpareThreadsï¼š åœ¨ Tomcat åˆå§‹åŒ–çš„æ—¶å€™å°±åˆå§‹åŒ– minSpareThreads çš„å‚æ•°å€¼ï¼Œå¦‚æœä¸ç­‰äº trueï¼ŒminSpareThreads çš„å€¼å°±æ²¡å•¥æ•ˆæœäº† </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">maxQueueSizeï¼Œæœ€å¤§çš„ç­‰å¾…é˜Ÿåˆ—æ•°ï¼Œè¶…è¿‡åˆ™æ‹’ç»è¯·æ±‚ </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">--&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!--åœ¨Connectorä¸­è®¾ç½®executorå±æ€§æŒ‡å‘ä¸Šé¢çš„æ‰§è¡Œå™¨--&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Connector</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> executor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> port</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8080</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> protocol</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">		connectionTimeout</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">		redirectPort</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿å­˜é€€å‡ºï¼Œé‡å¯tomcatï¼ŒæŸ¥çœ‹æ•ˆæœã€‚</p><p><img src="`+Ln+`" alt="image-20220915214833821"></p><p>åœ¨é¡µé¢ä¸­æ˜¾ç¤ºæœ€å¤§çº¿ç¨‹æ•°ä¸º-1ï¼Œè¿™ä¸ªæ˜¯æ­£å¸¸çš„ï¼Œä»…ä»…æ˜¯æ˜¾ç¤ºçš„é—®é¢˜ï¼Œå®é™…ä½¿ç”¨çš„æŒ‡å®šçš„å€¼ã€‚</p><p>ä¹Ÿæœ‰äººé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼šhttps://blog.csdn.net/weixin_38278878/article/details/80144397</p><h3 id="_3ç§è¿è¡Œæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_3ç§è¿è¡Œæ¨¡å¼"><span><strong>3ç§è¿è¡Œæ¨¡å¼</strong></span></a></h3><p>tomcatçš„è¿è¡Œæ¨¡å¼æœ‰3ç§ï¼š</p><ol><li><p>bio é»˜è®¤çš„æ¨¡å¼,æ€§èƒ½éå¸¸ä½ä¸‹,æ²¡æœ‰ç»è¿‡ä»»ä½•ä¼˜åŒ–å¤„ç†å’Œæ”¯æŒ.</p></li><li><p>nio nio(new I/O)ï¼Œæ˜¯Java SE 1.4åŠåç»­ç‰ˆæœ¬æä¾›çš„ä¸€ç§æ–°çš„I/Oæ“ä½œæ–¹å¼(å³java.nioåŒ…åŠå…¶å­åŒ…)ã€‚Java nioæ˜¯ä¸€ä¸ªåŸºäºç¼“å†²åŒºã€å¹¶èƒ½æä¾›éé˜»å¡I/Oæ“ä½œçš„Java APIï¼Œå› æ­¤nioä¹Ÿè¢«çœ‹æˆæ˜¯non-blocking I/Oçš„ç¼©å†™ã€‚å®ƒæ‹¥æœ‰æ¯”ä¼ ç»ŸI/Oæ“ä½œ(bio)æ›´å¥½çš„å¹¶å‘è¿è¡Œæ€§èƒ½ã€‚</p></li><li><p>apr å®‰è£…èµ·æ¥æœ€å›°éš¾,ä½†æ˜¯ä»æ“ä½œç³»ç»Ÿçº§åˆ«æ¥è§£å†³å¼‚æ­¥çš„IOé—®é¢˜,å¤§å¹…åº¦çš„æé«˜æ€§èƒ½.</p></li></ol><p>æ¨èä½¿ç”¨nioï¼Œä¸è¿‡ï¼Œåœ¨tomcat8ä¸­æœ‰æœ€æ–°çš„nio2ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œå»ºè®®ä½¿ç”¨nio2.</p><p>è®¾ç½®nio2ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Connector</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> executor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> port</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8080</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">	protocol</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">org.apache.coyote.http11.Http11Nio2Protocol</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">	connectionTimeout</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">	redirectPort</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Vn+'" alt="image-20220915214941286"></p><p>å¯ä»¥çœ‹åˆ°å·²ç»è®¾ç½®ä¸ºnio2äº†ã€‚</p><h2 id="éƒ¨ç½²æµ‹è¯•ç”¨çš„java-webé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²æµ‹è¯•ç”¨çš„java-webé¡¹ç›®"><span><strong>éƒ¨ç½²æµ‹è¯•ç”¨çš„java webé¡¹ç›®</strong></span></a></h2><p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•æ€§èƒ½ï¼Œæˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªjava webé¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®æœ¬èº«å’Œæœ¬å¥—è¯¾ç¨‹æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä»…ä»…ç”¨äºæµ‹è¯•ã€‚</p><p>æ³¨æ„ï¼šè¿™é‡Œåœ¨æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ–°çš„tomcatï¼Œè¿›è¡Œæµ‹è¯•ï¼Œåé¢å†å¯¹å…¶è¿›è¡Œä¼˜åŒ–è°ƒæ•´ï¼Œå†æµ‹è¯•ã€‚</p><h3 id="åˆ›å»ºdashboardæ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºdashboardæ•°æ®åº“"><span><strong>åˆ›å»ºdashboardæ•°æ®åº“</strong></span></a></h3><p>åœ¨èµ„æ–™ä¸­æ‰¾åˆ°sqlè„šæœ¬æ–‡ä»¶dashboard.sqlï¼Œåœ¨linuxæœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>cat dashboard.sql | mysql -uroot -proot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°æœ‰3å¼ è¡¨ã€‚</p><p><img src="'+In+`" alt="image-20220915215118778"></p><h3 id="éƒ¨ç½²webåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²webåº”ç”¨"><span><strong>éƒ¨ç½²webåº”ç”¨</strong></span></a></h3><p>åœ¨èµ„æ–™ä¸­æ‰¾åˆ°itcat-dashboard-web.warï¼Œä¸Šä¼ åˆ°linuxæœåŠ¡å™¨ï¼Œè¿›è¡Œéƒ¨ç½²å®‰è£…ã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/apache-tomcat-8.5.34/webapps</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ROOT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ROOT/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rzä¸Šä¼ waråŒ…</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -xvf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> itcat-dashboard-web.war</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> itcat-dashboard-web.war</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#ä¿®æ”¹æ•°æ®åº“é…ç½®æ–‡ä»¶ </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/apache-tomcat-8.5.34/webapps/ROOT/WEB-INF/classes</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jdbc.properties</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#è¿™é‡Œæ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œé…ç½® </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jdbc.driverClassName</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=com.mysql.jdbc.Driver</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jdbc.url</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=jdbc:mysql://node01:3306/dashboard?</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">useUnicode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">characterEncoding</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autoReconnect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">allowMultiQueries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jdbc.username</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=root</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jdbc.password</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡æ–°å¯åŠ¨tomcatã€‚</p><p>è®¿é—®é¦–é¡µï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»å¯åŠ¨æˆåŠŸï¼šhttp://192.168.40.133:8080/index</p><p><img src="`+Nn+'" alt="image-20220915215234078"></p><h2 id="ä½¿ç”¨apache-jmeterè¿›è¡Œæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨apache-jmeterè¿›è¡Œæµ‹è¯•"><span><strong>ä½¿ç”¨Apache JMeterè¿›è¡Œæµ‹è¯•</strong></span></a></h2><p>Apache Jmeteræ˜¯å¼€æºçš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œæˆ‘ä»¬å€ŸåŠ©äºæ­¤å·¥å…·è¿›è¡Œæµ‹è¯•ï¼Œå°†æµ‹è¯•å‡ºtomcatçš„ååé‡ç­‰ä¿¡æ¯ã€‚</p><h3 id="ä¸‹è½½å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½å®‰è£…"><span><strong>ä¸‹è½½å®‰è£…</strong></span></a></h3><p>ä¸‹è½½åœ°å€ï¼šhttp://jmeter.apache.org/download_jmeter.cgi</p><p><img src="'+Hn+'" alt="image-20220915215315023"></p><p>å®‰è£…ï¼šç›´æ¥å°†ä¸‹è½½å¥½çš„zipå‹ç¼©åŒ…è¿›è¡Œè§£å‹å³å¯ã€‚</p><p><img src="'+Un+'" alt="image-20220915215326081"></p><p>è¿›å…¥binç›®å½•ï¼Œæ‰¾åˆ°jmeter.batæ–‡ä»¶ï¼ŒåŒæœºæ‰“å¼€å³å¯å¯åŠ¨ã€‚</p><p><img src="'+Wn+'" alt="image-20220915215338170"></p><p><img src="'+Zn+'" alt="image-20220915215342581"></p><p><img src="'+Yn+'" alt="image-20220915215346952"></p><h3 id="ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€"><span><strong>ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€</strong></span></a></h3><p>é»˜è®¤çš„ä¸»é¢˜æ˜¯é»‘è‰²é£æ ¼çš„ä¸»é¢˜å¹¶ä¸”è¯­è¨€æ˜¯è‹±è¯­ï¼Œè¿™æ ·ä¸å¤ªæ–¹ä¾¿ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸‹ä¸»é¢˜å’Œä¸­æ–‡è¯­è¨€ã€‚</p><p><img src="'+$n+'" alt="image-20220915215358344"></p><p><img src="'+Qn+'" alt="image-20220915215402078"></p><p><img src="'+sl+'" alt="image-20220915215406268"></p><p>ä¸»é¢˜ä¿®æ”¹å®Œæˆã€‚</p><p>æ¥ä¸‹æ¥è®¾ç½®è¯­è¨€ä¸ºç®€ä½“ä¸­æ–‡</p><p><img src="'+il+'" alt="image-20220915215415667"></p><p>è¯­è¨€ä¿®æ”¹å®Œæˆ</p><p><img src="'+al+'" alt="image-20220915215424924"></p><h3 id="åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹"><span><strong>åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹</strong></span></a></h3><p>ç¬¬ä¸€æ­¥ï¼šä¿å­˜æµ‹è¯•ç”¨ä¾‹</p><p><img src="'+nl+'" alt="image-20220915215439536"></p><p>ç¬¬äºŒæ­¥ï¼šæ·»åŠ çº¿ç¨‹ç»„ï¼Œä½¿ç”¨çº¿ç¨‹æ¨¡æ‹Ÿç”¨æˆ·çš„å¹¶å‘</p><p><img src="'+ll+'" alt="image-20220915215448563"></p><p><img src="'+hl+'" alt="image-20220915215454259"></p><p>1000ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¾ªç¯10æ¬¡ï¼Œä¹Ÿå°±æ˜¯tomcatä¼šæ¥æ”¶åˆ°10000ä¸ªè¯·æ±‚ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ httpè¯·æ±‚</p><p><img src="'+el+'" alt="image-20220915215503575"></p><p><img src="'+pl+'" alt="image-20220915215509298"></p><p>ç¬¬å››æ­¥ï¼šæ·»åŠ è¯·æ±‚ç›‘æ§</p><p><img src="'+tl+'" alt="image-20220915215519057"></p><p><img src="'+kl+'" alt="image-20220915215524845"></p><h3 id="å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•"><span><strong>å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•</strong></span></a></h3><p><img src="'+dl+'" alt="image-20220915215538130"></p><h3 id="èšåˆæŠ¥å‘Š" tabindex="-1"><a class="header-anchor" href="#èšåˆæŠ¥å‘Š"><span><strong>èšåˆæŠ¥å‘Š</strong></span></a></h3><p>åœ¨èšåˆæŠ¥å‘Šä¸­ï¼Œé‡ç‚¹çœ‹ååé‡ã€‚</p><p><img src="'+rl+'" alt="image-20220915215549376"></p><p>12sè¿˜æ˜¯æ¯”è¾ƒæ…¢çš„ã€‚ååé‡æ¯sæœ‰73ã€‚é”™è¯¯ç‡å¹¶ä¸æ˜¯è¦ä¿è¯ä¸º0ã€‚3ä¸ªæ•°æ®åº”è¯¥å‡è¡¡è€ƒé‡ã€‚</p><h2 id="è°ƒæ•´tomcatå‚æ•°è¿›è¡Œä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#è°ƒæ•´tomcatå‚æ•°è¿›è¡Œä¼˜åŒ–"><span><strong>è°ƒæ•´tomcatå‚æ•°è¿›è¡Œä¼˜åŒ–</strong></span></a></h2><p>é€šè¿‡ä¸Šé¢æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œtomcatåœ¨ä¸åšä»»ä½•è°ƒæ•´æ—¶ï¼Œååé‡ä¸º73æ¬¡/ç§’ã€‚</p><h3 id="ç¦ç”¨ajpæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ç¦ç”¨ajpæœåŠ¡"><span><strong>ç¦ç”¨AJPæœåŠ¡</strong></span></a></h3><p>ç¼–è¾‘Tomcatçš„config/server.xmlæ–‡ä»¶</p><p><img src="'+gl+'" alt="image-20220915215617009"></p><p><img src="'+cl+'" alt="image-20220915215621819"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç¦ç”¨AJPæœåŠ¡åï¼Œååé‡ä¼šæœ‰æ‰€æå‡ã€‚</p><p>å½“ç„¶äº†ï¼Œæµ‹è¯•ä¸ä¸€å®šå‡†ç¡®ï¼Œéœ€è¦å¤šæµ‹è¯•å‡ æ¬¡æ‰èƒ½çœ‹å‡ºæ˜¯å¦æœ‰æå‡</p><h3 id="è®¾ç½®çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#è®¾ç½®çº¿ç¨‹æ± "><span><strong>è®¾ç½®çº¿ç¨‹æ± </strong></span></a></h3><p>é€šè¿‡è®¾ç½®çº¿ç¨‹æ± ï¼Œè°ƒæ•´çº¿ç¨‹æ± ç›¸å…³çš„å‚æ•°è¿›è¡Œæµ‹è¯•tomcatçš„æ€§èƒ½ã€‚</p><h4 id="æœ€å¤§çº¿ç¨‹æ•°ä¸º500-åˆå§‹ä¸º50" tabindex="-1"><a class="header-anchor" href="#æœ€å¤§çº¿ç¨‹æ•°ä¸º500-åˆå§‹ä¸º50"><span><strong>æœ€å¤§çº¿ç¨‹æ•°ä¸º500ï¼Œåˆå§‹ä¸º50</strong></span></a></h4><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Executor</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namePrefix</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">catalina-exec-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> maxThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">500</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> minSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">50</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> prestartminSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+ol+'" alt="image-20220915220840055"></p><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="'+yl+'" alt="image-20220915215703916"></p><p>ååé‡ä¸º128æ¬¡/ç§’ï¼Œæ€§èƒ½æœ‰æ‰€æå‡ã€‚</p><h4 id="æœ€å¤§çº¿ç¨‹æ•°ä¸º1000-åˆå§‹ä¸º200" tabindex="-1"><a class="header-anchor" href="#æœ€å¤§çº¿ç¨‹æ•°ä¸º1000-åˆå§‹ä¸º200"><span><strong>æœ€å¤§çº¿ç¨‹æ•°ä¸º1000ï¼Œåˆå§‹ä¸º200</strong></span></a></h4><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Executor</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namePrefix</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">catalina-exec-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> maxThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> minSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">200</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> prestartminSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+ml+'" alt="image-20220915215735978"></p><p>ååé‡ä¸º151ï¼Œæ€§èƒ½æœ‰æ‰€æå‡</p><h4 id="æœ€å¤§çº¿ç¨‹æ•°ä¸º5000-åˆå§‹ä¸º1000" tabindex="-1"><a class="header-anchor" href="#æœ€å¤§çº¿ç¨‹æ•°ä¸º5000-åˆå§‹ä¸º1000"><span><strong>æœ€å¤§çº¿ç¨‹æ•°ä¸º5000ï¼Œåˆå§‹ä¸º1000</strong></span></a></h4><p>æ˜¯å¦æ˜¯çº¿ç¨‹æ•°æœ€å¤šï¼Œé€Ÿåº¦è¶Šå¿«å‘¢ï¼Ÿ æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ã€‚</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Executor</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namePrefix</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">catalina-exec-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> maxThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> minSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> prestartminSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+Al+`" alt="image-20220915215808314"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æœ€å¤§çº¿ç¨‹å·²ç»è®¾ç½®åˆ°5000ï¼Œä½†æ˜¯å®é™…æµ‹è¯•æ•ˆæœå¹¶ä¸ç†æƒ³ï¼Œå¹¶ä¸”å¹³å‡çš„å“åº”æ—¶é—´ä¹Ÿè¾¹é•¿äº†ï¼Œæ‰€ä»¥å•çº¯é æå‡çº¿ç¨‹æ•°é‡æ˜¯ä¸èƒ½ä¸€ç›´å¾—åˆ°æ€§èƒ½æå‡çš„ã€‚</p><h3 id="è®¾ç½®æœ€å¤§ç­‰å¾…é˜Ÿåˆ—æ•°" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®æœ€å¤§ç­‰å¾…é˜Ÿåˆ—æ•°"><span><strong>è®¾ç½®æœ€å¤§ç­‰å¾…é˜Ÿåˆ—æ•°</strong></span></a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚å‘é€åˆ°tomcatï¼Œå¦‚æœtomcatæ­£å¿™ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šä¸€ç›´ç­‰å¾…ã€‚è¿™æ ·è™½ç„¶å¯ä»¥ä¿è¯æ¯ä¸ªè¯·æ±‚éƒ½èƒ½è¯·æ±‚åˆ°ï¼Œä½†æ˜¯è¯·æ±‚æ—¶é—´å°±ä¼šè¾¹é•¿ã€‚</p><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¸€å®šè¦æ±‚è¯·æ±‚ä¸€å®šç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®æœ€å¤§ç­‰å¾…é˜Ÿåˆ—å¤§å°ï¼Œå¦‚æœè¶…è¿‡å°±ä¸ç­‰å¾…äº†ã€‚è¿™æ ·è™½ç„¶æœ‰äº›è¯·æ±‚æ˜¯å¤±è´¥çš„ï¼Œä½†æ˜¯è¯·æ±‚æ—¶é—´ä¼šç¼©çŸ­ã€‚å…¸å‹çš„åº”ç”¨ï¼š12306ã€‚</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!--æœ€å¤§ç­‰å¾…æ•°ä¸º100--&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Executor</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namePrefix</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">catalina-exec-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> maxThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">500</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> minSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">100</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> prestartminSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">maxQueueSize</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">100</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Dl+`" alt="image-20220915215843384"></p><p>æµ‹è¯•ç»“æœï¼š</p><ul><li>å¹³å‡å“åº”æ—¶é—´ï¼š3.1ç§’ <ul><li>å“åº”æ—¶é—´æ˜æ˜¾ç¼©çŸ­</li></ul></li><li>é”™è¯¯ç‡ï¼š49.88% <ul><li>é”™è¯¯ç‡æå‡åˆ°ä¸€åŠï¼Œä¹Ÿå¯ä»¥ç†è§£ï¼Œæœ€å¤§çº¿ç¨‹ä¸º500ï¼Œæµ‹è¯•çš„å¹¶å‘ä¸º1000</li></ul></li><li>ååé‡ï¼š238æ¬¡/ç§’ <ul><li>ååé‡æ˜æ˜¾æå‡</li></ul></li></ul><p>è¿™æ ·å¯¹å‚æ•°è°ƒæ•´ã€å–åˆ°Tomcatçš„æœ€ä½³çŠ¶æ€ï¼ˆå“åº”æ—¶é—´çŸ­ï¼Œååé‡é«˜ï¼‰ï¼Œè‡³äºé”™è¯¯ç‡å¯ä»¥é€šè¿‡Tomcaté›†ç¾¤è§„é¿ã€‚</p><p>ç»“è®ºï¼šå“åº”æ—¶é—´ã€ååé‡è¿™2ä¸ªæŒ‡æ ‡éœ€è¦æ‰¾åˆ°å¹³è¡¡æ‰èƒ½è¾¾åˆ°æ›´å¥½çš„æ€§èƒ½ã€‚</p><h3 id="è®¾ç½®nio2çš„è¿è¡Œæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®nio2çš„è¿è¡Œæ¨¡å¼"><span><strong>è®¾ç½®nio2çš„è¿è¡Œæ¨¡å¼</strong></span></a></h3><p>å°†æœ€å¤§çº¿ç¨‹è®¾ç½®ä¸º500è¿›è¡Œæµ‹è¯•ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Executor</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namePrefix</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">catalina-exec-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> maxThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">500</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> minSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">50</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> prestartminSpareThreads</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">/&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- è®¾ç½®nio2 --&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Connector</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> executor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcatThreadPool</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> port</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8080</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> protocol</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">org.apache.coyote.http11.Http11Nio2Protocol</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> connectionTimeout</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> redirectPort</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+ul+`" alt="image-20220915215932563"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå¹³å‡å“åº”æ—¶é—´æœ‰ç¼©çŸ­ï¼Œååé‡æœ‰æå‡ï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼šnio2çš„æ€§èƒ½è¦é«˜äºnio</p><h2 id="è°ƒæ•´jvmå‚æ•°è¿›è¡Œä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#è°ƒæ•´jvmå‚æ•°è¿›è¡Œä¼˜åŒ–"><span><strong>è°ƒæ•´JVMå‚æ•°è¿›è¡Œä¼˜åŒ–</strong></span></a></h2><p>æ¥ä¸‹æ¥ï¼Œæµ‹è¯•é€šè¿‡jvmå‚æ•°è¿›è¡Œä¼˜åŒ–ï¼Œä¸ºäº†æµ‹è¯•ä¸€è‡´æ€§ï¼Œä¾ç„¶å°†æœ€å¤§çº¿ç¨‹æ•°è®¾ç½®ä¸º500ï¼Œå¯ç”¨nio2è¿è¡Œæ¨¡å¼ã€‚</p><h3 id="è®¾ç½®å¹¶è¡Œåƒåœ¾å›æ”¶å™¨" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®å¹¶è¡Œåƒåœ¾å›æ”¶å™¨"><span><strong>è®¾ç½®å¹¶è¡Œåƒåœ¾å›æ”¶å™¨</strong></span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#å¹´è½»ä»£ã€è€å¹´ä»£å‡ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨ï¼Œåˆå§‹å †å†…å­˜64Mï¼Œæœ€å¤§å †å†…å­˜512M </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">JAVA_OPTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-XX:+UseParallelGC -XX:+UseParallelOldGC -Xms64m -Xmx512m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC -Xloggc:../logs/gc.log</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+vl+'" alt="image-20220915221641646"></p><p>æµ‹è¯•ç»“æœä¸é»˜è®¤çš„JVMå‚æ•°ç»“æœæ¥è¿‘ã€‚ï¼ˆæ‰§è¡Œäº†2æ¬¡æµ‹è¯•ï¼Œç»“æœæ˜¯ç¬¬äºŒæ¬¡æµ‹è¯•çš„ç»“æœï¼‰</p><h3 id="æŸ¥çœ‹gcæ—¥å¿—æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹gcæ—¥å¿—æ–‡ä»¶"><span><strong>æŸ¥çœ‹gcæ—¥å¿—æ–‡ä»¶</strong></span></a></h3><p>å°†gc.logæ–‡ä»¶ä¸Šä¼ åˆ°gceasy.ioæŸ¥çœ‹gcä¸­æ˜¯å¦å­˜åœ¨é—®é¢˜ã€‚</p><p>é—®é¢˜ä¸€ï¼š</p><p><img src="'+Bl+'" alt="image-20220915221712247"></p><p>åœ¨æŠ¥å‘Šä¸­æ˜¾ç¤ºï¼Œåœ¨5æ¬¡GCæ—¶ï¼Œç³»ç»Ÿæ‰€æ¶ˆè€—çš„æ—¶é—´å¤§äºç”¨æˆ·æ—¶é—´ï¼Œè¿™ååº”å‡ºçš„æœåŠ¡å™¨çš„æ€§èƒ½å­˜åœ¨ç“¶é¢ˆï¼Œè°ƒåº¦CPUç­‰èµ„æºæ‰€æ¶ˆè€—çš„æ—¶é—´è¦é•¿ä¸€äº›ã€‚</p><p>é—®é¢˜äºŒï¼š</p><p><img src="'+bl+'" alt="image-20220915221724999"></p><p>å¯ä»¥å…³é”®æŒ‡æ ‡ä¸­å¯ä»¥çœ‹å‡ºï¼Œååé‡è¡¨ç°ä¸é”™ï¼Œä½†æ˜¯gcæ—¶ï¼Œçº¿ç¨‹çš„æš‚åœæ—¶é—´ç¨æœ‰ç‚¹é•¿ã€‚</p><p>é—®é¢˜ä¸‰ï¼š</p><p><img src="'+Cl+'" alt="image-20220915221735595"></p><p>é€šè¿‡GCçš„ç»Ÿè®¡å¯ä»¥çœ‹å‡ºï¼š</p><ul><li>å¹´è½»ä»£çš„gcæœ‰74æ¬¡ï¼Œæ¬¡æ•°ç¨æœ‰å¤šï¼Œè¯´æ˜å¹´è½»ä»£è®¾ç½®çš„å¤§å°ä¸åˆé€‚éœ€è¦è°ƒæ•´</li><li>FullGCæœ‰8æ¬¡ï¼Œè¯´æ˜å †å†…å­˜çš„å¤§å°ä¸åˆé€‚ï¼Œéœ€è¦è°ƒæ•´</li></ul><p>é—®é¢˜å››ï¼š</p><p><img src="'+El+'" alt="image-20220915221752545"></p><p>ä»GCåŸå› çš„å¯ä»¥çœ‹å‡ºï¼Œå¹´è½»ä»£å¤§å°è®¾ç½®ä¸åˆç†ï¼Œå¯¼è‡´äº†å¤šæ¬¡GCã€‚</p><h3 id="è°ƒæ•´å¹´è½»ä»£å¤§å°" tabindex="-1"><a class="header-anchor" href="#è°ƒæ•´å¹´è½»ä»£å¤§å°"><span>è°ƒæ•´å¹´è½»ä»£å¤§å°</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">JAVA_OPTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-XX:+UseParallelGC -XX:+UseParallelOldGC -Xms128m -Xmx1024m -XX:NewSize=64m -XX:MaxNewSize=256m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC -Xloggc:../logs/gc.log</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å°†åˆå§‹å †å¤§å°è®¾ç½®ä¸º128mï¼Œæœ€å¤§ä¸º1024m</p><p>åˆå§‹å¹´è½»ä»£å¤§å°64mï¼Œå¹´è½»ä»£æœ€å¤§256m</p><p><img src="'+fl+'" alt="image-20220915221833571"></p><p>ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼Œååé‡ä»¥åŠå“åº”æ—¶é—´å‡æœ‰æå‡ã€‚</p><p>æŸ¥çœ‹gcæ—¥å¿—ï¼š</p><p><img src="'+_l+'" alt="image-20220915221842901"></p><p><img src="'+xl+`" alt="image-20220915221847115"></p><p>å¯ä»¥çœ‹åˆ°GCæ¬¡æ•°è¦æ˜æ˜¾å‡å°‘ï¼Œè¯´æ˜è°ƒæ•´æ˜¯æœ‰æ•ˆçš„ã€‚</p><h3 id="è®¾ç½®g1åƒåœ¾å›æ”¶å™¨" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®g1åƒåœ¾å›æ”¶å™¨"><span><strong>è®¾ç½®G1åƒåœ¾å›æ”¶å™¨</strong></span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#è®¾ç½®äº†æœ€å¤§åœé¡¿æ—¶é—´100æ¯«ç§’ï¼Œåˆå§‹å †å†…å­˜128mï¼Œæœ€å¤§å †å†…å­˜1024m </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">JAVA_OPTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-XX:+UseG1GC -XX:MaxGCPauseMillis=100 -Xms128m -Xmx1024m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC -Xloggc:../logs/gc.log</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="`+Fl+'" alt="image-20220915221928684"></p><p><img src="'+jl+`" alt="image-20220915221932888"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œååé‡æœ‰æ‰€æå‡ï¼Œè¯„ä»·å“åº”æ—¶é—´ä¹Ÿæœ‰æ‰€ç¼©çŸ­ã€‚</p><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span><strong>å°ç»“</strong></span></a></h3><p>é€šè¿‡ä¸Šè¿°çš„æµ‹è¯•ï¼Œå¯ä»¥æ€»ç»“å‡ºï¼Œå¯¹tomcatæ€§èƒ½ä¼˜åŒ–å°±æ˜¯éœ€è¦ä¸æ–­çš„è¿›è¡Œè°ƒæ•´å‚æ•°ï¼Œç„¶åæµ‹è¯•ç»“æœï¼Œå¯èƒ½ä¼šè°ƒä¼˜ä¹Ÿå¯èƒ½ä¼šè°ƒå·®ï¼Œè¿™æ—¶å°±éœ€è¦å€ŸåŠ©äºgcçš„å¯è§†åŒ–å·¥å…·æ¥çœ‹gcçš„æƒ…å†µã€‚å†å¸®æˆ‘æˆ‘ä»¬åšå‡ºå†³ç­–åº”è¯¥è°ƒæ•´å“ªäº›å‚æ•°ã€‚</p><h1 id="_11ã€ä»å­—èŠ‚ç è§’åº¦éªŒè¯ä»£ç ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_11ã€ä»å­—èŠ‚ç è§’åº¦éªŒè¯ä»£ç ä¼˜åŒ–"><span>11ã€ä»å­—èŠ‚ç è§’åº¦éªŒè¯ä»£ç ä¼˜åŒ–</span></a></h1><p>å‰é¢æˆ‘ä»¬é€šè¿‡tomcatæœ¬èº«çš„å‚æ•°ä»¥åŠjvmçš„å‚æ•°å¯¹tomcatåšäº†ä¼˜åŒ–ï¼Œå…¶å®è¦æƒ³å°†åº”ç”¨ç¨‹åºè·‘çš„æ›´å¿«ã€æ•ˆç‡æ›´é«˜ï¼Œé™¤äº†å¯¹tomcatå®¹å™¨ä»¥åŠjvmä¼˜åŒ–å¤–ï¼Œåº”ç”¨ç¨‹åºä»£ç æœ¬èº«å¦‚æœå†™çš„æ•ˆç‡ä¸é«˜çš„ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œå¯¹äºç¨‹åºæœ¬èº«çš„ä¼˜åŒ–ä¹Ÿå°±å¾ˆé‡è¦äº†ã€‚</p><p>å¯¹äºç¨‹åºæœ¬èº«çš„ä¼˜åŒ–ï¼Œå¯ä»¥å€Ÿé‰´å¾ˆå¤šå‰è¾ˆä»¬çš„ç»éªŒï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œåœ¨ä»æºç è§’åº¦æ–¹é¢åˆ†æçš„è¯ï¼Œä¸å¥½é‰´åˆ«å‡ºå“ªä¸ªæ•ˆç‡é«˜ï¼Œå¦‚å¯¹å­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œï¼Œæ˜¯ç›´æ¥â€œ+â€å·æ‹¼æ¥æ•ˆç‡é«˜è¿˜æ˜¯ä½¿ç”¨StringBuilderæ•ˆç‡é«˜ï¼Ÿ</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦é€šè¿‡æŸ¥çœ‹ç¼–è¯‘å¥½çš„classæ–‡ä»¶ä¸­å­—èŠ‚ç ï¼Œå°±å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œjavaç¼–å†™åº”ç”¨ï¼Œéœ€è¦å…ˆé€šè¿‡javacå‘½ä»¤ç¼–è¯‘æˆclassæ–‡ä»¶ï¼Œå†é€šè¿‡jvmæ‰§è¡Œï¼Œjvmæ‰§è¡Œæ—¶æ˜¯éœ€è¦å°†classæ–‡ä»¶ä¸­çš„å­—èŠ‚ç è½½å…¥åˆ°jvmè¿›è¡Œè¿è¡Œçš„ã€‚</p><h2 id="é€šè¿‡javapå‘½ä»¤æŸ¥çœ‹classæ–‡ä»¶çš„å­—èŠ‚ç å†…å®¹" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡javapå‘½ä»¤æŸ¥çœ‹classæ–‡ä»¶çš„å­—èŠ‚ç å†…å®¹"><span>é€šè¿‡javapå‘½ä»¤æŸ¥çœ‹classæ–‡ä»¶çš„å­—èŠ‚ç å†…å®¹</span></a></h2><p>é¦–å…ˆï¼Œçœ‹ä¸€ä¸ªç®€å•çš„Test1ç±»çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> cn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itcast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Test1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> b </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡javapå‘½ä»¤æŸ¥çœ‹classæ–‡ä»¶ä¸­çš„å­—èŠ‚ç å†…å®¹ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">javap</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Test1.class</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Test1.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+Sl+'" alt="image-20220915223204417"></p><p>æŸ¥çœ‹Test1.txtæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="'+Xl+'" alt="image-20220915223337036"></p><p><img src="'+Ml+'" alt="image-20220915223340666"></p><p>å†…å®¹å¤§è‡´åˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼š</p><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šæ˜¾ç¤ºäº†ç”Ÿæˆè¿™ä¸ªclassçš„javaæºæ–‡ä»¶ã€ç‰ˆæœ¬ä¿¡æ¯ã€ç”Ÿæˆæ—¶é—´ç­‰ã€‚</p><p>ç¬¬äºŒéƒ¨åˆ†ï¼šæ˜¾ç¤ºäº†è¯¥ç±»ä¸­æ‰€æ¶‰åŠåˆ°å¸¸é‡æ± ï¼Œå…±35ä¸ªå¸¸é‡ã€‚</p><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ˜¾ç¤ºè¯¥ç±»çš„æ„é€ å™¨ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥çš„ã€‚</p><p>ç¬¬å››éƒ¨åˆ†ï¼šæ˜¾ç¤ºäº†mainæ–¹çš„ä¿¡æ¯ã€‚ï¼ˆè¿™ä¸ªæ˜¯éœ€è¦æˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„ï¼‰</p><h2 id="å¸¸é‡æ± " tabindex="-1"><a class="header-anchor" href="#å¸¸é‡æ± "><span><strong>å¸¸é‡æ± </strong></span></a></h2><p>å®˜ç½‘æ–‡æ¡£ï¼š</p><p>https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4-140</p><p><img src="'+Gl+'" alt="image-20220915223510008"></p><h2 id="æè¿°ç¬¦" tabindex="-1"><a class="header-anchor" href="#æè¿°ç¬¦"><span>æè¿°ç¬¦</span></a></h2><p>å­—æ®µæè¿°ç¬¦ å®˜ç½‘ï¼šhttps://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.2</p><p><img src="'+zl+'" alt="image-20220915223725266"></p><h2 id="æ–¹æ³•æè¿°ç¬¦" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•æè¿°ç¬¦"><span>æ–¹æ³•æè¿°ç¬¦</span></a></h2><p>å®˜ç½‘ï¼šhttps://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3 ç¤ºä¾‹ï¼š</p><p>The method descriptor for the method</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Object m(int i, double d, Thread t) {...}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>is:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>(IDLjava/lang/Thread;)Ljava/lang/Object;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="è§£è¯»æ–¹æ³•å­—èŠ‚ç " tabindex="-1"><a class="header-anchor" href="#è§£è¯»æ–¹æ³•å­—èŠ‚ç "><span>è§£è¯»æ–¹æ³•å­—èŠ‚ç </span></a></h2><p><img src="'+ql+'" alt="image-20220915223833230"></p><p><strong>å›¾è§£</strong></p><p><img src="'+Jl+'" alt="image-20220915223853427"></p><p><img src="'+Tl+'" alt="image-20220915223857345"></p><p><img src="'+Pl+`" alt="image-20220915223904353"></p><h2 id="ç ”ç©¶-i-ä¸-i-çš„ä¸åŒ" tabindex="-1"><a class="header-anchor" href="#ç ”ç©¶-i-ä¸-i-çš„ä¸åŒ"><span><strong>ç ”ç©¶</strong> <strong>i++</strong> <strong>ä¸</strong> <strong>++i</strong> <strong>çš„ä¸åŒ</strong></span></a></h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œi++è¡¨ç¤ºï¼Œå…ˆè¿”å›å†+1ï¼Œ++iè¡¨ç¤ºï¼Œå…ˆ+1å†è¿”å›ã€‚å®ƒçš„åº•å±‚æ˜¯æ€ä¹ˆæ ·çš„å‘¢? æˆ‘ä»¬ä¸€èµ·æ¢ç©¶ä¸‹ã€‚</p><p>ç¼–å†™æµ‹è¯•ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Test2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Test2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">method1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Test2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">method2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> method1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> //æ‰“å°1 </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> method2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ++</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//æ‰“å°2 </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŸ¥çœ‹classå­—èŠ‚ç " tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹classå­—èŠ‚ç "><span><strong>æŸ¥çœ‹classå­—èŠ‚ç </strong></span></a></h3><p><img src="`+Ol+'" alt="image-20220915224152947"></p><p><img src="'+wl+'" alt="image-20220915224157923"></p><p><img src="'+Kl+'" alt="image-20220915224201382"></p><h3 id="å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”"><span><strong>å¯¹æ¯”</strong></span></a></h3><p>i++ï¼š</p><p><img src="'+Rl+'" alt="image-20220915224243764"></p><p>++iï¼š</p><p><img src="'+Ll+`" alt="image-20220915224255030"></p><p>åŒºåˆ«ï¼š</p><p>i++</p><ul><li>åªæ˜¯åœ¨æœ¬åœ°å˜é‡ä¸­å¯¹æ•°å­—åšäº†ç›¸åŠ ï¼Œå¹¶æ²¡æœ‰å°†æ•°æ®å‹å…¥åˆ°æ“ä½œæ ˆ</li><li>å°†å‰é¢æ‹¿åˆ°çš„æ•°å­—1ï¼Œå†æ¬¡ä»æ“ä½œæ ˆä¸­æ‹¿åˆ°ï¼Œå‹å…¥åˆ°æœ¬åœ°å˜é‡ä¸­</li></ul><p>++i</p><ul><li>å°†æœ¬åœ°å˜é‡ä¸­çš„æ•°å­—åšäº†ç›¸åŠ ï¼Œå¹¶ä¸”å°†æ•°æ®å‹å…¥åˆ°æ“ä½œæ ˆ</li><li>å°†æ“ä½œæ ˆä¸­çš„æ•°æ®ï¼Œå†æ¬¡å‹å…¥åˆ°æœ¬åœ°å˜é‡ä¸­</li></ul><p>å°ç»“ï¼šå¯ä»¥é€šè¿‡æŸ¥çœ‹å­—èŠ‚ç çš„æ–¹å¼å¯¹ä»£ç çš„åº•å±‚åšç ”ç©¶ï¼Œæ¢ç©¶å…¶åŸç†ã€‚</p><h2 id="å­—ç¬¦ä¸²æ‹¼æ¥" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²æ‹¼æ¥"><span><strong>å­—ç¬¦ä¸²æ‹¼æ¥</strong></span></a></h2><p>å­—ç¬¦ä¸²çš„æ‹¼æ¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨æ˜¯éå¸¸é¢‘ç¹çš„ï¼Œå¸¸ç”¨çš„æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ul><li>+å·æ‹¼æ¥ï¼š str+&quot;456&quot;</li><li>StringBuilderæ‹¼æ¥</li><li>StringBufferæ‹¼æ¥</li></ul><p>StringBufferæ˜¯ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯ä½¿ç”¨åœºæ™¯æ˜¯ä¸ä¼šæ¶‰åŠåˆ°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜çš„ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™ä¼šé€‰æ‹©StringBuilderï¼Œæ•ˆç‡ä¼šé«˜ä¸€äº›ã€‚</p><p>é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼ŒStringBuilderå’Œâ€œ+â€å·æ‹¼æ¥ï¼Œå“ªä¸ªæ•ˆç‡é«˜å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡å­—èŠ‚ç çš„æ–¹å¼è¿›è¡Œæ¢ç©¶ã€‚</p><p>é¦–å…ˆï¼Œç¼–å†™ä¸ªç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> cn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itcast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Test3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Test3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">m1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Test3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">m2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> m1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">456</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> s1 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> s2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> m2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">456</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        StringBuilder</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> StringBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">append</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">append</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> s3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toString</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹Test3.classçš„å­—èŠ‚ç </p><p><img src="`+Vl+'" alt="image-20220915224426867"></p><p><img src="'+Il+'" alt="image-20220915224441718"></p><p><img src="'+Nl+'" alt="image-20220915224513988"></p><p><img src="'+Hl+'" alt="image-20220915224528841"></p><p><img src="'+Ul+'" alt="image-20220915224556272"></p><p><img src="'+Wl+`" alt="image-20220915224637051"></p><p>ä»è§£å­—èŠ‚ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œm1()æ–¹æ³•æºç ä¸­æ˜¯ä½¿ç”¨+å·æ‹¼æ¥ï¼Œä½†æ˜¯åœ¨å­—èŠ‚ç ä¸­ä¹Ÿè¢«ç¼–è¯‘æˆäº†StringBuilderæ–¹å¼ã€‚</p><p>æ‰€ä»¥ï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œ+å·å’ŒStringBuilderæ˜¯ç›¸ç­‰çš„ï¼Œæ•ˆç‡ä¸€æ ·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸ªæ¡ˆä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> cn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">itcast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jvm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Test4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> static</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Test4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">m1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Test4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">m2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> m1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            str </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> str </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> m2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        StringBuilder</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> StringBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">append</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        System</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">println</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">sb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toString</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>m1() ä¸ m2() å“ªä¸ªæ–¹æ³•çš„æ•ˆç‡é«˜ï¼Ÿ</p><p>ä¾ç„¶æ˜¯é€šè¿‡å­—èŠ‚ç çš„æ–¹å¼è¿›è¡Œæ¢ç©¶ã€‚</p><p><img src="`+Zl+'" alt="image-20220915224744560"></p><p><img src="'+Yl+'" alt="image-20220915224812494"></p><p><img src="'+$l+'" alt="image-20220915224856682"></p><p><img src="'+Ql+`" alt="image-20220915224959101"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œm1()æ–¹æ³•ä¸­çš„å¾ªç¯ä½“å†…ï¼Œæ¯ä¸€æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºStringBuilderå¯¹è±¡ï¼Œæ•ˆç‡ä½äºm2()æ–¹æ³•ã€‚</p><p><strong>å°ç»“</strong></p><p>ä½¿ç”¨å­—èŠ‚ç çš„æ–¹å¼å¯ä»¥å¾ˆå¥½æŸ¥çœ‹ä»£ç åº•å±‚çš„æ‰§è¡Œï¼Œä»è€Œå¯ä»¥çœ‹å‡ºå“ªäº›å®ç°æ•ˆç‡é«˜ï¼Œå“ªäº›å®ç°æ•ˆç‡ä½ã€‚å¯ä»¥æ›´å¥½çš„å¯¹æˆ‘ä»¬çš„ä»£ç åšä¼˜åŒ–ã€‚è®©ç¨‹åºæ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚</p><h1 id="_12ã€ä»£ç ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_12ã€ä»£ç ä¼˜åŒ–"><span>12ã€ä»£ç ä¼˜åŒ–</span></a></h1><p>ä¼˜åŒ–ï¼Œä¸ä»…ä»…æ˜¯åœ¨è¿è¡Œç¯å¢ƒè¿›è¡Œä¼˜åŒ–ï¼Œè¿˜éœ€è¦åœ¨ä»£ç æœ¬èº«åšä¼˜åŒ–ï¼Œå¦‚æœä»£ç æœ¬èº«å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–æ–¹é¢å†æ€ä¹ˆä¼˜åŒ–ä¹Ÿä¸å¯èƒ½è¾¾åˆ°æ•ˆæœæœ€ä¼˜çš„ã€‚</p><h2 id="å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡" tabindex="-1"><a class="header-anchor" href="#å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡"><span>å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡</span></a></h2><p>è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’çš„å‚æ•°ä»¥åŠåœ¨è°ƒç”¨ä¸­åˆ›å»ºçš„ä¸´æ—¶å˜é‡éƒ½ä¿å­˜åœ¨æ ˆä¸­é€Ÿåº¦è¾ƒå¿«ï¼Œå…¶ä»–å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å®ä¾‹å˜é‡ç­‰ï¼Œéƒ½åœ¨å †ä¸­åˆ›å»ºï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚å¦å¤–ï¼Œæ ˆä¸­åˆ›å»ºçš„å˜é‡ï¼Œéšç€æ–¹æ³•çš„è¿è¡Œç»“æŸï¼Œè¿™äº›å†…å®¹å°±æ²¡äº†ï¼Œä¸éœ€è¦é¢å¤–çš„åƒåœ¾å›æ”¶ã€‚</p><h2 id="å°½é‡å‡å°‘å¯¹å˜é‡çš„é‡å¤è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#å°½é‡å‡å°‘å¯¹å˜é‡çš„é‡å¤è®¡ç®—"><span>å°½é‡å‡å°‘å¯¹å˜é‡çš„é‡å¤è®¡ç®—</span></a></h2><p>æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œå¯¹æ–¹æ³•çš„è°ƒç”¨ï¼Œå³ä½¿æ–¹æ³•ä¸­åªæœ‰ä¸€å¥è¯­å¥ï¼Œä¹Ÿæ˜¯æœ‰æ¶ˆè€—çš„ã€‚æ‰€ä»¥ä¾‹å¦‚ä¸‹é¢çš„æ“ä½œï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {...}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å»ºè®®æ›¿æ¢ä¸ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {...}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œåœ¨list.size()å¾ˆå¤§çš„æ—¶å€™ï¼Œå°±å‡å°‘äº†å¾ˆå¤šçš„æ¶ˆè€—ã€‚</p><h2 id="å°½é‡é‡‡ç”¨æ‡’åŠ è½½çš„ç­–ç•¥-å³åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#å°½é‡é‡‡ç”¨æ‡’åŠ è½½çš„ç­–ç•¥-å³åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»º"><span>å°½é‡é‡‡ç”¨æ‡’åŠ è½½çš„ç­–ç•¥ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»º</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">aaa</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//å»ºè®®æ›¿æ¢æˆ </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">aaa</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    list</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¼‚å¸¸ä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºæµç¨‹" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸ä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºæµç¨‹"><span><strong>å¼‚å¸¸ä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºæµç¨‹</strong></span></a></h2><p>å¼‚å¸¸å¯¹æ€§èƒ½ä¸åˆ©ã€‚æŠ›å‡ºå¼‚å¸¸é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒThrowableæ¥å£çš„æ„é€ å‡½æ•°è°ƒç”¨åä¸ºfillInStackTrace()çš„æœ¬åœ°åŒæ­¥æ–¹æ³•ï¼ŒfillInStackTrace()æ–¹æ³•æ£€æŸ¥å †æ ˆï¼Œæ”¶é›†è°ƒç”¨è·Ÿè¸ªä¿¡æ¯ã€‚åªè¦æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼ŒJavaè™šæ‹Ÿæœºå°±å¿…é¡»è°ƒæ•´è°ƒç”¨å †æ ˆï¼Œå› ä¸ºåœ¨å¤„ç†è¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å¼‚å¸¸åªèƒ½ç”¨äºé”™è¯¯å¤„ç†ï¼Œä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºæµç¨‹ã€‚</p><h2 id="ä¸è¦å°†æ•°ç»„å£°æ˜ä¸ºpublic-static-final" tabindex="-1"><a class="header-anchor" href="#ä¸è¦å°†æ•°ç»„å£°æ˜ä¸ºpublic-static-final"><span>ä¸è¦å°†æ•°ç»„å£°æ˜ä¸ºpublic static final</span></a></h2><p>å› ä¸ºè¿™æ¯«æ— æ„ä¹‰ï¼Œè¿™æ ·åªæ˜¯å®šä¹‰äº†å¼•ç”¨ä¸ºstatic finalï¼Œæ•°ç»„çš„å†…å®¹è¿˜æ˜¯å¯ä»¥éšæ„æ”¹å˜çš„ï¼Œå°†æ•°ç»„å£°æ˜ä¸ºpublicæ›´æ˜¯ä¸€ä¸ªå®‰å…¨æ¼æ´ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªæ•°ç»„å¯ä»¥è¢«å¤–éƒ¨ç±»æ‰€æ”¹å˜ã€‚</p><h2 id="ä¸è¦åˆ›å»ºä¸€äº›ä¸ä½¿ç”¨çš„å¯¹è±¡-ä¸è¦å¯¼å…¥ä¸€äº›ä¸ä½¿ç”¨çš„ç±»" tabindex="-1"><a class="header-anchor" href="#ä¸è¦åˆ›å»ºä¸€äº›ä¸ä½¿ç”¨çš„å¯¹è±¡-ä¸è¦å¯¼å…¥ä¸€äº›ä¸ä½¿ç”¨çš„ç±»"><span>ä¸è¦åˆ›å»ºä¸€äº›ä¸ä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸è¦å¯¼å…¥ä¸€äº›ä¸ä½¿ç”¨çš„ç±»</span></a></h2><p>è¿™æ¯«æ— æ„ä¹‰ï¼Œå¦‚æœä»£ç ä¸­å‡ºç°&quot;The value of the local variable i is not used&quot;ã€&quot;The import java.util is never used&quot;ï¼Œé‚£ä¹ˆè¯·åˆ é™¤è¿™äº›æ— ç”¨çš„å†…å®¹</p><h2 id="ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­é¿å…ä½¿ç”¨åå°„" tabindex="-1"><a class="header-anchor" href="#ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­é¿å…ä½¿ç”¨åå°„"><span>ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­é¿å…ä½¿ç”¨åå°„</span></a></h2><p>åå°„æ˜¯Javaæä¾›ç»™ç”¨æˆ·ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŠŸèƒ½å¼ºå¤§å¾€å¾€æ„å‘³ç€æ•ˆç‡ä¸é«˜ã€‚ä¸å»ºè®®åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨å°¤å…¶æ˜¯é¢‘ç¹ä½¿ç”¨åå°„æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯ Methodçš„invokeæ–¹æ³•ã€‚ å¦‚æœç¡®å®æœ‰å¿…è¦ï¼Œä¸€ç§å»ºè®®æ€§çš„åšæ³•æ˜¯å°†é‚£äº›éœ€è¦é€šè¿‡åå°„åŠ è½½çš„ç±»åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™é€šè¿‡åå°„å®ä¾‹åŒ–å‡ºä¸€ä¸ªå¯¹è±¡å¹¶æ”¾å…¥å†…å­˜ã€‚</p><h2 id="ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± å’Œçº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± å’Œçº¿ç¨‹æ± "><span>ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± å’Œçº¿ç¨‹æ± </span></a></h2><p>è¿™ä¸¤ä¸ªæ± éƒ½æ˜¯ç”¨äºé‡ç”¨å¯¹è±¡çš„ï¼Œå‰è€…å¯ä»¥é¿å…é¢‘ç¹åœ°æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼Œåè€…å¯ä»¥é¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ã€‚</p><h2 id="å®¹å™¨åˆå§‹åŒ–æ—¶å°½å¯èƒ½æŒ‡å®šé•¿åº¦" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨åˆå§‹åŒ–æ—¶å°½å¯èƒ½æŒ‡å®šé•¿åº¦"><span>å®¹å™¨åˆå§‹åŒ–æ—¶å°½å¯èƒ½æŒ‡å®šé•¿åº¦</span></a></h2><p>å®¹å™¨åˆå§‹åŒ–æ—¶å°½å¯èƒ½æŒ‡å®šé•¿åº¦ï¼Œå¦‚ï¼šnew ArrayList&lt;&gt;(10); new HashMap&lt;&gt;(32); é¿å…å®¹å™¨é•¿åº¦ä¸è¶³æ—¶ï¼Œæ‰©å®¹å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</p><h2 id="arraylistéšæœºéå†å¿«-linkedlistæ·»åŠ åˆ é™¤å¿«" tabindex="-1"><a class="header-anchor" href="#arraylistéšæœºéå†å¿«-linkedlistæ·»åŠ åˆ é™¤å¿«"><span>ArrayListéšæœºéå†å¿«ï¼ŒLinkedListæ·»åŠ åˆ é™¤å¿«</span></a></h2><h2 id="ä½¿ç”¨entryéå†map" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨entryéå†map"><span>ä½¿ç”¨Entryéå†Map</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> HashMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;&gt;();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Entry</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> entry</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> :</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">entrySet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> entry</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getKey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> entry</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getValue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¿å…ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼šï¼ˆéå†äº†2æ¬¡ï¼‰</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> HashMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;&gt;();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> key</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> :</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">keySet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    String</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸è¦æ‰‹åŠ¨è°ƒç”¨system-gc" tabindex="-1"><a class="header-anchor" href="#ä¸è¦æ‰‹åŠ¨è°ƒç”¨system-gc"><span>ä¸è¦æ‰‹åŠ¨è°ƒç”¨System.gc();</span></a></h2><h2 id="stringå°½é‡å°‘ç”¨æ­£åˆ™è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#stringå°½é‡å°‘ç”¨æ­£åˆ™è¡¨è¾¾å¼"><span>Stringå°½é‡å°‘ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></a></h2><p>æ­£åˆ™è¡¨è¾¾å¼è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯å…¶æ•ˆç‡è¾ƒä½ï¼Œé™¤éæ˜¯æœ‰éœ€è¦ï¼Œå¦åˆ™å°½å¯èƒ½å°‘ç”¨ã€‚ replace() ä¸æ”¯æŒæ­£åˆ™ replaceAll() æ”¯æŒæ­£åˆ™ å¦‚æœä»…ä»…æ˜¯å­—ç¬¦çš„æ›¿æ¢å»ºè®®ä½¿ç”¨replace()ã€‚</p><h2 id="æ—¥å¿—çš„è¾“å‡ºè¦æ³¨æ„çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—çš„è¾“å‡ºè¦æ³¨æ„çº§åˆ«"><span>æ—¥å¿—çš„è¾“å‡ºè¦æ³¨æ„çº§åˆ«</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// å½“å‰çš„æ—¥å¿—çº§åˆ«æ˜¯error </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">LOGGER</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">info</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ä¿å­˜å‡ºé”™ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¯¹èµ„æºçš„close-å»ºè®®åˆ†å¼€æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å¯¹èµ„æºçš„close-å»ºè®®åˆ†å¼€æ“ä½œ"><span>å¯¹èµ„æºçš„close()å»ºè®®åˆ†å¼€æ“ä½œ</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    XXX</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">close</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    YYY</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">close</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ...</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// å»ºè®®æ”¹ä¸º </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    XXX</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">close</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ...</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    YYY</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">close</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Exception </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">){</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ...</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1741)]))}const lh=i(sh,[["render",ih]]),hh=JSON.parse('{"path":"/chuxin/07_%E6%96%B9%E5%90%91/06_%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/01_JVM/","title":"ã€æ·±å…¥ä»£ç ç³»åˆ—ã€‘æ‰‹ç‰µæ‰‹ä¸€èµ·å­¦JVM","lang":"zh-CN","frontmatter":{"typora-root-url":"../../../.vuepress/public","title":"ã€æ·±å…¥ä»£ç ç³»åˆ—ã€‘æ‰‹ç‰µæ‰‹ä¸€èµ·å­¦JVM","id":"code-deep-concurrency-jvm.html","tags":["æ–¹å‘","å¹¶å‘","JVM"],"categories":["ç¼–ç¨‹"],"keywords":"è¯­æ³•,åŸºç¡€,Java,å¾®æœåŠ¡,ç¼–ç¨‹,æ•°æ®å­˜å‚¨","description":"å¹¶å‘ç¼–ç¨‹","date":"2024-11-13T11:47:25.000Z","createTime":"2025/08/23 15:49:32","permalink":"/chuxin/07_æ–¹å‘/06_å¹¶å‘ç¼–ç¨‹/01_JVM/","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ã€æ·±å…¥ä»£ç ç³»åˆ—ã€‘æ‰‹ç‰µæ‰‹ä¸€èµ·å­¦JVM\\",\\"image\\":[\\"https://zuoer96.github.io/docs/docs/images/image-20230928164130440.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164138957.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322103040674.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220604163905645.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220604164221952.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220604164549468.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220604165145141.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220604165525384.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322133820431.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322135008844.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605081910952.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605082130838.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605082248826.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605082403503.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605082528328.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605082625624.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605081532806.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605083227428.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605083513690.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605083715043.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605084247101.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605084406430.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605084450167.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606182947329.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322174708164.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164236853.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322175549121.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322175609021.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606183542274.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322172801851.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210322175628817.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210329105800328.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210329105546453.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606183820312.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184302779.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184358909.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210329104743038.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184050633.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184820692.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184610285.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184637200.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184659735.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606184716425.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210329114350327.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210329114932971.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606185129410.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606185153807.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606185211781.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606185227953.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210325135403075.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210329093556986.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210324101225120.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210324103100187.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210324104530470.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210324105125093.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200421111048271.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210325104219429.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200421114248164.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830183650282.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830184731968.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830185043741.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830185209013.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210325135056497.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210330111421370.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210326141144524.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210326141912946.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210326141956360.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210330111458021.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210330143017610.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210326152043324.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210401175034807.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164252806.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331111333565.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210330161050813.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210330164000447.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331100234007.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331091443372.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606075858080.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331153504656.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331160410760.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331164644697.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164306371.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331114434625.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210331114645139.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830175025468.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830180020170.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830175226283.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830175317648.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830180208969.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830180550626.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830181511968.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830181222212.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830182151723.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830183048287.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830182708026.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830182854330.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830183016790.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605092936434.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605093119151.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200429102816516.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915201654499.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915201753250.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915201850728.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200429235159875.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200429235422031.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200430001554975.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200430001725601.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210406165830911.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210406170434507.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915204744944.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210406173628609.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210406174157937.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210407085100468.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915205359020.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210407084211962.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915205958150.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210402154906657.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210402160801656.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915210947125.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164203175.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164148445.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210407153159222.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20200506191455510.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210407180815914.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210402114507424.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915212651198.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915212341529.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915212353523.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915212359521.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915212403718.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605090010628.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605085953282.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605085929352.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605085843642.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220605085816651.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408162538333.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408163439858.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408163653183.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408163949306.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408164152924.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408172308650.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408172408015.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408172501063.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408172628499.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408173001294.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408173408882.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408173756291.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408173912968.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180257479.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180340673.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180429177.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180505228.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180546815.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180621878.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180647712.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180717968.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408180822553.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408181044095.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408181203637.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408182302407.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408182416738.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408185109798.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20210408185136455.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606080320531.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606080750238.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606080928760.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081229638.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081256030.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081431416.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081544716.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081555781.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081613952.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081625438.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081630749.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081638015.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606081654137.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606082300923.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606082334018.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606082346125.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606082620699.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606082633311.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830190141761.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830190632245.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083423253.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830191111078.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083516498.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830191437756.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830191504682.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830192028935.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083624401.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083630876.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083638583.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083649037.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915195851918.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915195903417.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915195919563.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915195953453.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915200019581.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915200032331.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915200052275.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083726599.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084526922.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084502784.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083837307.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083856748.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915200227524.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915200243057.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915200254116.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084817434.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083946248.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606083952669.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084000260.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084037591.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084732456.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606084714400.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606163743486.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606165142149.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606165212147.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20230928164211501.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220830192823115.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170033631.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170053073.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170126633.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170259604.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170318998.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170342853.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170405414.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170506060.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170644174.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170655137.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170705947.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170738109.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170751054.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170801125.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170822629.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170838535.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915193819177.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606170913027.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171003239.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171016873.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171030117.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171038705.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171049525.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171109911.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220606171123052.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214032806.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214236019.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214252993.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214302866.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214333870.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214346775.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214405866.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214453339.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214833821.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915214941286.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215118778.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215234078.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215315023.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215326081.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215338170.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215342581.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215346952.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215358344.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215402078.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215406268.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215415667.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215424924.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215439536.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215448563.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215454259.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215503575.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215509298.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215519057.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215524845.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215538130.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215549376.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215617009.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215621819.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915220840055.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215703916.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215735978.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215808314.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215843384.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915215932563.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221641646.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221712247.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221724999.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221735595.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221752545.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221833571.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221842901.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221847115.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221928684.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915221932888.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223204417.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223337036.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223340666.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223510008.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223725266.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223833230.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223853427.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223857345.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915223904353.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224152947.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224157923.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224201382.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224243764.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224255030.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224426867.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224441718.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224513988.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224528841.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224556272.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224637051.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224744560.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224812494.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224856682.png\\",\\"https://zuoer96.github.io/docs/docs/images/image-20220915224959101.png\\"],\\"datePublished\\":\\"2024-11-13T11:47:25.000Z\\",\\"dateModified\\":\\"2025-09-03T02:00:28.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://zuoer96.github.io/docs/docs/chuxin/07_%E6%96%B9%E5%90%91/06_%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/01_JVM/"}],["meta",{"property":"og:site_name","content":"ç¼–ç¨‹å¤‡å¿˜å½•"}],["meta",{"property":"og:title","content":"ã€æ·±å…¥ä»£ç ç³»åˆ—ã€‘æ‰‹ç‰µæ‰‹ä¸€èµ·å­¦JVM"}],["meta",{"property":"og:description","content":"å¹¶å‘ç¼–ç¨‹"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://zuoer96.github.io/docs/docs/images/image-20230928164130440.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-03T02:00:28.000Z"}],["meta",{"property":"article:tag","content":"JVM"}],["meta",{"property":"article:tag","content":"å¹¶å‘"}],["meta",{"property":"article:tag","content":"æ–¹å‘"}],["meta",{"property":"article:published_time","content":"2024-11-13T11:47:25.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-03T02:00:28.000Z"}]]},"readingTime":{"minutes":144.36,"words":43308},"git":{"createdTime":1755938647000,"updatedTime":1756864828000,"contributors":[{"name":"zuoer96","username":"zuoer96","email":"31268184+zuoer96@users.noreply.github.com","commits":2,"avatar":"https://avatars.githubusercontent.com/zuoer96?v=4","url":"https://github.com/zuoer96"}]},"filePathRelative":"notes/00-æ–¹å‘/06_å¹¶å‘ç¼–ç¨‹/01_JVM.md","headers":[],"bulletin":true}');export{lh as comp,hh as data};
